System.register("chunks:///_virtual/api.ts",["cc","./request.ts"],(function(t){var e,a;return{setters:[function(t){e=t.cclegacy},function(t){a=t.default}],execute:function(){t({gameEnd:function(t){return a({url:"/gameEnd",method:"post",data:t})},gameStart:function(t){return a({url:"/gameStart",method:"post",data:t})},getAuth:function(t){return a({url:"/getAuth",method:"post",data:t})},heartBeat:function(t){return a({url:"/gameHeartBeat",method:"post",data:t})}}),e._RF.push({},"024a3KZXQxP+6P4B3WAgqmc","api",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/AstarTest.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MapGameData.ts","./SimpleAstar.ts","./UIComponent.ts"],(function(t){var o,e,i,s,n,r,a,h,f;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,i=t.Graphics,s=t.v2,n=t.Color,r=t.Vec2},function(t){a=t.default},function(t){h=t.default},function(t){f=t.UIComponent}],execute:function(){e._RF.push({},"27789nsNTlJG5yx0Upg5ZVj","AstarTest",void 0);t("default",function(t){function e(){for(var o,e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return(o=t.call.apply(t,[this].concat(i))||this).rootNode=void 0,o.graphics=void 0,o.myPos=r.ZERO,o.simpleAstar=void 0,o.offsetX=void 0,o.offsetY=void 0,o.tgtPos=void 0,o.pathNodes=void 0,o.myNode=void 0,o}o(e,t);var f=e.prototype;return f.onLoad=function(){this.rootNode=this.node.parent,this.simpleAstar=new h([[1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1],[0,0,1,1,1,0,0,1,1,1,1,0,0,1,1,1,0,0],[0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0],[0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]),this.offsetX=0,this.offsetY=0},f.init=function(t){var o=this.node.getPosition();if(o.x&&o.y){this.graphics=this.rootNode.getComponent(i)||this.rootNode.addComponent(i);var e=this.simpleAstar.find(o.x,o.y,t.x,t.y);if(e)return this.pathNodes=e,this.draw(),this.convertToPos(this.pathNodes)}},f.convertToPos=function(t){if(!t)return t;for(var o=[],e=0;e<t.length;e++){var i=t[e],n=this.getPosByIndex(i);o.push(s(n.x,n.y))}return o},f.drawPoint=function(t,o,e,i,s){t.fillColor=s,t.circle(o,e,i),t.fill()},f.draw=function(){this.graphics.clear();for(var t=0;t<this.pathNodes.length;t++){var o=this.pathNodes[t],e=this.getPosByIndex(o);this.drawPoint(this.graphics,e.x,e.y,30,n.RED)}},f.getPosByIndex=function(t){var o=t.x,e=t.y;return{x:o*a.GameCellWidth+a.GameCellWidth/2-this.offsetX,y:-e*a.GameCellHeight-a.GameCellHeight/2+this.offsetY}},e}(f));e._RF.pop()}}}));

System.register("chunks:///_virtual/AttackComponent.ts",["cc"],(function(t){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"93d63zOtI9JlbISOjtEaZJZ","AttackComponent",void 0);t("AttackComponent",(function(){this.mAttackTarget=null,this.isHit=!1,this.isCalcAtk=!1,this.mFireTime=0,this.mAttackValue=0}));c._RF.pop()}}}));

System.register("chunks:///_virtual/AttackSystem.ts",["cc","./Cannon.ts","./MathUtils.ts","./Monster.ts","./SkillManager.ts","./Constants.ts","./DevLog.ts","./BulletBase.ts"],(function(t){var n,e,a,o,c,i,m,s,r,u,g,l;return{setters:[function(t){n=t.cclegacy,e=t.v3,a=t.Animation,o=t.tween},function(t){c=t.Cannon},function(t){i=t.MathUtils},function(t){m=t.Monster},function(t){s=t.SkillManager},function(t){r=t.BUFFER_QUANPINGGONGJI,u=t.BUFFER_GONGJIJIASU},function(t){g=t.DevLog},function(t){l=t.BulletBase}],execute:function(){n._RF.push({},"a1c0d/LrHVEDpfhvEeRrRIy","AttackSystem",void 0);t("AttackSystem",function(){function t(){}return t.cannonAttackUpdate=function(t,n){var a=t.baseCompnent.gameObject,o=a.getComponent(c);if(null!=t.attackComponent.mAttackTarget){if(!t.attackComponent.mAttackTarget.active)return void(t.attackComponent.mAttackTarget=null);var m=i.getDistance(t.attackComponent.mAttackTarget.getPosition(),e(a.getPosition().x,a.getPosition().y)),g=500;if(s.instance.mBufferState[r]&&(g*=10),Math.abs(m)>g)return void(t.attackComponent.mAttackTarget=null);var l=a.getPosition(),k=t.attackComponent.mAttackTarget.getPosition(),p=i.getAngle(e(l.x,l.y),k);if(p+=360,p-=90,t.attackComponent.mFireTime>0)o.setRotation(p);else{var C=300*n;(o.mGunNode.angle>p||p-o.mGunNode.angle>180)&&(C=-C),o.mGunNode.angle+=C,o.mGunNode.angle<0&&(o.mGunNode.angle+=360),Math.abs(o.mGunNode.angle-p)<Math.abs(C)&&(t.attackComponent.mFireTime=1,s.instance.mBufferState[u]&&(t.attackComponent.mFireTime=.5),o.beginFire(t.attackComponent.mAttackTarget),o.setRotation(p))}}},t.bulletAttackUpdate=function(t,n){if(t.attackComponent.mAttackTarget&&t.attackComponent.mAttackTarget.active&&!t.attackComponent.isCalcAtk){var e=t.attackComponent.mAttackTarget.getComponent(m);g.debug("攻击系统碰撞检测：怪物扣血"),e.subHP(t.attackComponent.mAttackValue);var c=t.baseCompnent.gameObject.getComponentInChildren(l);t.attackComponent.isCalcAtk=!0;var i=t.baseCompnent.gameObject.getComponentInChildren(a);null!=i&&(i.play("boom"),o(t.baseCompnent.gameObject).delay(.5).call((function(){c.isDead=!0})).start())}},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/axios.js",["./cjs-loader.mjs"],(function(e,t){var r;return{setters:[function(e){r=e.default}],execute:function(){e("default",void 0);var n=e("__cjsMetaURL",t.meta.url);r.define(n,(function(t,r,n,o,i){var s,a;s=this,a=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}return r.m=e,r.c=t,r.p="",r(0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){var n=r(2),o=r(3),i=r(4),s=r(22);function a(e){var t=new i(e),r=o(i.prototype.request,t);return n.extend(r,i.prototype,t),n.extend(r,t),r}var u=a(r(10));u.Axios=i,u.create=function(e){return a(s(u.defaults,e))},u.Cancel=r(23),u.CancelToken=r(24),u.isCancel=r(9),u.all=function(e){return Promise.all(e)},u.spread=r(25),e.exports=u,e.exports.default=u},function(e,t,r){var n=r(3),o=Object.prototype.toString;function i(e){return"[object Array]"===o.call(e)}function s(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function u(e){return"[object Function]"===o.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isUndefined:s,isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:u,isStream:function(e){return a(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function e(){var t={};function r(r,n){"object"==typeof t[n]&&"object"==typeof r?t[n]=e(t[n],r):t[n]=r}for(var n=0,o=arguments.length;n<o;n++)c(arguments[n],r);return t},deepMerge:function e(){var t={};function r(r,n){"object"==typeof t[n]&&"object"==typeof r?t[n]=e(t[n],r):t[n]="object"==typeof r?e({},r):r}for(var n=0,o=arguments.length;n<o;n++)c(arguments[n],r);return t},extend:function(e,t,r){return c(t,(function(t,o){e[o]=r&&"function"==typeof t?n(t,r):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t){e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e,t,r){var n=r(2),o=r(5),i=r(6),s=r(7),a=r(22);function u(e){this.defaults=e,this.interceptors={request:new i,response:new i}}u.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[s,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},u.prototype.getUri=function(e){return e=a(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,r){return this.request(n.merge(r||{},{method:e,url:t}))}})),n.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,r,o){return this.request(n.merge(o||{},{method:e,url:t,data:r}))}})),e.exports=u},function(e,t,r){var n=r(2);function o(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var i;if(r)i=r(t);else if(n.isURLSearchParams(t))i=t.toString();else{var s=[];n.forEach(t,(function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),s.push(o(t)+"="+o(e))})))})),i=s.join("&")}if(i){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},function(e,t,r){var n=r(2);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},function(e,t,r){var n=r(2),o=r(8),i=r(9),s=r(10);function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return a(e),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return a(e),t.data=o(t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(a(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,r){var n=r(2);e.exports=function(e,t,r){return n.forEach(r,(function(r){e=r(e,t)})),e}},function(e,t){e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){var n=r(2),o=r(11),i={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,u={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(a=r(12)),a),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){u.headers[e]=n.merge(i)})),e.exports=u},function(e,t,r){var n=r(2);e.exports=function(e,t){n.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))}},function(e,t,r){var n=r(2),o=r(13),i=r(5),s=r(16),a=r(19),u=r(20),c=r(14);e.exports=function(e){return new Promise((function(t,f){var p=e.data,d=e.headers;n.isFormData(p)&&delete d["Content-Type"];var l=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",m=e.auth.password||"";d.Authorization="Basic "+btoa(h+":"+m)}var x=s(e.baseURL,e.url);if(l.open(e.method.toUpperCase(),i(x,e.params,e.paramsSerializer),!0),l.timeout=e.timeout,l.onreadystatechange=function(){if(l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in l?a(l.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:r,config:e,request:l};o(t,f,n),l=null}},l.onabort=function(){l&&(f(c("Request aborted",e,"ECONNABORTED",l)),l=null)},l.onerror=function(){f(c("Network Error",e,null,l)),l=null},l.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),f(c(t,e,"ECONNABORTED",l)),l=null},n.isStandardBrowserEnv()){var v=r(21),y=(e.withCredentials||u(x))&&e.xsrfCookieName?v.read(e.xsrfCookieName):void 0;y&&(d[e.xsrfHeaderName]=y)}if("setRequestHeader"in l&&n.forEach(d,(function(e,t){void 0===p&&"content-type"===t.toLowerCase()?delete d[t]:l.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),e.responseType)try{l.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&l.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){l&&(l.abort(),f(e),l=null)})),void 0===p&&(p=null),l.send(p)}))}},function(e,t,r){var n=r(14);e.exports=function(e,t,r){var o=r.config.validateStatus;!o||o(r.status)?e(r):t(n("Request failed with status code "+r.status,r.config,null,r.request,r))}},function(e,t,r){var n=r(15);e.exports=function(e,t,r,o,i){var s=new Error(e);return n(s,t,r,o,i)}},function(e,t){e.exports=function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,r){var n=r(17),o=r(18);e.exports=function(e,t){return e&&!n(t)?o(e,t):t}},function(e,t){e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t){e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){var n=r(2),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,i,s={};return e?(n.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=n.trim(e.substr(0,i)).toLowerCase(),r=n.trim(e.substr(i+1)),t){if(s[t]&&o.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([r]):s[t]?s[t]+", "+r:r}})),s):s}},function(e,t,r){var n=r(2);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function o(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=o(window.location.href),function(t){var r=n.isString(t)?o(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},function(e,t,r){var n=r(2);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,o,i,s){var a=[];a.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(o)&&a.push("path="+o),n.isString(i)&&a.push("domain="+i),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){var n=r(2);e.exports=function(e,t){t=t||{};var r={},o=["url","method","params","data"],i=["headers","auth","proxy"],s=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];n.forEach(o,(function(e){void 0!==t[e]&&(r[e]=t[e])})),n.forEach(i,(function(o){n.isObject(t[o])?r[o]=n.deepMerge(e[o],t[o]):void 0!==t[o]?r[o]=t[o]:n.isObject(e[o])?r[o]=n.deepMerge(e[o]):void 0!==e[o]&&(r[o]=e[o])})),n.forEach(s,(function(n){void 0!==t[n]?r[n]=t[n]:void 0!==e[n]&&(r[n]=e[n])}));var a=o.concat(i).concat(s),u=Object.keys(t).filter((function(e){return-1===a.indexOf(e)}));return n.forEach(u,(function(n){void 0!==t[n]?r[n]=t[n]:void 0!==e[n]&&(r[n]=e[n])})),r}},function(e,t){function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,r){var n=r(23);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new n(e),t(r.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},function(e,t){e.exports=function(e){return function(t){return e.apply(null,t)}}}])},"object"==typeof t&&"object"==typeof n?n.exports=a():"function"==typeof define&&define.amd?define([],a):"object"==typeof t?t.axios=a():s.axios=a(),e("default",n.exports),n.exports.axios,n.exports.default,n.exports.isArray,n.exports.isArrayBuffer,n.exports.isBuffer,n.exports.isFormData,n.exports.isArrayBufferView,n.exports.isString,n.exports.isNumber,n.exports.isObject,n.exports.isUndefined,n.exports.isDate,n.exports.isFile,n.exports.isBlob,n.exports.isFunction,n.exports.isStream,n.exports.isURLSearchParams,n.exports.isStandardBrowserEnv,n.exports.forEach,n.exports.merge,n.exports.deepMerge,n.exports.extend,n.exports.trim}),{})}}}));

System.register("chunks:///_virtual/axios.mjs_cjs=&original=.js",["./axios.js","./cjs-loader.mjs"],(function(e,t){var s,a;return{setters:[function(t){s=t.__cjsMetaURL;var a={};a.__cjsMetaURL=t.__cjsMetaURL,a.default=t.default,e(a)},function(e){a=e.default}],execute:function(){s||a.throwInvalidWrapper("./axios.js",t.meta.url),a.require(s)}}}));

System.register("chunks:///_virtual/Barrage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./Group.ts","./DevLog.ts","./BiliCmd.ts","./BiliPlayer.ts","./UIManager.ts","./Constants.ts"],(function(e){var t,n,r,a,i,u,s,l,o,c,d;return{setters:[function(e){t=e.createForOfIteratorHelperLoose,n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){a=e.cclegacy},function(e){i=e.GameManager},function(e){u=e.GroupName},function(e){s=e.DevLog},function(e){l=e.BiliCmd},function(e){o=e.BiliPlayer},function(e){c=e.UIManager},function(e){d=e.GUI}],execute:function(){a._RF.push({},"6d314u7RldAcqof3SFEfGOh","Barrage",void 0),e("Barrage",function(){function e(){this.players=[],this.cmdPool=[],this.bluePlayerIndex=0,this.redPlayerIndex=0}e.getInstance=function(){return this._instance||(this._instance=new e),this._instance};var a=e.prototype;return a.getPlayers=function(){return this.players},a.getBluePlayers=function(){return this.players.filter((function(e){return"BLUE"===e.groupName}))},a.getRedPlayers=function(){return this.players.filter((function(e){return"RED"===e.groupName}))},a.getGroupPlayers=function(e){return this.players.filter((function(t){return t.groupName===e}))},a.getSequenceBluePlayer=function(){var e=this.getGroupPlayers("BLUE");return e&&e.length>0?(this.bluePlayerIndex=(this.bluePlayerIndex+1)%e.length,e[this.bluePlayerIndex]):null},a.getSequenceRedPlayer=function(){var e=this.getGroupPlayers("RED");return e&&e.length>0?(this.redPlayerIndex=(this.redPlayerIndex+1)%e.length,e[this.redPlayerIndex]):null},a.getSequencePlayer=function(e){return"BLUE"===e?this.getSequenceBluePlayer():this.getSequenceRedPlayer()},a.decode=function(){var e=n(r().mark((function e(t,n){var a,l,o,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.debug("开始解析弹幕内容..."),a=t.cmd,l=t.data,e.t0=a,e.next="LIVE_OPEN_PLATFORM_DM"===e.t0?5:"LIVE_OPEN_PLATFORM_LIKE"===e.t0?29:"LIVE_OPEN_PLATFORM_SEND_GIFT"===e.t0?31:33;break;case 5:if(l.room_id,l.open_id,o=l.uname,f=l.uface,"1"!=l.msg){e.next=18;break}return s.debug("是普通弹幕消息加入红方："+JSON.stringify(l)),this.addPlayer(l,u.RED),s.debug("更新红方阵营出兵间隔"),i.instance.addRedPlayer(),e.next=13,c.Instance.IE_ShowUIView(d.UIJoinLeft);case 13:e.sent.showView(o,f),n&&n(t,u.RED),e.next=28;break;case 18:if("2"!=l.msg){e.next=28;break}return s.debug("是普通弹幕消息加入蓝方："+JSON.stringify(l)),this.addPlayer(l,u.BULE),i.instance.addBluePlayer(),s.debug("更新蓝方阵营出兵间隔"),e.next=25,c.Instance.IE_ShowUIView(d.UIJoinRight);case 25:e.sent.showView(o),n&&n(t,u.BULE);case 28:return e.abrupt("break",34);case 29:return s.debug("点赞获取,但目前没什么用..."),e.abrupt("break",34);case 31:return this.addCmd(t),e.abrupt("break",34);case 33:return e.abrupt("break",34);case 34:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),a.addPlayer=function(e,t,n){s.debug("add player:"+JSON.stringify(e));e.room_id;var r=e.open_id,a=e.uname,i=e.uface;if(this.players.find((function(e){return e.userId===r})))console.log("Player with ID "+r+" already exists.");else{var u=new o(a,r,i,t);this.players.push(u),s.debug("当前玩家数量:"+this.players.length+" 当前加入玩家:"+JSON.stringify(u)),n&&n(e)}},a.addCmd=function(e){var t,n=e.cmd,r=e.data;if("LIVE_OPEN_PLATFORM_DM"==n){var a=r.content,i=r.uname,u=r.open_id,o=r.uface;(t=new l(n,i,u,o)).setContent(a)}else if("LIVE_OPEN_PLATFORM_LIKE"==n){var c=r.uname,d=r.open_id,f=r.uface;t=new l(n,c,d,f)}else{if("LIVE_OPEN_PLATFORM_SEND_GIFT"!=n)return;var h=r.gift_id,g=r.gift_name,y=r.gift_num,P=r.price,p=r.uname,m=r.open_id,_=r.uface;(t=new l(n,p,m,_)).setGiftId(h),t.setGiftName(g),t.setGiftNum(y),t.setPrice(P),s.debug("接收到礼物消息:"+g+" "+h)}s.debug("找礼物发情者....");var I=this.searchUserByCmd(t);I&&(t.setGroupName(I.groupName),this.cmdPool.push(t))},a.searchUserByCmd=function(e){if(!e)return s.debug("指令不存在...."),null;for(var n,r=t(this.players);!(n=r()).done;){var a=n.value;if(s.debug("当前命令发起的用户:"+e.userId+" "+e.nickName+" 用户:"+a.userId+" "+a.nickName),a.userId===e.userId||a.nickName===e.nickName)return a}return null},a.shiftCmd=function(){return this.cmdPool.length>0&&this.cmdPool.shift()||null},a.clearPlayers=function(){this.players.length=0},a.clearCmdPool=function(){this.cmdPool.length=0},a.clearAll=function(){this.clearPlayers(),this.clearCmdPool()},e}())._instance=void 0,a._RF.pop()}}}));

System.register("chunks:///_virtual/BaseArea.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIComponent.ts","./DataModelManager.ts","./GameModel.ts","./EffectBuilder.ts","./EventManager.ts","./Constants.ts","./DataManager.ts","./IntensifyDataManager.ts","./Group.ts","./DevLog.ts","./Monster.ts"],(function(t){var e,n,i,a,s,o,r,p,u,h,g,m,c,l,H,f,d,M,v,B,x,I;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,a=t.Collider2D,s=t.Contact2DType,o=t.ProgressBar,r=t.Label,p=t.tween,u=t.Vec3},function(t){h=t.UIComponent},function(t){g=t.DataModelManager,m=t.ModelName},function(t){c=t.GameState},function(t){l=t.EffectBuilder},function(t){H=t.EventManager},function(t){f=t.UIEventName,d=t.INTENSIFY_BAOJI},function(t){M=t.DataManager},function(t){v=t.mIntensifyManager},function(t){B=t.GroupName},function(t){x=t.DevLog},function(t){I=t.Monster}],execute:function(){var A;n._RF.push({},"82e773DhM9BAJqeg8IB395Y","BaseArea",void 0);var N=i.ccclass;i.property,t("BaseArea",N("BaseArea")(A=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))||this).mHp=100,e.mMaxHp=100,e.isDead=!1,e.mHpBar=null,e.mHpValue=null,e.groupName=B.BULE,e}e(n,t);var i=n.prototype;return i.onLoad=function(){this.AddEventListener(f.resetAreaHp,this.initAreaHp,this);var t=this.getComponent(a);t&&t.on(s.BEGIN_CONTACT,this.onCollisionEnter,this)},i.start=function(){this.initAreaHp()},i.initAreaHp=function(){this.node.active=!0,this.mHp=this.mMaxHp=100;var t=this.ViewNode("ProgressBar");t?this.mHpBar=t.getComponent(o):x.debug("找不到ProgressBar组件"),this.mHpValue=this.ViewNode("Hp").getComponent(r),this.mHpValue||x.debug("找不到Label组件"),this.mHpBar&&(this.mHpBar.progress=this.mHp/this.mMaxHp,this.mHpValue.string=String(this.mHp)+"/"+String(this.mMaxHp)),x.debug("当前基地的name:"+this.node.name+",基地初始化完毕")},i.onCollisionEnter=function(t,e){var i=e.node.parent.getComponent(I),a=t.node.getComponent(n);if(i&&i.getGroup()!=a.getGroupName()){var s=i.getHp(),o=a.getHp(),r=Math.min(s,o);x.debug("基地碰撞检测：怪物扣血"),i.subHP(r),a.subHp(r),x.debug("基地血量:"+a.getHp()),this.shakeAction()}},i.shake=function(t,e,n,i){for(var a=[],s=0;s<i;s++)a.push(p(t).to(n,{position:new u(-e,0,0)})),a.push(p(t).to(n,{position:new u(e,0,0)}));return a.push(p(t).to(n,{position:new u(0,0,0)})),a},i.shakeAction=function(){var t;(t=p(this)).sequence.apply(t,this.shake(this,10,.05,5)).start()},i.setGroupName=function(t){this.groupName=t},i.setMaxHP=function(t){this.mHp=t,this.mMaxHp=t},i.getHp=function(){return this.mHp},i.getMaxHp=function(){return this.mMaxHp},i.getGroupName=function(){return this.groupName},i.restoreHp=function(t){if(void 0===t&&(t=1),g.instance.getModel(m.Game).state==c.Playering){if(1e3*Math.random()<=500){var e=M.getInstance().getInternsifLevel(d),n=v.getValue(d,e);t=2*t+t*(n/100),t+=t*(n/100),t=parseFloat(t.toFixed(2))}this.mHp+=t}},i.addHp=function(t){if(void 0===t&&(t=20),g.instance.getModel(m.Game).state==c.Playering){if(1e3*Math.random()<=500){var e=M.getInstance().getInternsifLevel(d),n=v.getValue(d,e);t=2*t+t*(n/100),t+=t*(n/100),t=parseFloat(t.toFixed(2))}this.mHp+=t,this.mMaxHp+=t,this.mHpBar&&(x.debug("增加基地血量,进度条更新....."),this.mHpBar.progress=this.mHp/this.mMaxHp,this.mHpValue.string=String(this.mHp)+"/"+String(this.mMaxHp))}},i.subHp=function(t){if(g.instance.getModel(m.Game).state==c.Playering)if(null!=t){var e=!1;if(1e3*Math.random()<=500){var n=M.getInstance().getInternsifLevel(d),i=v.getValue(d,n);t=2*t+t*(i/100),t+=t*(i/100),t=parseFloat(t.toFixed(2)),e=!0}if(x.debug("扣除生命值:"+t+",倍数:"+(e?2:1)),this.mHp-=t,this.mHp=parseFloat(this.mHp.toFixed()),this.mHp<=0){this.isDead=!0,this.node.active=!1;var a=this.node.getPosition();l.instance.createDeadEffect(a),H.getInstance().emit(f.showSucceed,{})}this.mHpBar&&(this.mHpBar.progress=this.mHp/this.mMaxHp,this.mHpValue.string=String(this.mHp)+"/"+String(this.mMaxHp))}else console.log("生命值未定义")},n}(h))||A);n._RF.pop()}}}));

System.register("chunks:///_virtual/BaseComponent.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"00012ruF9tJcKPmgGXnTezH","BaseComponent",void 0);e("BaseComponent",(function(){this.gameObject=null,this.id=0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/BaseEntity.ts",["cc","./BaseComponent.ts"],(function(t){var n,e;return{setters:[function(t){n=t.cclegacy},function(t){e=t.BaseComponent}],execute:function(){n._RF.push({},"afafdAsMExM9ZQiZWNcQCmW","BaseEntity",void 0);t("BaseEntity",(function(){this.baseCompnent=new e}));n._RF.pop()}}}));

System.register("chunks:///_virtual/BiliBiliManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./DevLog.ts","./index.ts","./api.ts","./Constants.ts"],(function(e){var t,n,a,o,i,r,c,s,u,g,l,d;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,a=e.Component},function(e){o=e.EventManager},function(e){i=e.DevLog},function(e){r=e.createSocket,c=e.destroySocket},function(e){s=e.getAuth,u=e.gameStart,g=e.heartBeat,l=e.gameEnd},function(e){d=e.BarrageEventName}],execute:function(){n._RF.push({},"e6627KfLpNJ7py2bgJZP6uR","BiliBiliManager",void 0),e("BiliBiliManager",function(e){function n(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).authBody="",t.wssLinks=void 0,t.gameId="",t.appId="1726479622572",t.heartBeatTimerId=void 0,t}t(n,e),n.getInstance=function(){return this._instance||(this._instance=new n),this._instance};var a=n.prototype;return a.load=function(){},a.gameStart=function(){var e=this;s({appKey:"HDQwBkRtef5ZN7kycekRpUgz",appSecret:"zt6KnIwxj9IM4vCKrvoRysVaqAEHlW"}).then((function(e){i.info("getAuth result:"+JSON.stringify(e));return u({code:"DVJNGYBJRHFK3",app_id:1726479622572})})).then((function(t){if(i.info("gameStart:"+JSON.stringify(t)),0==t.code){var n=t.data,a=n.game_info,c=n.websocket_info,s=c.auth_body,u=c.wss_link;e.authBody=s,e.wssLinks=u,e.gameId=a.game_id,e.heartBeatTimerId=setInterval((function(){g(a.game_id)}),2e4),r(e.authBody,e.wssLinks),o.getInstance().emit(d.GameStart,n)}else i.error("-----游戏开始失败-----"),i.error("原因："+t),7002==t.code&&e.gameEnd()})).catch((function(e){i.error("接口请求异常："+e)}))},a.gameEnd=function(){var e=this;s({appKey:"HDQwBkRtef5ZN7kycekRpUgz",appSecret:"zt6KnIwxj9IM4vCKrvoRysVaqAEHlW"}).then((function(t){var n={game_id:e.gameId,app_id:Number(e.appId)};return l(n)})).then((function(t){0==t.code?(console.log("-----游戏关闭成功-----"),console.log("返回：",t),e.authBody="",e.wssLinks=[],clearInterval(e.heartBeatTimerId),c(),console.log("-----心跳关闭成功-----")):(console.log("-----游戏关闭失败-----"),console.log("原因：",t)),o.getInstance().emit(d.GameEnd,t)})).catch((function(e){console.log("-----游戏关闭失败-----"),console.log(e),o.getInstance().emit(d.GameEnd,e)}))},n}(a))._instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/BiliCmd.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"cd06dZG7gxPEblphDkadEHt","BiliCmd",void 0);t("BiliCmd",function(){function t(t,i,n,e){this.groupName=void 0,this.userId=void 0,this.nickName=void 0,this.avatar=void 0,this.cmd=void 0,this.content=void 0,this.gift_id=void 0,this.gift_name=void 0,this.gift_num=void 0,this.price=void 0,this.nickName=i,this.userId=n,this.avatar=e,this.cmd=t}var i=t.prototype;return i.getNickName=function(){return this.nickName},i.setGroupName=function(t){this.groupName=t},i.getGroupName=function(){return this.groupName},i.setContent=function(t){this.content=t},i.getContent=function(){return this.content},i.setGiftId=function(t){this.gift_id=t},i.getGiftId=function(){return this.gift_id},i.setGiftName=function(t){this.gift_name=t},i.getGiftName=function(){return this.gift_name},i.setGiftNum=function(t){this.gift_num=t},i.getGiftNum=function(){return this.gift_num},i.setPrice=function(t){this.price=t},i.getPrice=function(){return this.price},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/BiliPlayer.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"84a43+gmflKdaLk7CuokvyT","BiliPlayer",void 0);t("BiliPlayer",function(){function t(t,i,e,r,a){this.groupName=void 0,this.userId=void 0,this.nickName=void 0,this.avatar=void 0,this.score=void 0,this.nickName=t,this.userId=i,this.avatar=e,this.groupName=r}var i=t.prototype;return i.addScore=function(t){void 0===t&&(t=1),this.score+=t},i.getAvatar=function(){return this.avatar},i.getName=function(){return this.nickName},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/Block.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIComponent.ts"],(function(t){var n,o,e,c,r;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,c=t.UITransform},function(t){r=t.UIComponent}],execute:function(){var i;o._RF.push({},"15c752hdKdMUIxVlkvM2IIy","Block",void 0);var s=e.ccclass;e.property,t("Block",s("Block")(i=function(t){function o(){return t.apply(this,arguments)||this}return n(o,t),o.prototype.getSize=function(){return this.node.getComponent(c).contentSize},o}(r))||i);o._RF.pop()}}}));

System.register("chunks:///_virtual/BlockEntity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CollisionComponent.ts","./BaseEntity.ts"],(function(n){var t,o,i,e;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy},function(n){i=n.CollisionComponent},function(n){e=n.BaseEntity}],execute:function(){o._RF.push({},"70e12ZgFGVGm4+h7hQC4i5F","BlockEntity",void 0);n("BlockEntity",function(n){function o(){for(var t,o=arguments.length,e=new Array(o),c=0;c<o;c++)e[c]=arguments[c];return(t=n.call.apply(n,[this].concat(e))||this).collisionComponent=new i,t}return t(o,n),o}(e));o._RF.pop()}}}));

System.register("chunks:///_virtual/BlockManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CrownManager.ts","./GameManager.ts","./MonsterUtils.ts"],(function(t){var e,n,a,i,o,r,s,l,c,m,u,p,h,d,g,f,B,v,_,k;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized,o=t.createClass},function(t){r=t.cclegacy,s=t._decorator,l=t.SpriteAtlas,c=t.Sprite,m=t.PhysicsSystem2D,u=t.EPhysics2DDrawFlags,p=t.v2,h=t.Node,d=t.Graphics,g=t.tween,f=t.v3,B=t.Component},function(t){v=t.CrownManager},function(t){_=t.GameManager},function(t){k=t.MonsterUtils}],execute:function(){var M,y,b,P,w,C,I,D;r._RF.push({},"46864sr4ZBEGZwdgWSfAhmr","BlockManager",void 0);var x,A=s.ccclass,F=s.property;M=A("BlockManager"),y=F([l]),b=F([c]),x=M(((D=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,a(e,"m_imageAtlas",C,i(e)),a(e,"m_imageBG",I,i(e)),e.startPos=[],e.m_mapBlockItem=[],e}n(e,t);var r=e.prototype;return r.onLoad=function(){e._instance=this,m.instance.enable=!0,m.instance.debugDrawFlags=u.None,this.startPos.push(p(0,0)),this.startPos.push(p(640,0));var t=_.instance.getCurBlockData();this.buildBlockMap(0,t)},r.start=function(){},r.buildBlockNextMap=function(t){null!=t&&this.buildBlockMap(1,t)},r.buildBlockMap=function(t,e){null==this.m_mapBlockItem[t]&&(this.m_mapBlockItem[t]=[]);for(var n=0;n<6;n++){var a=106*n;null==this.m_mapBlockItem[t][n]&&(this.m_mapBlockItem[t][n]=[]);for(var i=0;i<6;i++){var o,r=106*i,s=void 0;null==this.m_mapBlockItem[t][n][i]?(s=new h,this.node.addChild(s)):s=this.m_mapBlockItem[t][n][i].node,o=this.node.getComponent(d)||this.node.addComponent(d);var l=r+53+this.startPos[t].x,m=-a-53+this.startPos[t].y;s.setPosition(l,m),k.drawPoint(o,l,m,50);var u=s.getComponent(c)||s.addComponent(c);u._selfIndex=p(i,n),this.m_mapBlockItem[t][n][i]=u;var g=""+e[n][i],f=this.m_imageAtlas[0].getSpriteFrame(g);u.spriteFrame=f}}},r.moveToNextMap=function(t){var e=this;g(this.node).by(.5,{position:f(-640,0)}).call((function(){e.node.setPosition(f(-320,310)),e.buildBlockMap(0,t)})).start(),v.instance.moveToNextMap()},o(e,null,[{key:"instance",get:function(){return this._instance}}]),e}(B))._instance=null,C=e((w=D).prototype,"m_imageAtlas",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=e(w.prototype,"m_imageBG",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=w))||P,t({BlockManager:x,default:x});r._RF.pop()}}}));

System.register("chunks:///_virtual/Boot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DebugManager.ts","./SoundManager.ts","./SceneManager.ts","./ResManager.ts","./EventManager.ts","./UIManager.ts","./TimerManager.ts","./DataModelManager.ts","./GameManager.ts","./ECSWorld.ts","./DevLog.ts","./BiliBiliManager.ts"],(function(n){var t,e,o,a,r,i,s,c,u,d,p,g,l,h,f,m,M,v,C;return{setters:[function(n){t=n.inheritsLoose,e=n.asyncToGenerator,o=n.regeneratorRuntime},function(n){a=n.cclegacy,r=n._decorator,i=n.director,s=n.Component},function(n){c=n.DebugManager},function(n){u=n.SoundManager},function(n){d=n.SceneManager},function(n){p=n.ResManager},function(n){g=n.EventManager},function(n){l=n.UIManager},function(n){h=n.TimerManager},function(n){f=n.DataModelManager},function(n){m=n.GameManager},function(n){M=n.ECSWorld},function(n){v=n.DevLog},function(n){C=n.BiliBiliManager}],execute:function(){var B,y;a._RF.push({},"1d413RLhkhHE4BteGKYBStv","Boot",void 0);var S=r.ccclass;r.property,n("Boot",S("Boot")(((y=function(n){function a(){for(var t,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return(t=n.call.apply(n,[this].concat(o))||this).isDebug=!1,t.supportWs=!0,t}t(a,n);var r=a.prototype;return r.onLoad=function(){a._instance||(a._instance=this,i.addPersistRootNode(this.node),this.startUp())},r.onDestroy=function(){a._instance&&(v.debug("Boot bye"),a._instance=null)},r.startUp=function(){var n=e(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.initFramework();case 2:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),r.initFramework=function(){var n=e(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v.debug("初始化框架中...."),this.isDebug&&(this.node.addComponent(c).load(),v.setDebug(!0)),this.node.addComponent(p).load(),this.supportWs&&this.node.addComponent(C).load(),this.node.addComponent(g).init(),this.node.addComponent(l).load(),this.node.addComponent(h).load(),this.node.addComponent(f).load(),n.next=10,this.node.addComponent(m).load();case 10:return this.node.addComponent(M).init(),this.node.addComponent(d).load(),this.node.addComponent(u).load("Musics","Sounds"),d.getInstance().enterScene("main"),n.next=16,l.Instance.IE_ShowUIView("UIGame");case 16:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),a}(s))._instance=null,B=y))||B);a._RF.pop()}}}));

System.register("chunks:///_virtual/BossViewManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DateDefine.ts","./DataManager.ts"],(function(e){var t,n,i,a,r,s,o,l,c,u,m,p,b,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.createClass},function(e){s=e.cclegacy,o=e._decorator,l=e.Label,c=e.Sprite,u=e.SpriteAtlas,m=e.Animation,p=e.Component},function(e){b=e.mGlobalData},function(e){f=e.DataManager}],execute:function(){var _,g,h,y,v,d,B,w,D,M,k,S;s._RF.push({},"77e11b5/FZMbIBXYt8M7WOs","BossViewManager",void 0);var L=o.ccclass,z=o.property;e("BossViewManager",(_=L("BossViewManager"),g=z(l),h=z(l),y=z(c),v=z(u),_(((S=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,i(t,"m_labLevel",w,a(t)),i(t,"m_bossName",D,a(t)),i(t,"m_bossSprite",M,a(t)),i(t,"m_bossAtlas",k,a(t)),t.m_anim=null,t.m_callBack=null,t}n(t,e);var s=t.prototype;return s.onLoad=function(){t._instance?this.destroy():(t._instance=this,this.m_anim=this.node.getComponent(m))},s.start=function(){},s.play=function(e){var t=f.getInstance().getCheckPoint();this.m_labLevel.string=t.big+1+"-"+(t.small+1);for(var n=0,i=b.getCurMonsterData(),a=0;a<i.length;a++)if(2===i[a].type){n=i[a].id;break}var r=b.getBossNameByID(n);this.m_bossName.string=r;var s=this.m_bossAtlas.getSpriteFrame(n.toString());this.m_bossSprite.spriteFrame=s,this.node.active=!0,this.m_anim.play("bossView"),this.m_callBack=e},s.end=function(){this.node.active=!1,this.m_callBack&&this.m_callBack()},s.update=function(e){},r(t,null,[{key:"instance",get:function(){return this._instance}}]),t}(p))._instance=void 0,w=t((B=S).prototype,"m_labLevel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(B.prototype,"m_bossName",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(B.prototype,"m_bossSprite",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(B.prototype,"m_bossAtlas",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=B))||d));s._RF.pop()}}}));

System.register("chunks:///_virtual/BottomUIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./CannonManager.ts","./DataManager.ts","./Constants.ts","./IntensifyDataManager.ts","./UIManager.ts"],(function(t){var e,n,a,i,o,r,s,u,m,c,h,l,_,f,M,C,p,g,k,d,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized,o=t.createClass},function(t){r=t.cclegacy,s=t._decorator,u=t.Node,m=t.Label,c=t.tween,h=t.Vec3,l=t.UITransform,_=t.v3,f=t.Component},function(t){M=t.GameManager},function(t){C=t.CannonManager},function(t){p=t.DataManager},function(t){g=t.INTENSIFY_KUORONG,k=t.GUI},function(t){d=t.mIntensifyManager},function(t){w=t.UIManager}],execute:function(){var I,y,b,v,N,A,U,S,x,z,D,G;r._RF.push({},"c48193FAKZHc68xmRlWQpYq","BottomUIManager",void 0);var L=s.ccclass,B=s.property;t("BottomUIManager",(I=L("BottomUIManager"),y=B(u),b=B(m),v=B(u),N=B(u),I(((G=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,a(e,"m_hammer",S,i(e)),a(e,"m_makeNumberLabel",x,i(e)),a(e,"m_water",z,i(e)),a(e,"m_destroyNode",D,i(e)),e.m_canMakeCount=10,e.m_maxMakeCount=10,e.m_hammerAction=!1,e.m_waterAction=!1,e}n(e,t);var r=e.prototype;return r.onLoad=function(){e._instance?this.destroy():(e._instance=this,this.updateGameUI(),this.setShowDestroy(!1))},r.start=function(){},r.onClickMake=function(){var t=this;if(M.instance.isGameStart()){var e=C.instance.getCanMakeIndex();null!=e&&0!=this.m_canMakeCount&&(this.m_hammerAction||(this.m_hammerAction=!0,c(this.m_hammer).to(.2,{eulerAngles:new h(-90,0,0)}).to(.2,{eulerAngles:new h(0,0,0)}).call((function(){t.m_hammerAction=!1})).start()),this.subMakeNumber(),C.instance.cannonBuild(e))}},r.addMakeNumber=function(){this.m_canMakeCount++,this.m_canMakeCount>this.m_maxMakeCount&&(this.m_canMakeCount=this.m_maxMakeCount),this.updateMakeCount()},r.subMakeNumber=function(){this.m_canMakeCount--,this.m_canMakeCount<0&&(this.m_canMakeCount=0),this.m_waterAction||this.m_water.getComponent(l).setContentSize(0,0),this.updateMakeCount()},r.updateMakeCount=function(){this.m_makeNumberLabel.string=this.m_canMakeCount+"/"+this.m_maxMakeCount},r.update=function(t){if(this.m_canMakeCount<this.m_maxMakeCount){var e=this.m_water.getComponent(l).height+50*t;this.m_water.getComponent(l).setContentSize(133,e),this.m_waterAction=!0,e>=133&&(this.addMakeNumber(),this.m_canMakeCount==this.m_maxMakeCount?(this.m_water.getComponent(l).setContentSize(133,133),this.m_waterAction=!1):this.m_water.getComponent(l).setContentSize(133,0))}},r.onClickAutoMake=function(){M.instance.isGameStart()&&C.instance.autoMerge()},r.updateGameUI=function(){this.m_waterAction||this.m_water.getComponent(l).setContentSize(133,0);var t=p.getInstance().getInternsifLevel(g);this.m_maxMakeCount=d.getValue(g,t),this.updateMakeCount()},r.showTaskView=function(){w.Instance.IE_ShowUIView(k.UITask)},r.showIntensifyView=function(){w.Instance.IE_ShowUIView(k.UIIntensify)},r.setShowDestroy=function(t){this.m_destroyNode.active=t},r.isInDestroy=function(t){var e=this.m_destroyNode.getComponent(l).convertToNodeSpaceAR(_(t.x,t.y));return e.x<50&&e.x>-50&&e.y<50&&e.y>-50},o(e,null,[{key:"instance",get:function(){return this._instance}}]),e}(f))._instance=void 0,S=e((U=G).prototype,"m_hammer",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(U.prototype,"m_makeNumberLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(U.prototype,"m_water",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(U.prototype,"m_destroyNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=U))||A));r._RF.pop()}}}));

System.register("chunks:///_virtual/Bullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIComponent.ts","./Group.ts"],(function(t){var e,n,o,r,u,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.UITransform},function(t){u=t.UIComponent},function(t){c=t.GroupName}],execute:function(){var i;n._RF.push({},"f1d02lCEQRHuZen+Q+iXqiC","Bullet",void 0);var a=o.ccclass;o.property,t("Bullet",a("Bullet")(i=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).groupName=c.BULE,e}e(n,t);var o=n.prototype;return o.setGroupName=function(t){this.groupName=t},o.getGroupName=function(){return this.groupName},o.getSize=function(){return this.node.getParent().getComponent(r).contentSize},n}(u))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/BulletBase.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.Component}],execute:function(){var a,l;n._RF.push({},"2ff38VhMQ1MqYOKHaPy9YJt","BulletBase",void 0);var s,u=o.ccclass;o.property,a=u("BulletBase"),s=a(l=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).m_ATK=0,e._attackTarget=null,e.targetPos=null,e.isDead=!1,e.isCollision=!1,e}e(n,t);var o=n.prototype;return o.ctor=function(){this.m_ATK=0},o.start=function(){},o.setATK=function(t){this.m_ATK=t},o.update=function(t){},n}(r))||l,t({BulletBase:s,default:s});n._RF.pop()}}}));

System.register("chunks:///_virtual/BulletEntity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AttackComponent.ts","./CollisionComponent.ts","./TransformComponent.ts","./BaseEntity.ts"],(function(n){var t,o,e,i,s,c;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy},function(n){e=n.AttackComponent},function(n){i=n.CollisionComponent},function(n){s=n.TransformComponent},function(n){c=n.BaseEntity}],execute:function(){o._RF.push({},"e00ea1T205OUK7xoEdOagZJ","BulletEntity",void 0);n("BulletEntity",function(n){function o(){for(var t,o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return(t=n.call.apply(n,[this].concat(c))||this).transformComponent=new s,t.attackComponent=new e,t.collisionComponent=new i,t}return t(o,n),o}(c));o._RF.pop()}}}));

System.register("chunks:///_virtual/BulletLevel0.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BulletBase.ts","./MathUtils.ts"],(function(t){var e,n,o,l,i,a,r,s,u,c,p,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,l=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,r=t.Node,s=t.UITransform,u=t.Vec3,c=t.tween},function(t){p=t.BulletBase},function(t){h=t.MathUtils}],execute:function(){var f,g,d,v,m;i._RF.push({},"e9940FZlLRIw5jOpYm0wU+j","BulletLevel0",void 0);var y=a.ccclass,B=a.property;t("BulletLevel0",(f=y("BulletLevel0"),g=B(r),f((m=e((v=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,o(e,"m_bullet",m,l(e)),e}n(e,t);var i=e.prototype;return i.onLoad=function(){},i.start=function(){},i.update=function(t){this.updateBullet()},i.updateBullet=function(){var t=this.node;if(!this.isDead&&null!=this._attackTarget){var e=this._attackTarget;if(this.targetPos=this._attackTarget.position,null!=t.getComponent(s)){var n=t.getComponent(s).convertToWorldSpaceAR(new u(0,0,0)),o=e.getComponent(s).convertToWorldSpaceAR(new u(0,0,0)),l=e.getComponent(s).height;o.y+=l/2;var i=h.getAngle(n,o);this.node.angle=i;var a=h.getDistance(n,o);this.showEffect(Math.abs(a))}}},i.showEffect=function(t){var e=this;t<90&&(t=90),this.m_bullet.getComponent(s).width=t,c(this.node).delay(.4).call((function(){e.m_bullet.getParent().destroy()})).start()},e}(p)).prototype,"m_bullet",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=v))||d));i._RF.pop()}}}));

System.register("chunks:///_virtual/BulletLevel1.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BulletBase.ts"],(function(t){var i,e,n,a,o,s,l,r,c,h;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,l=t.Animation,r=t.UITransform,c=t.tween},function(t){h=t.BulletBase}],execute:function(){var m,u,d,f,v;o._RF.push({},"6d9a7+LR4BA9YhZ+/IjMI/o","BulletLevel1",void 0);var _=s.ccclass,p=s.property;t("BulletLevel1",(m=_("BulletLevel1"),u=p([l]),m((v=i((f=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return i=t.call.apply(t,[this].concat(o))||this,n(i,"m_anim",v,a(i)),i.m_widths=[],i.m_heights=[],i}e(i,t);var o=i.prototype;return o.onLoad=function(){this.m_widths=[],this.m_heights=[];for(var t=0;t<this.m_anim.length;t++)this.m_widths[t]=this.m_anim[t].node.getComponent(r).width,this.m_heights[t]=this.m_anim[t].node.getComponent(r).height},o.start=function(){},o.update=function(t){this.updateBullet()},o.deactiveAnim=function(){for(var t=0;t<this.m_anim.length;t++)this.m_anim[t].node.active=!1},o.activeAnim=function(t){if(!(t>=this.m_anim.length))for(var i=0;i<this.m_anim.length;i++)this.m_anim[i].node.active=t==i},o.updateBullet=function(){var t=this,i=this.node;this.isDead||null==this._attackTarget?c(this.node).delay(.1).call((function(){t.deactiveAnim()})).start():(this.node.angle=i.angle,c(this.node).delay(.1).call((function(){t.activeAnim(0)})).delay(.5).call((function(){t.activeAnim(1)})).delay(.1).call((function(){t.activeAnim(3),t.isDead=!0})).start())},o.showEffect=function(t,i){for(var e=0;e<this.m_anim.length;e++)this.m_anim[e].node.active=!1;this.m_anim[t].node.active=!0;var n=i/this.m_widths[t];this.m_anim[t].node.setScale(n,n,1)},i}(h)).prototype,"m_anim",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=f))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/BulletLevel2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BulletBase.ts","./MathUtils.ts","./MonsterItem.ts"],(function(t){var e,n,o,i,s,a,l,r,c,u,h,f;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.Collider2D,s=t.Contact2DType,a=t.Animation,l=t.tween,r=t.v3,c=t.UITransform},function(t){u=t.BulletBase},function(t){h=t.MathUtils},function(t){f=t.MonsterItem}],execute:function(){var p;n._RF.push({},"60f4bRuGgdDC6JnE29k/VZA","BulletLevel2",void 0);var d=o.ccclass;o.property,t("BulletLevel2",d("BulletLevel2")(p=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).m_showHpEffect=null,e}e(n,t);var o=n.prototype;return o.onLoad=function(){var t=this.getComponent(i);t&&t.on(s.BEGIN_CONTACT,this.onCollisionEnter,this)},o.onCollisionEnter=function(t,e){var n=this;if(!this.isDead){if(null==this._attackTarget)return;if(t.node._monsterID!=this._attackTarget._monsterID)return;if(null==this.m_showHpEffect){var o=t.node.parent.getComponent(f);null!=o&&o.subHP(this.node.m_ATK),this.m_showHpEffect=!0}var i=this.node.getComponent(a);null!=i&&(this.isDead=!0,i.play("boom"),l(this.node).delay(.01).call((function(){n.node.setScale(r(1,1))})).delay(.5).call((function(){n.node.removeFromParent(),n.node.destroy()})).start())}},o.update=function(t){var e=this.node;if(!this.isDead&&null!=this._attackTarget){var n=500*t,o=this._attackTarget,i=o.getComponent(c).height,s=o.getPosition();s.y+=i/2;var a=h.getAngle(e.getPosition(),s),l=Math.cos(a*(Math.PI/180))*n,r=Math.sin(a*(Math.PI/180))*n;this.node.angle=a,e.setPosition(e.position.x+l,e.position.y+r)}},n}(u))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/BulletLevel3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BulletBase.ts","./MonsterItem.ts","./DevLog.ts"],(function(e){var t,n,o,i,r,l,s,a,c,u,f,p,h,m,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,s=e.Sprite,a=e.Node,c=e.Collider2D,u=e.Contact2DType,f=e.Animation,p=e.tween},function(e){h=e.BulletBase},function(e){m=e.MonsterItem},function(e){v=e.DevLog}],execute:function(){var d,_,g,y,D,C,b;r._RF.push({},"97264GWH/RDrrCJH0cXc7cs","BulletLevel3",void 0);var B=l.ccclass,L=l.property;e("BulletLevel3",(d=B("BulletLevel3"),_=L(s),g=L(a),d((C=t((D=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,o(t,"m_cannon",C,i(t)),o(t,"m_effect",b,i(t)),t.m_showHpEffect=null,t}n(t,e);var r=t.prototype;return r.onLoad=function(){this.isDead=!1;var e=this.getComponent(c);e&&(v.info("level3 碰撞检测"),e.on(u.BEGIN_CONTACT,this.onCollisionEnter,this))},r.onCollisionEnter=function(e,t){var n=this;if(v.info("开始检查子弹碰撞level3"),this.isDead)v.debug("level3 子弹已经死亡。。。");else{if(t.node._monsterID!=this._attackTarget._monsterID)return void v.info("攻击目标不一致,忽略。。。");if(null==this.m_showHpEffect){var o=t.node.parent.getComponent(m);null!=o&&o.subHP(this.node.m_ATK),this.m_showHpEffect=!0}var i=this.m_cannon.node.getComponent(f);null!=i&&(this.isDead=!0,i.play("boom"),p(this.node).call((function(){n.m_effect.active=!0})).delay(.5).call((function(){n.m_effect.active=!0,n.node.removeFromParent(),n.node.destroy()})).start())}},r.start=function(){},r.update=function(e){var t=this.node;if(!this.isDead&&!this.isCollision){var n=800*e,o=Math.cos((t.angle+90)*(Math.PI/180))*n,i=Math.sin((t.angle+90)*(Math.PI/180))*n;t.setPosition(t.position.x+o,t.position.y+i)}},r.setFrame=function(e){this.m_cannon.spriteFrame=e},t}(h)).prototype,"m_cannon",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(D.prototype,"m_effect",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=D))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/BulletLevel4.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BulletBase.ts","./MathUtils.ts","./MonsterItem.ts","./DevLog.ts"],(function(t){var e,n,o,i,s,l,a,r,c,u,h,f,p;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.Collider2D,s=t.Contact2DType,l=t.Animation,a=t.tween,r=t.v3,c=t.UITransform},function(t){u=t.BulletBase},function(t){h=t.MathUtils},function(t){f=t.MonsterItem},function(t){p=t.DevLog}],execute:function(){var v;n._RF.push({},"c0314rg/ltD0JozmC0EOPEc","BulletLevel4",void 0);var g=o.ccclass;o.property,t("BulletLevel4",g("BulletLevel4")(v=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).m_showHpEffect=null,e}e(n,t);var o=n.prototype;return o.start=function(){var t=this.getComponent(i);t&&t.on(s.BEGIN_CONTACT,this.onCollisionEnter,this)},o.onCollisionEnter=function(t,e){var n=this;if(p.info("检测到碰撞 level4"),!this.isDead){if(null==this.m_showHpEffect){var o=t.node.parent.getComponent(f);null!=o&&o.subHP(this.node.m_ATK),this.m_showHpEffect=!0}var i=this.node.getComponent(l);null!=i&&(this.isDead=!0,i.play("boom"),a(this.node).delay(.01).call((function(){n.node.setScale(r(1,1))})).delay(.5).call((function(){n.node.removeFromParent(),n.node.destroy()})).start())}},o.update=function(t){var e=this.node;if(!this.isDead){var n=500*t;if(this._attackTarget){var o=this._attackTarget,i=o.getComponent(c).height,s=o.getPosition();s.y+=i/2,e.angle=h.getAngle(e.getPosition(),s)}var l=Math.cos(e.angle*(Math.PI/180))*n,a=Math.sin(e.angle*(Math.PI/180))*n;e.setPosition(e.position.x+l,e.position.y+a)}},n}(u))||v);n._RF.pop()}}}));

System.register("chunks:///_virtual/BulletLevel5.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BulletBase.ts","./MonsterItem.ts","./DevLog.ts"],(function(t){var e,n,o,i,s,l,a,r,c,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.Collider2D,s=t.Contact2DType,l=t.Animation,a=t.tween},function(t){r=t.BulletBase},function(t){c=t.MonsterItem},function(t){u=t.DevLog}],execute:function(){var h;n._RF.push({},"8ad4ddZVqlFrIocKW2buiEo","BulletLevel5",void 0);var f=o.ccclass;o.property,t("BulletLevel5",f("BulletLevel5")(h=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).m_showHpEffect=!1,e}e(n,t);var o=n.prototype;return o.start=function(){var t=this.getComponent(i);t&&t.on(s.BEGIN_CONTACT,this.onCollisionEnter,this)},o.onCollisionEnter=function(t,e){var n=this;if(!this.isDead){if(null==this._attackTarget)return;if(0==this.m_showHpEffect){var o=e.node.parent.getComponent(c);null!=o?o.subHP(this.m_ATK):console.log("ts not found"),this.m_showHpEffect=!0}this.isCollision=!0;var i=this.node.getComponent(l);null!=i&&(u.info("触发碰撞检测"),a(this.node).call((function(){i.node.active=!0,i.play("boom")})).delay(.75).call((function(){i.node.active=!1,n.isDead=!0})).start())}},o.update=function(t){var e=this.node;if(!this.isDead&&!this.isCollision){var n=500*t,o=Math.cos(e.angle*(Math.PI/180))*n,i=Math.sin(e.angle*(Math.PI/180))*n;e.setPosition(e.position.x+o,e.position.y+i)}},n}(r))||h);n._RF.pop()}}}));

System.register("chunks:///_virtual/BulletLevel6.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BulletBase.ts","./DevLog.ts","./SoundManager.ts","./Bullet.ts","./Monster.ts"],(function(t){var n,e,o,i,s,l,a,r,u,c,f,d,h;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.Collider2D,s=t.Contact2DType,l=t.Animation,a=t.tween,r=t.view},function(t){u=t.BulletBase},function(t){c=t.DevLog},function(t){f=t.SoundManager},function(t){d=t.Bullet},function(t){h=t.Monster}],execute:function(){var p;e._RF.push({},"0567eez8XtD1ZOlTxAMGYzM","BulletLevel6",void 0);var v=o.ccclass;o.property,t("BulletLevel6",v("BulletLevel6")(p=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(n=t.call.apply(t,[this].concat(o))||this).m_effect=null,n.m_effectEnd=!1,n.mHasSubMonsterHp=!1,n}n(e,t);var o=e.prototype;return o.start=function(){this.setATK(1);var t=this.getComponent(i);t&&t.on(s.BEGIN_CONTACT,this.onCollisionEnter,this)},o.onCollisionEnter=function(t,n){var e=this;if(!this.isDead){if(0==this.mHasSubMonsterHp){var o=n.node.parent.getComponent(h);if(null!=o){var i=t.node.getComponent(d);null!=i&&c.warn("子弹检测脚本异常.请关注"),c.debug("子弹触发怪物扣血....."),o.subHP(this.m_ATK,null==i?void 0:i.getGroupName())}this.mHasSubMonsterHp=!0}this.isCollision=!0,f.getInstance().playSound("Sounds/attack1.mp3");var s=this.node.getComponent(l);null!=s&&a(this.node).call((function(){s.node.active=!0,s.on(l.EventType.FINISHED,e.onEffectEnd,e),s.play("boom")})).start()}},o.boom=function(){var t=this,n=this.node.getComponent(l);null!=n&&a(this.node).call((function(){n.node.active=!0,n.on(l.EventType.FINISHED,t.onEffectEnd,t),n.play("boom")})).start()},o.update=function(t){var n=this.node;if(!this.isDead&&!this.isCollision){var e=r.getVisibleSize();(n.getWorldPosition().x<=0||n.getWorldPosition().x>=e.x||n.getWorldPosition().x<=0||n.getWorldPosition().y>=e.y)&&(this.isDead=!0);var o=500*t,i=Math.cos(n.angle*(Math.PI/180))*o,s=Math.sin(n.angle*(Math.PI/180))*o;n.setPosition(n.position.x+i,n.position.y+s)}},o.onEffectEnd=function(){this.m_effect&&(this.m_effect.node.active=!1),this.isDead=!0},e}(u))||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/BulletManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,a,r,u;return{setters:[function(n){t=n.inheritsLoose,e=n.createClass},function(n){a=n.cclegacy,r=n._decorator,u=n.Component}],execute:function(){var c,o,i;a._RF.push({},"b70a28+KF5Pqqop0u82Pv/F","BulletManager",void 0);var s,l=r.ccclass;r.property,c=l("BulletManager"),s=c(((i=function(n){function a(){return n.apply(this,arguments)||this}t(a,n);var r=a.prototype;return r.onLoad=function(){a._instance=this},r.start=function(){},r.update=function(n){},e(a,null,[{key:"instance",get:function(){return a._instance||(a._instance=new a),a._instance}}]),a}(u))._instance=null,o=i))||o,n({BulletManager:s,default:s});a._RF.pop()}}}));

System.register("chunks:///_virtual/Cannon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIComponent.ts","./ResManager.ts","./Constants.ts","./DateDefine.ts","./ECSWorld.ts","./DevLog.ts","./Group.ts"],(function(e){var t,n,i,a,o,s,r,u,c,l,m,h,p,f,d,v,g,y,N,L,G;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){a=e.cclegacy,o=e._decorator,s=e.Label,r=e.instantiate,u=e.v3,c=e.tween,l=e.Sprite,m=e.Prefab,h=e.SpriteAtlas,p=e.Animation,f=e.TweenSystem},function(e){d=e.UIComponent},function(e){v=e.ResManager},function(e){g=e.BundleName},function(e){y=e.mGlobalData},function(e){N=e.ECSWorld},function(e){L=e.DevLog},function(e){G=e.GroupName}],execute:function(){var A;a._RF.push({},"52d6dKwZ49DaocxmPQW7bRa","Cannon",void 0);var S=o.ccclass;o.property,e("Cannon",S("Cannon")(A=function(e){function a(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))||this).mGunNode=null,t.mPadNode=null,t.mHintNode=null,t.mRangeNode=null,t.mLabLevel=null,t.isFlying=!0,t.isCanLockEnemy=!1,t.mGunSprite=null,t.mType=0,t.mLevelData=-1,t.mAtkValue=0,t.mGunAtlas=null,t.mPadAtlas=null,t.mGunPrefab=[],t.groupName=G.BULE,t}t(a,e);var o=a.prototype;return o.onLoad=function(){this.mLabLevel=this.ViewComponent("ui_towerLevel/lv",s),this.mGunNode=this.ViewNode("gun"),this.mPadNode=this.ViewNode("pad"),this.mHintNode=this.ViewNode("ui_mergeRemind"),this.mRangeNode=this.ViewNode("range")},o.setGroupName=function(e){this.groupName=e},o.getGroupName=function(){return this.groupName},o.init=function(){var e=n(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.getInstance().getAsset(g.Atlas,"gun",h);case 2:return this.mGunAtlas=e.sent,e.next=5,v.getInstance().getAsset(g.Atlas,"pad",h);case 5:this.mPadAtlas=e.sent,t=0;case 7:if(!(t<7)){e.next=14;break}return e.next=10,v.getInstance().getAsset(g.Role,"gun/gun_"+t,m);case 10:this.mGunPrefab[t]=e.sent;case 11:t++,e.next=7;break;case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.setRotation=function(e){this.mGunNode.angle=e},o.setFlying=function(e){this.isFlying=e},o.openLockEnemy=function(){this.isCanLockEnemy=!0},o.effectAction=function(){var e=r(this.node);this.node.addChild(e),e.setPosition(u(0,0)),c(e).to(.1,{scale:u(4,4,0)}).destroySelf().start()},o.updateStyle=function(){var e=y.cannonUpLevel[this.mLevelData],t=e.type,n=e.level;this.mType=t;var i=t+"_"+n,a=this.mGunAtlas.getSpriteFrame(i);this.mGunSprite.getComponent(l).spriteFrame=a;var o=t+"_"+Math.floor(n/3),s=this.mPadAtlas.getSpriteFrame(o);this.mPadNode.getComponent(l).spriteFrame=s,this.mLabLevel.string=""+(this.mLevelData+1)},o.createGun=function(e){var t=y.cannonUpLevel[e],n=t.type;t.level;this.mAtkValue=t.atk,this.mType=n,this.mLevelData=e,this.mGunSprite=r(this.mGunPrefab[n]),this.mGunNode.addChild(this.mGunSprite),this.updateStyle(),this.isFlying||this.openLockEnemy()},o.runFireAction=function(){var e=n(i().mark((function e(t){var a,o,s,r=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=this,s=null==(a=this.mGunSprite.getChildByName("effect"))?void 0:a.getComponent(p),f.instance.ActionManager.removeAllActionsFromTarget(this.mGunNode),c(this.mGunSprite).call((function(){s&&(s.node.active=!0,s.on(p.EventType.FINISHED,r.onEffectEnd,r),s.play("fire"))})).to(.1,{position:u(0,-15)}).delay(.1).call(n(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.instance.createBullet(t,o.node.getPosition(),o.mGunNode.angle,r.mType,r.mAtkValue,r.groupName);case 2:case"end":return e.stop()}}),e)})))).to(.1,{position:u(0,0)}).delay(.1).call((function(){s&&(s.node.active=!1)})).start();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),o.onEffectEnd=function(){var e=this.mGunNode.getChildByName("effect");e&&(e.active=!1)},o.showHint=function(){this.mHintNode.active=!0},o.hideHint=function(){this.mHintNode.active=!1},o.showRange=function(){this.mRangeNode.active=!0},o.hideRange=function(){this.mRangeNode.active=!1},o.setTarget=function(e){},o.compare=function(e){return this.mLevelData===e.mLevelData},o.levelUp=function(){this.setLevel(this.mLevelData+1),this.updateStyle()},o.setLevel=function(e){L.info("当前的炮塔等级是:"+this.mLevelData+",待升级到等级:"+e),this.mLevelData!=e&&(this.mLevelData=e,this.setTarget(null),null==this.mGunSprite&&this.createGun(e)),this.updateStyle()},o.beginFire=function(){var e=n(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runFireAction(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a}(d))||A);a._RF.pop()}}}));

System.register("chunks:///_virtual/CannonEntity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AttackComponent.ts","./GunComponent.ts","./BaseEntity.ts","./TransformComponent.ts","./MoveComponent.ts","./PlayerComponent.ts"],(function(n){var t,o,e,r,c,i,a,p;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy},function(n){e=n.AttackComponent},function(n){r=n.GunComponent},function(n){c=n.BaseEntity},function(n){i=n.TransformComponent},function(n){a=n.MoveComponent},function(n){p=n.PlayerComponent}],execute:function(){o._RF.push({},"fb343xNI9pHvY/WfrCWF0kn","CannonEntity",void 0);n("CannonEntity",function(n){function o(){for(var t,o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(t=n.call.apply(n,[this].concat(c))||this).gunComponent=new r,t.attackComponent=new e,t.transComponent=new i,t.moveComponent=new a,t.playerComponet=new p,t}return t(o,n),o}(c));o._RF.pop()}}}));

System.register("chunks:///_virtual/CannonManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./DataManager.ts","./Constants.ts","./MathUtils.ts","./EventManager.ts","./ECSWorld.ts","./Cannon.ts","./Group.ts"],(function(n){var t,o,e,a,i,s,c,r,l,m,h,u,C,_,g,f,v,p,d,L,y,b,T,x,I,k,D,N;return{setters:[function(n){t=n.applyDecoratedDescriptor,o=n.inheritsLoose,e=n.initializerDefineProperty,a=n.assertThisInitialized,i=n.createClass,s=n.asyncToGenerator,c=n.regeneratorRuntime},function(n){r=n.cclegacy,l=n._decorator,m=n.Node,h=n.Prefab,u=n.v3,C=n.instantiate,_=n.Vec3,g=n.UIOpacity,f=n.UITransform,v=n.tween,p=n.Component},function(n){d=n.GameManager},function(n){L=n.DataManager},function(n){y=n.UIEventName,b=n.TASK_HEBING_FANGYUTA,T=n.CHENGJIOU_QIANGHUA_JINENG},function(n){x=n.MathUtils},function(n){I=n.EventManager},function(n){k=n.ECSWorld},function(n){D=n.Cannon},function(n){N=n.GroupName}],execute:function(){var U,w,E,P,M,B,O,R;r._RF.push({},"f6d6fsdMjNJZJ/ZHNyQ9dig","CannonManager",void 0);var A=l.ccclass,H=l.property,S=function(){this.pos=void 0,this.cannon=void 0,this.block=void 0};n("CannonManager",(U=A("CannonManager"),w=H(m),E=H(h),U(((R=function(n){function t(){for(var t,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return t=n.call.apply(n,[this].concat(i))||this,e(t,"m_moveCannonNode",B,a(t)),e(t,"m_blockPrefab",O,a(t)),t.m_curZIndex=100,t.m_cannonList=[],t.m_selecetCannon=null,t.m_moveCannon=null,t}o(t,n);var r=t.prototype;return r.onLoad=function(){t._instance=this,this.m_curZIndex=100,this.m_cannonList=[];for(var n=d.instance.getCurCannonPoint(),o=0;o<n.length;o++)this.m_cannonList[o]=this.createCannonData(),this.m_cannonList[o].pos=n[o];this.createEndItemBlock(),this.node.on(m.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(m.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(m.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(m.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.cannonBuild(0,N.BULE),this.cannonBuild(1,N.RED)},r.start=function(){},r.onTouchStart=function(n){var t=n.getUILocation();if(this.m_selecetCannon=this.getCannonByPosition(u(t.x,t.y)),null!=this.m_selecetCannon){var o=this.m_selecetCannon.cannon;if(null!=o){null!=this.m_moveCannon&&(this.m_moveCannon.removeFromParent(),this.m_moveCannon=null),this.m_moveCannon=C(o),this.m_moveCannon._selfData=o._selfData,this.m_moveCannonNode.addChild(this.m_moveCannon);this.m_moveCannon.getComponent(D);this.showCannonRange(o),o.opacity=127,this.showCannonHint(o._selfData.cannon),I.getInstance().emit(y.setShowDestroy,!0)}else this.m_selecetCannon=null}},r.onTouchMove=function(n){if(null!=this.m_moveCannon){var t=n.getDelta(),o=this.m_moveCannon.getPosition();o.x+=t.x,o.y+=t.y,this.m_moveCannon.setPosition(o);var e=n.getUILocation(),a=this.getCannonByPosition(u(e.x,e.y));if(null!=a){var i=a.cannon;null!=i?this.showCannonRange(i):this.hideCannonRange()}}},r.onTouchEnd=function(n){this.setAllCannonOpacity();var t=n.getUILocation(),o=this.getBlockByPos(u(t.x,t.y));null!=o?null!=this.m_moveCannon&&this.changeCannon(this.m_moveCannon._selfData,o._selfData):console.log("not in block"),null!=this.m_moveCannon&&(this.m_moveCannon.removeFromParent(),this.m_moveCannon=null,this.hideCannonHint()),this.hideCannonRange(),I.getInstance().emit(y.setShowDestroy,!1)},r.onTouchCancel=function(n){this.setAllCannonOpacity(),null!=this.m_moveCannon&&(this.m_moveCannon.removeFromParent(),this.m_moveCannon=null),this.hideCannonRange(),I.getInstance().emit(y.setShowDestroy,!1);n.getUILocation()},r.showCannonRange=function(n){this.hideCannonRange(),n.getComponent(D).showRange(),n.setSiblingIndex(this.m_curZIndex),this.m_moveCannon.setSiblingIndex(this.m_curZIndex+1),this.m_curZIndex++},r.hideCannonRange=function(){for(var n=0;n<this.m_cannonList.length;n++)null!=this.m_cannonList[n].cannon&&this.m_cannonList[n].cannon.getComponent(D).hideRange()},r.showCannonHint=function(n){for(var t=0;t<this.m_cannonList.length;t++)null!=this.m_cannonList[t].cannon&&this.m_cannonList[t].cannon.getComponent(D).compare(n.getComponent(D))&&this.m_cannonList[t].cannon.getComponent(D).showHint()},r.hideCannonHint=function(){for(var n=0;n<this.m_cannonList.length;n++)null!=this.m_cannonList[n].cannon&&this.m_cannonList[n].cannon.getComponent(D).hideHint()},r.destroyCannonFromBlock=function(n){var t=n.baseCompnent.gameObject;if(t)for(var o=0;o<this.m_cannonList.length;o++){var e=this.m_cannonList[o].cannon;null!=e&&e.active&&e==t&&(e.destroy(),e=null)}},r.levelUpCannon=function(n,t){var o=n.baseCompnent.gameObject,e=t.baseCompnent.gameObject;if(o.getComponent(D).compare(e.getComponent(D))){o.getComponent(D).levelUp(),this.destroyCannonFromBlock(t),k.instance.destroyEntity(t);var a=e.getComponent(D);a.destroy(),a=null,L.getInstance().addTaskCount(b),L.getInstance().addTaskCount(T)}},r.changeCannon=function(n,t){if((n.pos.x!=t.pos.x||n.pos.y!=t.pos.y)&&null!=n.cannon){var o=!1;if(null!=t.cannon&&n.cannon.getComponent(D).compare(t.cannon.getComponent(D))&&(n.cannon.getComponent(D).levelUp(),t.cannon.destroy(),t.cannon=null,o=!0,L.getInstance().addTaskCount(b),L.getInstance().addTaskCount(T)),null==t.cannon)n.cannon.setPosition(new _(0+106*t.pos.x+53,0-106*t.pos.y-53)),t.cannon=n.cannon,t.cannon._selfData=t,n.cannon=null,o&&t.cannon.getComponent(D).effectAction();else{n.cannon.setPosition(new _(0+106*t.pos.x+53,0-106*t.pos.y-53)),t.cannon.setPosition(new _(0+106*n.pos.x+53,0-106*n.pos.y-53));var e=t.cannon;t.cannon=n.cannon,t.cannon._selfData=t,n.cannon=e,n.cannon._selfData=n}}},r.setAllCannonOpacity=function(){for(var n=0;n<this.m_cannonList.length;n++)null!=this.m_cannonList[n].cannon&&(this.m_cannonList[n].cannon.getComponent(g).opacity=255)},r.getBlockByPos=function(n){this.node.getComponent(f).convertToNodeSpaceAR(n);for(var t=0;t<this.m_cannonList.length;t++){var o=this.m_cannonList[t].block.getComponent(f).convertToNodeSpaceAR(n);if(o.x<53&&o.x>-53&&o.y<53&&o.y>-53)return this.m_cannonList[t].block}return null},r.getCannonByPosition=function(n){for(var t=0;t<this.m_cannonList.length;t++)if(null!=this.m_cannonList[t].cannon){var o=this.m_cannonList[t].cannon.getComponent(f).convertToNodeSpaceAR(n);if(o.x<53&&o.x>-53&&o.y<53&&o.y>-53)return this.m_cannonList[t]}return null},r.createCannonData=function(){var n=new S;return n.pos=u(0,0,0),n.cannon=null,n.block=null,n},r.getCanMakeIndex=function(){for(var n=0;n<this.m_cannonList.length;n++)if(null==this.m_cannonList[n].cannon||!this.m_cannonList[n].cannon.active)return n;return null},r.cannonBuild=function(){var n=s(c().mark((function n(t,o){var e,a,i;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===o&&(o=N.BULE),null!=this.m_cannonList[t]){n.next=3;break}return n.abrupt("return");case 3:if(null==this.m_cannonList[t].cannon||!this.m_cannonList[t].cannon.active){n.next=5;break}return n.abrupt("return");case 5:return e=this.m_cannonList[t].pos,n.next=8,k.instance.createCannon(e,o);case 8:a=n.sent,(i=a.baseCompnent.gameObject)._selfData=this.m_cannonList[t],this.m_cannonList[t].cannon=i;case 12:case"end":return n.stop()}}),n,this)})));return function(t,o){return n.apply(this,arguments)}}(),r.clearAllCannon=function(){for(var n=0;n<this.m_cannonList.length;n++)null!=this.m_cannonList[n].cannon&&(this.m_cannonList[n].cannon.removeFromParent(),this.m_cannonList[n].cannon=null)},r.clearAllCannonTarget=function(){for(var n=0;n<this.m_cannonList.length;n++)null!=this.m_cannonList[n].cannon&&this.m_cannonList[n].cannon.getComponent(D).setTarget(null)},r.createEndItemBlock=function(){for(var n=d.instance.getCurCannonPoint(),t=0;t<n.length;t++){var o=n[t],e=C(this.m_blockPrefab);this.node.addChild(e),e.setPosition(new _(0+106*o.x+53,0-106*o.y-53)),this.m_cannonList[t].block=e,this.m_cannonList[t].block._selfData=this.m_cannonList[t]}},r.testTarget=function(n){for(var t=0;t<this.m_cannonList.length;t++)null!=this.m_cannonList[t].cannon&&this.m_cannonList[t].cannon.getComponent(D).setTarget(n)},r.directLevelUp=function(n){var t=n.baseCompnent.gameObject;null!=t&&t.active&&t.getComponent(D).levelUp()},r.autoMerge=function(){var n=[],t=0,o=9999,e=k.instance.getCannoList();console.info("cannonList:"+e.length);for(var a=0;a<e.length;a++){var i=e[a].baseCompnent.gameObject.getComponent(D);if(i){var s=i.mLevelData;null==n[s]?n[s]=1:n[s]++,n[s]>=2&&s<o&&(o=s,t=a)}}if(9999!=o)for(var c=e[t],r=(this.calcCannonNumber(),0);r<e.length;r++){var l=e[r];if(c!=l){var m=c.baseCompnent.gameObject.getComponent(D),h=l.baseCompnent.gameObject.getComponent(D);if(m.compare(h))return this.levelUpCannon(c,l),!0}}return!1},r.autoMerge1=function(){for(var n=[],t=0,o=9999,e=0;e<this.m_cannonList.length;e++)if(null!=this.m_cannonList[e].cannon){var a=this.m_cannonList[e].cannon.getComponent(D).mLevelData;null==n[a]?n[a]=1:n[a]++,n[a]>=2&&a<o&&(o=a,t=e)}if(9999!=o)for(var i=this.m_cannonList[t].cannon,s=this.calcCannonNumber(),c=0;c<s;c++)if(null!=this.m_cannonList[c].cannon){var r=this.m_cannonList[c].cannon;if(i!=r&&i.getComponent(D).compare(r.getComponent(D)))return this.changeCannon(this.m_cannonList[t],this.m_cannonList[c]),console.info("新的数量:"+this.m_cannonList.length),!0}return!1},r.calcCannonNumber=function(){return this.m_cannonList.filter((function(n){return null!=n.cannon})).length},r.jumpNextMap=function(){for(var n=0;n<this.m_cannonList.length;n++){var t;if(null!=this.m_cannonList[n].cannon){var o=this.m_cannonList[n].cannon,e=x.randomNum(0,20);x.randomNum(0,100)>50&&(e*=-1),e/=100;var a=[];a.push(v(o).to(.35+e,{scale:new _(1.8,1.8)})),a.push(v(o).to(.35-e,{scale:new _(1,1)})),(t=v(o)).sequence.apply(t,a).start()}}},i(t,null,[{key:"instance",get:function(){return this._instance}}]),t}(p))._instance=null,B=t((M=R).prototype,"m_moveCannonNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(M.prototype,"m_blockPrefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=M))||P));r._RF.pop()}}}));

System.register("chunks:///_virtual/CoinFlyManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,o,i,a,r,c,l,s,u,g,p,h,m,C;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,a=t.createClass},function(t){r=t.cclegacy,c=t._decorator,l=t.Node,s=t.instantiate,u=t.Vec3,g=t.UITransform,p=t.tween,h=t.Sprite,m=t.Color,C=t.Component}],execute:function(){var d,f,y,_,v,b,w,M,T,I;r._RF.push({},"bb9d6bWjpJCmpXOM3LAXVeM","CoinFlyManager",void 0);var L=c.ccclass,S=c.property;t("CoinFlyManager",(d=L("CoinFlyManager"),f=S(l),y=S(l),_=S(l),d(((I=function(t){function n(){for(var n,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return n=t.call.apply(t,[this].concat(a))||this,o(n,"m_itemCoin",w,i(n)),o(n,"m_targetCoin",M,i(n)),o(n,"m_targetCoinLight",T,i(n)),n}e(n,t);var r=n.prototype;return r.onLoad=function(){n._instance?this.destroy():n._instance=this},r.start=function(){},r.createCoinToTip=function(t,n,e,o){var i=this;void 0===o&&(o=null);var a,r=s(this.m_itemCoin);r.setScale(new u(0,0,0)),null==t?a=r.getPosition():(a=t.getComponent(g).convertToWorldSpaceAR(new u(0,0,0)),a=this.node.getComponent(g).convertToNodeSpaceAR(a));var c=this.m_targetCoin.getComponent(g).convertToWorldSpaceAR(new u(0,0,0)),l=this.node.getComponent(g).convertToNodeSpaceAR(c),C=-1;A(0,100)>50&&(C=1),r.active=!0,null==o?this.node.addChild(r):o.addChild(r);var d,f,y,_,v=(d=a,y=(f=l).x-d.x,_=f.y-d.y,180*Math.atan2(_,y)/Math.PI),b=A(25,65),w=-1===C?v+b:v-b,M=A(120,180),T=Math.cos(w*(Math.PI/180))*M,I=Math.sin(w*(Math.PI/180))*M,L=new u(a.x+T,a.y+I,0);p(r).to(.2,{scale:new u(1,1,1)}).to(.5,{position:L},{easing:"cubicOut"}).to(.5,{position:l},{easing:"cubicIn"}).call((function(){if(!i.m_targetCoin.scaleToBig){i.m_targetCoin.scaleToBig=!0,p(i.m_targetCoin).to(.1,{scale:new u(1.5,1.5,1.5)},{easing:"quadOut"}).to(.1,{scale:new u(1,1,1)},{easing:"quadIn"}).call((function(){i.m_targetCoin.scaleToBig=!1})).start();var t=i.m_targetCoinLight.getComponent(h);t&&(t.color=new m(255,255,255,0),p(t).to(.1,{color:new m(255,255,255,255)}).to(.1,{color:new m(255,255,255,0)}).start())}null!=n&&n(e),r.destroy()})).start()},a(n,null,[{key:"instance",get:function(){return this._instance}}]),n}(C))._instance=void 0,w=n((b=I).prototype,"m_itemCoin",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=n(b.prototype,"m_targetCoin",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=n(b.prototype,"m_targetCoinLight",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=b))||v));function A(t,n){return Math.floor(Math.random()*(n-t+1))+t}r._RF.pop()}}}));

System.register("chunks:///_virtual/CollisionComponent.ts",["cc"],(function(n){var o,e;return{setters:[function(n){o=n.cclegacy,e=n.Size}],execute:function(){o._RF.push({},"4e7fbEZto1K/LheIfnUPPdY","CollisionComponent",void 0);n("CollisionComponent",(function(){this.size=new e}));o._RF.pop()}}}));

System.register("chunks:///_virtual/CollisionSystem.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"b71b7Gq0QNDP4BLb9nIxli3","CollisionSystem",void 0);n("CollisionSystem",function(){function n(){}return n.checkCollision=function(n,t){var i=n.baseCompnent.gameObject.position,o=t.baseCompnent.gameObject.position,e=n.collisionComponent.size,s=t.collisionComponent.size,c=i.x,l=i.x+e.width,u=i.y,r=i.y+e.height,m=o.x,a=o.x+s.width,p=o.y,h=o.y+s.height;return c<a&&l>m&&u<h&&r>p&&(n.attackComponent.isHit=!0,!0)},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/Config.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"04f46lll6BApaweJbOB6pxq","Config",void 0);var e=n("Config",function(){function n(){this.defaultAvatar="https://k.sinaimg.cn/n/sinakd20117/0/w800h800/20240127/889b-4c8a7876ebe98e4d619cdaf43fceea7c.jpg/w700d1q75cms.jpg"}return n.getInstance=function(){return n._instance||(n._instance=new n),n._instance},n}());e._instance=void 0,e.START_SCREEN_NAME="start",t._RF.pop()}}}));

System.register("chunks:///_virtual/Constants.ts",["cc"],(function(I){var e;return{setters:[function(I){e=I.cclegacy}],execute:function(){e._RF.push({},"c6e4fc33RpMXK1F6D1nIoJ/","Constants",void 0);I("BundleName",function(I){return I.GUI="GUI",I.Datas="Datas",I.Atlas="Atlas",I.Prefabs="Prefabs",I.Role="Role",I.Scenes="Scenes",I}({})),I("GUI",function(I){return I.UIGame="UIGame",I.UITask="UITask",I.UIIntensify="UIIntensify",I.UIBoss="UIBoss",I.UISettlement="UISettlement",I.UIMap="UIMap",I.UIStart="UIStart",I.UIJoinLeft="UIJoinLeft",I.UIJoinRight="UIJoinRight",I.UIAttackUpLeft="UIAttackUpLeft",I.UIAttackUpRight="UIAttackUpRight",I.UIHpUpLeft="UIHpUpLeft",I.UIHpUpRight="UIHpUpRight",I.UILifeUpLeft="UILifeUpLeft",I.UILifeUpRight="UILifeUpRight",I.UIRetoreUpLeft="UIRetoreUpLeft",I.UIRetoreUpRight="UIRetoreUpRight",I.UIRunUpLeft="UIRunUpLeft",I.UIRunUpRight="UIRunUpRight",I}({})),I("UIEventName",function(I){return I.updateGameUI="updateGameUI",I.showSucceed="showSucceed",I.showFaild="showFaild",I.changeMapViewActive="changeMapViewActive",I.updateGameBottomUI="updateGameBottomUI",I.setShowDestroy="setShowDestroy",I.isInDestroy="isInDestroy",I.restartGameUI="restartGameUI",I.resetAreaHp="resetAreaHp",I}({})),I("BarrageEventName",function(I){return I.GameStart="gameStart",I.GameEnd="gameEnd",I.Barrage="Barrage",I}({})),I("BarrageType",function(I){return I.LIVE_OPEN_PLATFORM_DM="LIVE_OPEN_PLATFORM_DM",I.LIVE_OPEN_PLATFORM_LIKE="LIVE_OPEN_PLATFORM_LIKE",I.LIVE_OPEN_PLATFORM_SEND_GIFT="LIVE_OPEN_PLATFORM_SEND_GIFT",I}({})),I("TASK_HEBING_FANGYUTA",0),I("TASK_JIDAO_DIREN",1),I("TASK_QIANGHUA_JINENG",2),I("CHENGJIOU_QIANGHUA_JINENG",3),I("INTENSIFY_KUORONG",0),I("INTENSIFY_BAOJI",1),I("BUFFER_JINBIFANBEI",0),I("BUFFER_GUAIWUJIANSHU",1),I("BUFFER_GONGJIFANBEI",2),I("BUFFER_QUANPINGGONGJI",3),I("BUFFER_GONGJIJIASU",4),I("RED_INTENSIFY_BAOJI",100),I("RED_INTENSIFY_ATTACK",101),I("RED_INTENSIFY_RUN",102),I("RED_INTENSIFY_RESTORE",103),I("RED_INTENSIFY_LIFE",104),I("BLUE_INTENSIFY_BAOJI",200),I("BLUE_INTENSIFY_ATTACK",201),I("BLUE_INTENSIFY_RUN",202),I("BLUE_INTENSIFY_RESTORE",203),I("BLUE_INTENSIFY_LIFE",204);e._RF.pop()}}}));

System.register("chunks:///_virtual/Crown.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,i,o,r,a,l,c,s,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Node,c=t.Vec3,s=t.tween,u=t.Component}],execute:function(){var p,m,h,w,f,v,_,g,y;r._RF.push({},"8215bqcCe1PEYqQ0mqSWrvs","Crown",void 0);var d=a.ccclass,b=a.property;t("Crown",(p=d("Crown"),m=b(l),h=b(l),w=b(l),p((_=e((v=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"m_crown",_,o(e)),i(e,"m_diamond",g,o(e)),i(e,"m_light",y,o(e)),e}n(e,t);var r=e.prototype;return r.onLoad=function(){var t=this;this.moveUpDown(this.m_crown,5),this.moveUpDown(this.m_diamond,-5),this.moveUpDown(this.m_light,-5),this.m_light.setScale(new c(.6,.6,.6));var e={scale:new c(1.2,1.2,1.2)};s(this.m_light).to(.5,e).to(.5,{opacity:100}).call((function(){t.m_light.setScale(new c(.6,.6,.6)),t.m_light.opacity=255})).repeatForever().start()},r.start=function(){},r.moveUpDown=function(t,e){var n=t.getPosition(),i={position:new c(n.x,n.y+e,n.z)},o={position:new c(n.x,n.y-e,n.z)};s(t).sequence(s().to(1,i),s().to(1,o)).repeatForever().start()},e}(u)).prototype,"m_crown",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(v.prototype,"m_diamond",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(v.prototype,"m_light",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=v))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/CrownManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DevLog.ts","./GameManager.ts","./DataModelManager.ts","./GameModel.ts","./DataManager.ts","./Constants.ts","./IntensifyDataManager.ts","./Group.ts","./BaseArea.ts"],(function(n){var e,t,o,i,a,r,s,l,u,c,d,m,h,w,g,C,f,p,M,y,v,B,P;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,o=n.initializerDefineProperty,i=n.assertThisInitialized,a=n.createClass},function(n){r=n.cclegacy,s=n._decorator,l=n.Prefab,u=n.Vec2,c=n.instantiate,d=n.Vec3,m=n.tween,h=n.Component},function(n){w=n.DevLog},function(n){g=n.GameManager},function(n){C=n.DataModelManager,f=n.ModelName},function(n){p=n.GameState},function(n){M=n.DataManager},function(n){y=n.INTENSIFY_BAOJI},function(n){v=n.mIntensifyManager},function(n){B=n.GroupName},function(n){P=n.BaseArea}],execute:function(){var _,x,E,b,R,D;r._RF.push({},"528d1wsNxZIgZ78kqeWrA/n","CrownManager",void 0);var L=s.ccclass,G=s.property;n("CrownManager",(_=L("CrownManager"),x=G(l),_(((D=function(n){function e(){for(var e,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a))||this,o(e,"m_crown",R,i(e)),e.mBlueCrown=null,e.mRedCrown=null,e.m_nextCrown=null,e}t(e,n);var r=e.prototype;return r.onLoad=function(){e._instance=this,this.buildEndPoint(B.BULE),this.buildEndPoint(B.RED)},r.buildEndPoint=function(n){void 0===n&&(n=B.BULE);var e=g.instance.getCurPahtList(),t=[],o=(t=B.RED==n?[].concat(e).reverse():e)[t.length-1],i=new u(0,0);(i.x=106*o.x+53,i.y=106*-o.y-53,n==B.BULE)?(null==this.mBlueCrown&&(this.mBlueCrown=c(this.m_crown),this.mBlueCrown.name="BlueCrown",this.node.addChild(this.mBlueCrown)),this.mBlueCrown.addComponent(P).setGroupName(n),i.y+=25,this.mBlueCrown.setPosition(new d(i.x,i.y,0))):(null==this.mRedCrown&&(this.mRedCrown=c(this.m_crown),this.mRedCrown.name="RedCrown",this.node.addChild(this.mRedCrown)),this.mRedCrown.addComponent(P).setGroupName(n),i.y+=25,this.mRedCrown.setPosition(new d(i.x,i.y,0)));w.debug("CrownManager 构建终点....")},r.getEndPointNode=function(n){return void 0===n&&(n=B.BULE),n==B.BULE?this.mBlueCrown:this.mRedCrown},r.show=function(){this.node.active=!0},r.hide=function(){this.node.active=!1},r.setNextCrownPos=function(n){null==this.m_nextCrown&&(this.m_nextCrown=c(this.m_crown),this.node.addChild(this.m_nextCrown)),n.y+=25,this.m_nextCrown.setPosition(new d(n.x,n.y,0))},r.moveToNextMap=function(){var n=this,e={position:new d(-640,0,0)};m(this.node).by(.5,e).call((function(){n.node.setPosition(new d(-320,310,0)),n.buildEndPoint(B.BULE),n.buildEndPoint(B.RED)})).start()},r.restoreHp=function(n){if(C.instance.getModel(f.Game).state==p.Playering){var e=n.getComponent(P);e&&e.getHp()<e.getMaxHp()&&e.restoreHp()}},r.addHp=function(n){if(C.instance.getModel(f.Game).state==p.Playering){var e=n.getComponent(P);e&&e.addHp()}},r.subHP=function(n,e){if(C.instance.getModel(f.Game).state==p.Playering)if(null!=e){if(1e3*Math.random()<=500){var t=M.getInstance().getInternsifLevel(y),o=v.getValue(y,t);e=2*e+e*(o/100),e+=e*(o/100),e=parseFloat(e.toFixed(2))}var i=n.getComponent(P);i&&i.getHp()<i.getMaxHp()&&i.subHp(e)}else console.log("生命值未定义")},a(e,null,[{key:"instance",get:function(){return this._instance}}]),e}(h))._instance=null,R=e((b=D).prototype,"m_crown",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=b))||E));r._RF.pop()}}}));

System.register("chunks:///_virtual/danmaku-websocket.min.js",["./cjs-loader.mjs"],(function(e,t){var n;return{setters:[function(e){n=e.default}],execute:function(){e("default",void 0);var i=e("__cjsMetaURL",t.meta.url);n.define(i,(function(t,n,i,o,r){var a,s;a="undefined"!=typeof self?self:this,s=function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){t.a={WS_OP_HEARTBEAT:2,WS_OP_HEARTBEAT_REPLY:3,WS_OP_MESSAGE:5,WS_OP_USER_AUTHENTICATION:7,WS_OP_CONNECT_SUCCESS:8,WS_PACKAGE_HEADER_TOTAL_LENGTH:16,WS_PACKAGE_OFFSET:0,WS_HEADER_OFFSET:4,WS_VERSION_OFFSET:6,WS_OPERATION_OFFSET:8,WS_SEQUENCE_OFFSET:12,WS_BODY_PROTOCOL_VERSION_NORMAL:0,WS_BODY_PROTOCOL_VERSION_DEFLATE:2,WS_HEADER_DEFAULT_VERSION:1,WS_HEADER_DEFAULT_OPERATION:1,WS_HEADER_DEFAULT_SEQUENCE:1,WS_AUTH_OK:0,WS_AUTH_TOKEN_ERROR:-101}},function(e,t,n){var i=n(2).default;e.exports=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"development"===e.CONFIG.bundleType&&(console.clear(),console.dir(e.CONFIG)),this.initialize(t)}return e.prototype.initialize=function(t){return"development"===e.CONFIG.bundleType&&console.log("App Initialized."),this.ws=new i.a(t),this.getReturn()},e.prototype.getReturn=function(){return"development"===e.CONFIG.bundleType?this:{destroy:this.destroy.bind(this),send:this.send.bind(this),getAuthInfo:this.getAuthInfo.bind(this),getRetryCount:this.getRetryCount.bind(this)}},e.prototype.destroy=function(){this.ws&&this.ws.destroy()},e.prototype.send=function(e){this.ws&&this.ws.send(e)},e.prototype.getAuthInfo=function(){return this.ws&&this.ws.getAuthInfo()},e.prototype.getRetryCount=function(){return this.ws&&this.ws.getRetryCount()},o(e,null,[{key:"CONFIG",get:function(){return{version:"1.4.3",gitHash:"bf68b6a8",build:"32",bundleType:"release"}}}]),e}();t.default=r},function(e,t,n){var i=n(0),o=n(4),r=n(5),a=n(6).inflate,s=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.checkOptions(t)){var n={url:"",urlList:[],rid:0,aid:0,uid:0,from:-1,retry:!0,retryMaxCount:0,retryInterval:5,retryThreadCount:10,connectTimeout:5e3,retryConnectCount:3,retryconnectTimeout:1e4,retryRoundInterval:Math.floor(2*Math.random())+3,customAuthParam:[],fallback:function(){},heartBeatInterval:30,onReceivedMessage:function(){},onReceiveAuthRes:function(){},onHeartBeatReply:function(){},onInitialized:function(){},onOpen:function(){},onClose:function(){},onError:function(){},onListConnectError:function(){}};this.options=r.a.extend({},n,t),this.wsBinaryHeaderList=r.a.extend([],o.a),this.authInfo={origin:"",encode:""},0!==this.options.urlList.length&&0!==this.options.retryMaxCount&&this.options.retryMaxCount<this.options.urlList.length&&(this.options.retryMaxCount=this.options.urlList.length-1),this.state={retryCount:0,listConnectFinishedCount:0,index:0,connectTimeoutTimes:0},this.callbackQueueList={onInitializedQueue:[],onOpenQueue:[],onCloseQueue:[],onErrorQueue:[],onReceivedMessageQueue:[],onHeartBeatReplyQueue:[],onRetryFallbackQueue:[],onListConnectErrorQueue:[],onReceiveAuthResQueue:[]},this.HEART_BEAT_INTERVAL=0,this.CONNECT_TIMEOUT=0,this.mixinCallback().initialize(this.options.urlList.length>0?this.options.urlList[0]:this.options.url)}}return e.prototype.initialize=function(e){var t=this,n="MozWebSocket"in window?window.MozWebSocket:window.WebSocket,i=this.options;try{this.ws=new n(e),this.ws.binaryType="arraybuffer",this.ws.onopen=this.onOpen.bind(this),this.ws.onmessage=this.onMessage.bind(this),this.ws.onclose=this.onClose.bind(this),this.ws.onerror=this.onError.bind(this),r.a.callFunction(this.callbackQueueList.onInitializedQueue),this.callbackQueueList.onInitializedQueue=[];var o=this.state.connectTimeoutTimes>=3?i.retryconnectTimeout:i.connectTimeout;this.CONNECT_TIMEOUT=setTimeout((function(){t.state.connectTimeoutTimes+=1,console.error("connect timeout ",t.state.connectTimeoutTimes),t.ws.close()}),o)}catch(e){"function"==typeof i.fallback&&i.fallback()}return this},e.prototype.onOpen=function(){return r.a.callFunction(this.callbackQueueList.onOpenQueue),this.state.connectTimeoutTimes=0,this.CONNECT_TIMEOUT&&clearTimeout(this.CONNECT_TIMEOUT),this.userAuthentication(),this},e.prototype.userAuthentication=function(){var e,t=this,n=this.options,o={uid:parseInt(n.uid,10),roomid:parseInt(n.rid,10),protover:parseInt(n.protover,10)||i.a.WS_BODY_PROTOCOL_VERSION_NORMAL};n.aid&&(o.aid=parseInt(n.aid,10)),n.from>0&&(o.from=parseInt(n.from,10)||7);for(var r=0;r<n.customAuthParam.length;r++){var a=n.customAuthParam[r],s=a.type||"string";switch(void 0!==o[a.key]&&console.error("Token has the same key already! 【"+a.key+"】"),a.key.toString()&&a.value.toString()||console.error("Invalid customAuthParam, missing key or value! 【"+a.key+"】-【"+a.value+"】"),s){case"string":o[a.key]=a.value;break;case"number":o[a.key]=parseInt(a.value,10);break;case"boolean":o[a.key]=!!o[a.value];break;default:return void console.error("Unsupported customAuthParam type!【"+s+"】")}}e=this.convertToArrayBuffer(JSON.stringify(o),i.a.WS_OP_USER_AUTHENTICATION),this.authInfo.origin=o,this.authInfo.encode=e,setTimeout((function(){t.ws.send(e)}),0)},e.prototype.getAuthInfo=function(){return this.authInfo},e.prototype.heartBeat=function(){var e=this;clearTimeout(this.HEART_BEAT_INTERVAL);var t=this.convertToArrayBuffer({},i.a.WS_OP_HEARTBEAT);this.ws.send(t),this.HEART_BEAT_INTERVAL=setTimeout((function(){e.heartBeat()}),1e3*this.options.heartBeatInterval)},e.prototype.onMessage=function(e){var t=this;try{var n=this.convertToObject(e.data);if(n instanceof Array)n.forEach((function(e){t.onMessage(e)}));else if(n instanceof Object)switch(n.op){case i.a.WS_OP_HEARTBEAT_REPLY:this.onHeartBeatReply(n.body);break;case i.a.WS_OP_MESSAGE:this.onMessageReply(n.body,n.seq);break;case i.a.WS_OP_CONNECT_SUCCESS:if(0!==n.body.length&&n.body[0])switch(n.body[0].code){case i.a.WS_AUTH_OK:this.heartBeat();break;case i.a.WS_AUTH_TOKEN_ERROR:this.options.retry=!1,"function"==typeof this.options.onReceiveAuthRes&&this.options.onReceiveAuthRes(n.body);break;default:this.onClose()}else this.heartBeat()}}catch(e){console.error("WebSocket Error: ",e)}return this},e.prototype.onMessageReply=function(e,t){var n=this;try{e instanceof Array?e.forEach((function(e){n.onMessageReply(e,t)})):e instanceof Object&&"function"==typeof this.options.onReceivedMessage&&this.options.onReceivedMessage(e,t)}catch(e){console.error("On Message Resolve Error: ",e)}},e.prototype.onHeartBeatReply=function(e){r.a.callFunction(this.callbackQueueList.onHeartBeatReplyQueue,e)},e.prototype.onClose=function(){var e=this,t=this.options.urlList.length;return r.a.callFunction(this.callbackQueueList.onCloseQueue),clearTimeout(this.HEART_BEAT_INTERVAL),this.options.retry?(this.checkRetryState()?setTimeout((function(){console.error("Danmaku Websocket Retry .",e.state.retryCount),e.state.index+=1,0===t||e.state.retryCount>e.options.retryThreadCount?setTimeout((function(){e.initialize(e.options.url)}),1e3*e.options.retryRoundInterval):0!==t&&e.state.index>t-1?(e.state.index=0,e.state.listConnectFinishedCount+=1,1===e.state.listConnectFinishedCount&&r.a.callFunction(e.callbackQueueList.onListConnectErrorQueue),setTimeout((function(){e.initialize(e.options.urlList[e.state.index])}),1e3*e.options.retryRoundInterval)):e.initialize(e.options.urlList[e.state.index])}),1e3*this.options.retryInterval):(console.error("Danmaku Websocket Retry Failed."),r.a.callFunction(this.callbackQueueList.onRetryFallbackQueue)),this):this},e.prototype.onError=function(e){return console.error("Danmaku Websocket On Error.",e),r.a.callFunction(this.callbackQueueList.onErrorQueue,e),this},e.prototype.destroy=function(){this.HEART_BEAT_INTERVAL&&clearTimeout(this.HEART_BEAT_INTERVAL),this.CONNECT_TIMEOUT&&clearTimeout(this.CONNECT_TIMEOUT),this.options.retry=!1,this.ws&&this.ws.close(),this.ws=null},e.prototype.convertToArrayBuffer=function(e,t){this.encoder||(this.encoder=r.a.getEncoder());var n=new ArrayBuffer(i.a.WS_PACKAGE_HEADER_TOTAL_LENGTH),o=new DataView(n,i.a.WS_PACKAGE_OFFSET),a=this.encoder.encode(e);return o.setInt32(i.a.WS_PACKAGE_OFFSET,i.a.WS_PACKAGE_HEADER_TOTAL_LENGTH+a.byteLength),this.wsBinaryHeaderList[2].value=t,this.wsBinaryHeaderList.forEach((function(e){4===e.bytes?o.setInt32(e.offset,e.value):2===e.bytes&&o.setInt16(e.offset,e.value)})),r.a.mergeArrayBuffer(n,a)},e.prototype.convertToObject=function(e){var t=new DataView(e),n={body:[]};if(n.packetLen=t.getInt32(i.a.WS_PACKAGE_OFFSET),this.wsBinaryHeaderList.forEach((function(e){4===e.bytes?n[e.key]=t.getInt32(e.offset):2===e.bytes&&(n[e.key]=t.getInt16(e.offset))})),n.packetLen<e.byteLength&&this.convertToObject(e.slice(0,n.packetLen)),this.decoder||(this.decoder=r.a.getDecoder()),!n.op||i.a.WS_OP_MESSAGE!==n.op&&n.op!==i.a.WS_OP_CONNECT_SUCCESS)n.op&&i.a.WS_OP_HEARTBEAT_REPLY===n.op&&(n.body={count:t.getInt32(i.a.WS_PACKAGE_HEADER_TOTAL_LENGTH)});else for(var o=i.a.WS_PACKAGE_OFFSET,s=n.packetLen,u="",c="";o<e.byteLength;o+=s){s=t.getInt32(o),u=t.getInt16(o+i.a.WS_HEADER_OFFSET);try{if(n.ver===i.a.WS_BODY_PROTOCOL_VERSION_DEFLATE){var l=e.slice(o+u,o+s),f=a(new Uint8Array(l));c=this.convertToObject(f.buffer).body}else{var h=this.decoder.decode(e.slice(o+u,o+s));c=0!==h.length?JSON.parse(h):null}c&&n.body.push(c)}catch(t){console.error("decode body error:",new Uint8Array(e),n,t)}}return n},e.prototype.send=function(e){this.ws&&this.ws.send(e)},e.prototype.addCallback=function(e,t){return"function"==typeof e&&t instanceof Array&&t.push(e),this},e.prototype.mixinCallback=function(){var e=this.options,t=this.callbackQueueList;return this.addCallback(e.onReceivedMessage,t.onReceivedMessageQueue).addCallback(e.onHeartBeatReply,t.onHeartBeatReplyQueue).addCallback(e.onInitialized,t.onInitializedQueue).addCallback(e.onOpen,t.onOpenQueue).addCallback(e.onClose,t.onCloseQueue).addCallback(e.onError,t.onErrorQueue).addCallback(e.onRetryFallback,t.onRetryFallbackQueue).addCallback(e.onListConnectError,t.onListConnectErrorQueue).addCallback(e.onReceiveAuthRes,t.onReceiveAuthResQueue),this},e.prototype.getRetryCount=function(){return this.state.retryCount},e.prototype.checkRetryState=function(){var e=this.options,t=!1;return(0===e.retryMaxCount||this.state.retryCount<e.retryMaxCount)&&(this.state.retryCount+=1,t=!0),t},e.checkOptions=function(e){return e||e instanceof Object?e.url?!!e.rid||(console.error("WebSocket Initialize options rid(cid) missing."),!1):(console.error("WebSocket Initialize options url missing."),!1):(console.error("WebSocket Initialize options missing or error.",e),!1)},e}();t.a=s},function(e,t,n){var i=n(0),o=[{name:"Header Length",key:"headerLen",bytes:2,offset:i.a.WS_HEADER_OFFSET,value:i.a.WS_PACKAGE_HEADER_TOTAL_LENGTH},{name:"Protocol Version",key:"ver",bytes:2,offset:i.a.WS_VERSION_OFFSET,value:i.a.WS_HEADER_DEFAULT_VERSION},{name:"Operation",key:"op",bytes:4,offset:i.a.WS_OPERATION_OFFSET,value:i.a.WS_HEADER_DEFAULT_OPERATION},{name:"Sequence Id",key:"seq",bytes:4,offset:i.a.WS_SEQUENCE_OFFSET,value:i.a.WS_HEADER_DEFAULT_SEQUENCE}];t.a=o},function(e,t,n){var i={getDecoder:function(){return window.TextDecoder?new window.TextDecoder:{decode:function(e){return decodeURIComponent(window.escape(String.fromCharCode.apply(String,new Uint8Array(e))))}}},getEncoder:function(){return window.TextEncoder?new window.TextEncoder:{encode:function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),i=0,o=e.length;i<o;i++)n[i]=e.charCodeAt(i);return t}}},mergeArrayBuffer:function(e,t){var n=new Uint8Array(e),i=new Uint8Array(t),o=new Uint8Array(n.byteLength+i.byteLength);return o.set(n,0),o.set(i,n.byteLength),o.buffer},callFunction:function(e,t){return e instanceof Array&&e.length?(e.forEach((function(e){return"function"==typeof e&&e(t)})),null):"function"==typeof e&&e(t)},extend:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o=e||{};return o instanceof Object&&n.forEach((function(e){e instanceof Object&&Object.keys(e).forEach((function(t){o[t]=e[t]}))})),o}};t.a=i},function(e,t,n){e.exports=function e(t,n,i){function o(a,s){if(!n[a]){if(!t[a]){if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,(function(e){return o(t[a][1][e]||e)}),c,c.exports,e,t,n,i)}return n[a].exports}for(var r=!1,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t,n,i=Array.prototype.slice.call(arguments,1);i.length;){var o=i.shift();if(o){if("object"!=typeof o)throw new TypeError(o+"must be non-object");for(var r in o)t=o,n=r,Object.prototype.hasOwnProperty.call(t,n)&&(e[r]=o[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,n,i,o){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+i),o);else for(var r=0;r<i;r++)e[o+r]=t[n+r]},flattenChunks:function(e){var t,n,i,o,r,a;for(t=i=0,n=e.length;t<n;t++)i+=e[t].length;for(a=new Uint8Array(i),t=o=0,n=e.length;t<n;t++)r=e[t],a.set(r,o),o+=r.length;return a}},r={arraySet:function(e,t,n,i,o){for(var r=0;r<i;r++)e[o+r]=t[n+r]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,o)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,r))},n.setTyped(i)},{}],2:[function(e,t,n){function i(e,t){if(t<65534&&(e.subarray&&a||!e.subarray&&r))return String.fromCharCode.apply(null,o.shrinkBuf(e,t));for(var n="",i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n}var o=e("./common"),r=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var s=new o.Buf8(256),u=0;u<256;u++)s[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;s[254]=s[254]=1,n.string2buf=function(e){var t,n,i,r,a,s=e.length,u=0;for(r=0;r<s;r++)55296==(64512&(n=e.charCodeAt(r)))&&r+1<s&&56320==(64512&(i=e.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=new o.Buf8(u),r=a=0;a<u;r++)55296==(64512&(n=e.charCodeAt(r)))&&r+1<s&&56320==(64512&(i=e.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),t[a++]=n<128?n:(t[a++]=n<2048?192|n>>>6:(t[a++]=n<65536?224|n>>>12:(t[a++]=240|n>>>18,128|n>>>12&63),128|n>>>6&63),128|63&n);return t},n.buf2binstring=function(e){return i(e,e.length)},n.binstring2buf=function(e){for(var t=new o.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,o,r,a,u=t||e.length,c=new Array(2*u);for(n=o=0;n<u;)if((r=e[n++])<128)c[o++]=r;else if(4<(a=s[r]))c[o++]=65533,n+=a-1;else{for(r&=2===a?31:3===a?15:7;1<a&&n<u;)r=r<<6|63&e[n++],a--;c[o++]=1<a?65533:r<65536?r:(r-=65536,c[o++]=55296|r>>10&1023,56320|1023&r)}return i(c,o)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}},{"./common":1}],3:[function(e,t,n){t.exports=function(e,t,n,i){for(var o=65535&e|0,r=e>>>16&65535|0,a=0;0!==n;){for(n-=a=2e3<n?2e3:n;r=r+(o=o+t[i++]|0)|0,--a;);o%=65521,r%=65521}return o|r<<16|0}},{}],4:[function(e,t,n){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],5:[function(e,t,n){var i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,o){var r=i,a=o+n;e^=-1;for(var s=o;s<a;s++)e=e>>>8^r[255&(e^t[s])];return-1^e}},{}],6:[function(e,t,n){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],7:[function(e,t,n){t.exports=function(e,t){var n,i,o,r,a,s,u,c,l,f,h,d,b,_,p,y,m,k,w,E,g,v,T,A,S;n=e.state,i=e.next_in,A=e.input,o=i+(e.avail_in-5),r=e.next_out,S=e.output,a=r-(t-e.avail_out),s=r+(e.avail_out-257),u=n.dmax,c=n.wsize,l=n.whave,f=n.wnext,h=n.window,d=n.hold,b=n.bits,_=n.lencode,p=n.distcode,y=(1<<n.lenbits)-1,m=(1<<n.distbits)-1;e:do{b<15&&(d+=A[i++]<<b,b+=8,d+=A[i++]<<b,b+=8),k=_[d&y];t:for(;;){if(d>>>=w=k>>>24,b-=w,0==(w=k>>>16&255))S[r++]=65535&k;else{if(!(16&w)){if(0==(64&w)){k=_[(65535&k)+(d&(1<<w)-1)];continue t}if(32&w){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}E=65535&k,(w&=15)&&(b<w&&(d+=A[i++]<<b,b+=8),E+=d&(1<<w)-1,d>>>=w,b-=w),b<15&&(d+=A[i++]<<b,b+=8,d+=A[i++]<<b,b+=8),k=p[d&m];n:for(;;){if(d>>>=w=k>>>24,b-=w,!(16&(w=k>>>16&255))){if(0==(64&w)){k=p[(65535&k)+(d&(1<<w)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(g=65535&k,b<(w&=15)&&(d+=A[i++]<<b,(b+=8)<w&&(d+=A[i++]<<b,b+=8)),u<(g+=d&(1<<w)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(d>>>=w,b-=w,(w=r-a)<g){if(l<(w=g-w)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(T=h,(v=0)===f){if(v+=c-w,w<E){for(E-=w;S[r++]=h[v++],--w;);v=r-g,T=S}}else if(f<w){if(v+=c+f-w,(w-=f)<E){for(E-=w;S[r++]=h[v++],--w;);if(v=0,f<E){for(E-=w=f;S[r++]=h[v++],--w;);v=r-g,T=S}}}else if(v+=f-w,w<E){for(E-=w;S[r++]=h[v++],--w;);v=r-g,T=S}for(;2<E;)S[r++]=T[v++],S[r++]=T[v++],S[r++]=T[v++],E-=3;E&&(S[r++]=T[v++],1<E&&(S[r++]=T[v++]))}else{for(v=r-g;S[r++]=S[v++],S[r++]=S[v++],S[r++]=S[v++],2<(E-=3););E&&(S[r++]=S[v++],1<E&&(S[r++]=S[v++]))}break}}break}}while(i<o&&r<s);i-=E=b>>3,d&=(1<<(b-=E<<3))-1,e.next_in=i,e.next_out=r,e.avail_in=i<o?o-i+5:5-(i-o),e.avail_out=r<s?s-r+257:257-(r-s),n.hold=d,n.bits=b}},{}],8:[function(e,t,n){function i(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function o(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new d.Buf16(320),this.work=new d.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function r(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=g,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new d.Buf32(v),t.distcode=t.distdyn=new d.Buf32(T),t.sane=1,t.back=-1,w):E}function a(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,r(e)):E}function s(e,t){var n,i;return e&&e.state?(i=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?E:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,a(e))):E}function u(e,t){var n,i;return e?(i=new o,(e.state=i).window=null,(n=s(e,t))!==w&&(e.state=null),n):E}function c(e){if(A){var t;for(f=new d.Buf32(512),h=new d.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(y(m,e.lens,0,288,f,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;y(k,e.lens,0,32,h,0,e.work,{bits:5}),A=!1}e.lencode=f,e.lenbits=9,e.distcode=h,e.distbits=5}function l(e,t,n,i){var o,r=e.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new d.Buf8(r.wsize)),i>=r.wsize?(d.arraySet(r.window,t,n-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(i<(o=r.wsize-r.wnext)&&(o=i),d.arraySet(r.window,t,n-i,o,r.wnext),(i-=o)?(d.arraySet(r.window,t,n-i,i,0),r.wnext=i,r.whave=r.wsize):(r.wnext+=o,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=o))),0}var f,h,d=e("../utils/common"),b=e("./adler32"),_=e("./crc32"),p=e("./inffast"),y=e("./inftrees"),m=1,k=2,w=0,E=-2,g=1,v=852,T=592,A=!0;n.inflateReset=a,n.inflateReset2=s,n.inflateResetKeep=r,n.inflateInit=function(e){return u(e,15)},n.inflateInit2=u,n.inflate=function(e,t){var n,o,r,a,s,u,f,h,v,T,A,S,O,R,C,x,I,L,N,B,F,H,D,U,W=0,z=new d.Buf8(4),P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return E;12===(n=e.state).mode&&(n.mode=13),s=e.next_out,r=e.output,f=e.avail_out,a=e.next_in,o=e.input,u=e.avail_in,h=n.hold,v=n.bits,T=u,A=f,H=w;e:for(;;)switch(n.mode){case g:if(0===n.wrap){n.mode=13;break}for(;v<16;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}if(2&n.wrap&&35615===h){z[n.check=0]=255&h,z[1]=h>>>8&255,n.check=_(n.check,z,2,0),v=h=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&h)<<8)+(h>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&h)){e.msg="unknown compression method",n.mode=30;break}if(v-=4,F=8+(15&(h>>>=4)),0===n.wbits)n.wbits=F;else if(F>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<F,e.adler=n.check=1,n.mode=512&h?10:12,v=h=0;break;case 2:for(;v<16;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}if(n.flags=h,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=h>>8&1),512&n.flags&&(z[0]=255&h,z[1]=h>>>8&255,n.check=_(n.check,z,2,0)),v=h=0,n.mode=3;case 3:for(;v<32;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}n.head&&(n.head.time=h),512&n.flags&&(z[0]=255&h,z[1]=h>>>8&255,z[2]=h>>>16&255,z[3]=h>>>24&255,n.check=_(n.check,z,4,0)),v=h=0,n.mode=4;case 4:for(;v<16;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}n.head&&(n.head.xflags=255&h,n.head.os=h>>8),512&n.flags&&(z[0]=255&h,z[1]=h>>>8&255,n.check=_(n.check,z,2,0)),v=h=0,n.mode=5;case 5:if(1024&n.flags){for(;v<16;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}n.length=h,n.head&&(n.head.extra_len=h),512&n.flags&&(z[0]=255&h,z[1]=h>>>8&255,n.check=_(n.check,z,2,0)),v=h=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(u<(S=n.length)&&(S=u),S&&(n.head&&(F=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),d.arraySet(n.head.extra,o,a,S,F)),512&n.flags&&(n.check=_(n.check,o,S,a)),u-=S,a+=S,n.length-=S),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===u)break e;for(S=0;F=o[a+S++],n.head&&F&&n.length<65536&&(n.head.name+=String.fromCharCode(F)),F&&S<u;);if(512&n.flags&&(n.check=_(n.check,o,S,a)),u-=S,a+=S,F)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===u)break e;for(S=0;F=o[a+S++],n.head&&F&&n.length<65536&&(n.head.comment+=String.fromCharCode(F)),F&&S<u;);if(512&n.flags&&(n.check=_(n.check,o,S,a)),u-=S,a+=S,F)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;v<16;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}if(h!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}v=h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;v<32;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}e.adler=n.check=i(h),v=h=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=s,e.avail_out=f,e.next_in=a,e.avail_in=u,n.hold=h,n.bits=v,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){h>>>=7&v,v-=7&v,n.mode=27;break}for(;v<3;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}switch(n.last=1&h,v-=1,3&(h>>>=1)){case 0:n.mode=14;break;case 1:if(c(n),n.mode=20,6!==t)break;h>>>=2,v-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}h>>>=2,v-=2;break;case 14:for(h>>>=7&v,v-=7&v;v<32;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}if((65535&h)!=(h>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&h,v=h=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(S=n.length){if(u<S&&(S=u),f<S&&(S=f),0===S)break e;d.arraySet(r,o,a,S,s),u-=S,a+=S,f-=S,s+=S,n.length-=S;break}n.mode=12;break;case 17:for(;v<14;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}if(n.nlen=257+(31&h),h>>>=5,v-=5,n.ndist=1+(31&h),h>>>=5,v-=5,n.ncode=4+(15&h),h>>>=4,v-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;v<3;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}n.lens[P[n.have++]]=7&h,h>>>=3,v-=3}for(;n.have<19;)n.lens[P[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,D={bits:n.lenbits},H=y(0,n.lens,0,19,n.lencode,0,n.work,D),n.lenbits=D.bits,H){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;x=(W=n.lencode[h&(1<<n.lenbits)-1])>>>16&255,I=65535&W,!((C=W>>>24)<=v);){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}if(I<16)h>>>=C,v-=C,n.lens[n.have++]=I;else{if(16===I){for(U=C+2;v<U;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}if(h>>>=C,v-=C,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}F=n.lens[n.have-1],S=3+(3&h),h>>>=2,v-=2}else if(17===I){for(U=C+3;v<U;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}v-=C,F=0,S=3+(7&(h>>>=C)),h>>>=3,v-=3}else{for(U=C+7;v<U;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}v-=C,F=0,S=11+(127&(h>>>=C)),h>>>=7,v-=7}if(n.have+S>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;S--;)n.lens[n.have++]=F}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,D={bits:n.lenbits},H=y(m,n.lens,0,n.nlen,n.lencode,0,n.work,D),n.lenbits=D.bits,H){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,D={bits:n.distbits},H=y(k,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,D),n.distbits=D.bits,H){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=u&&258<=f){e.next_out=s,e.avail_out=f,e.next_in=a,e.avail_in=u,n.hold=h,n.bits=v,p(e,A),s=e.next_out,r=e.output,f=e.avail_out,a=e.next_in,o=e.input,u=e.avail_in,h=n.hold,v=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;x=(W=n.lencode[h&(1<<n.lenbits)-1])>>>16&255,I=65535&W,!((C=W>>>24)<=v);){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}if(x&&0==(240&x)){for(L=C,N=x,B=I;x=(W=n.lencode[B+((h&(1<<L+N)-1)>>L)])>>>16&255,I=65535&W,!(L+(C=W>>>24)<=v);){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}h>>>=L,v-=L,n.back+=L}if(h>>>=C,v-=C,n.back+=C,n.length=I,0===x){n.mode=26;break}if(32&x){n.back=-1,n.mode=12;break}if(64&x){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&x,n.mode=22;case 22:if(n.extra){for(U=n.extra;v<U;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}n.length+=h&(1<<n.extra)-1,h>>>=n.extra,v-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;x=(W=n.distcode[h&(1<<n.distbits)-1])>>>16&255,I=65535&W,!((C=W>>>24)<=v);){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}if(0==(240&x)){for(L=C,N=x,B=I;x=(W=n.distcode[B+((h&(1<<L+N)-1)>>L)])>>>16&255,I=65535&W,!(L+(C=W>>>24)<=v);){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}h>>>=L,v-=L,n.back+=L}if(h>>>=C,v-=C,n.back+=C,64&x){e.msg="invalid distance code",n.mode=30;break}n.offset=I,n.extra=15&x,n.mode=24;case 24:if(n.extra){for(U=n.extra;v<U;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}n.offset+=h&(1<<n.extra)-1,h>>>=n.extra,v-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===f)break e;if(S=A-f,n.offset>S){if((S=n.offset-S)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}O=S>n.wnext?(S-=n.wnext,n.wsize-S):n.wnext-S,S>n.length&&(S=n.length),R=n.window}else R=r,O=s-n.offset,S=n.length;for(f<S&&(S=f),f-=S,n.length-=S;r[s++]=R[O++],--S;);0===n.length&&(n.mode=21);break;case 26:if(0===f)break e;r[s++]=n.length,f--,n.mode=21;break;case 27:if(n.wrap){for(;v<32;){if(0===u)break e;u--,h|=o[a++]<<v,v+=8}if(A-=f,e.total_out+=A,n.total+=A,A&&(e.adler=n.check=n.flags?_(n.check,r,A,s-A):b(n.check,r,A,s-A)),A=f,(n.flags?h:i(h))!==n.check){e.msg="incorrect data check",n.mode=30;break}v=h=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;v<32;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}if(h!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}v=h=0}n.mode=29;case 29:H=1;break e;case 30:H=-3;break e;case 31:return-4;case 32:default:return E}return e.next_out=s,e.avail_out=f,e.next_in=a,e.avail_in=u,n.hold=h,n.bits=v,(n.wsize||A!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&l(e,e.output,e.next_out,A-e.avail_out)?(n.mode=31,-4):(T-=e.avail_in,A-=e.avail_out,e.total_in+=T,e.total_out+=A,n.total+=A,n.wrap&&A&&(e.adler=n.check=n.flags?_(n.check,r,A,e.next_out-A):b(n.check,r,A,e.next_out-A)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===T&&0===A||4===t)&&H===w&&(H=-5),H)},n.inflateEnd=function(e){if(!e||!e.state)return E;var t=e.state;return t.window&&(t.window=null),e.state=null,w},n.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?E:((n.head=t).done=!1,w):E},n.inflateSetDictionary=function(e,t){var n,i=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?E:11===n.mode&&b(1,t,i,0)!==n.check?-3:l(e,t,i,i)?(n.mode=31,-4):(n.havedict=1,w):E},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(e,t,n){var i=e("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,u,c,l,f,h){var d,b,_,p,y,m,k,w,E,g=h.bits,v=0,T=0,A=0,S=0,O=0,R=0,C=0,x=0,I=0,L=0,N=null,B=0,F=new i.Buf16(16),H=new i.Buf16(16),D=null,U=0;for(v=0;v<=15;v++)F[v]=0;for(T=0;T<u;T++)F[t[n+T]]++;for(O=g,S=15;1<=S&&0===F[S];S--);if(S<O&&(O=S),0===S)return c[l++]=20971520,c[l++]=20971520,h.bits=1,0;for(A=1;A<S&&0===F[A];A++);for(O<A&&(O=A),v=x=1;v<=15;v++)if(x<<=1,(x-=F[v])<0)return-1;if(0<x&&(0===e||1!==S))return-1;for(H[1]=0,v=1;v<15;v++)H[v+1]=H[v]+F[v];for(T=0;T<u;T++)0!==t[n+T]&&(f[H[t[n+T]]++]=T);if(m=0===e?(N=D=f,19):1===e?(N=o,B-=257,D=r,U-=257,256):(N=a,D=s,-1),v=A,y=l,C=T=L=0,_=-1,p=(I=1<<(R=O))-1,1===e&&852<I||2===e&&592<I)return 1;for(;;){for(k=v-C,E=f[T]<m?(w=0,f[T]):f[T]>m?(w=D[U+f[T]],N[B+f[T]]):(w=96,0),d=1<<v-C,A=b=1<<R;c[y+(L>>C)+(b-=d)]=k<<24|w<<16|E|0,0!==b;);for(d=1<<v-1;L&d;)d>>=1;if(0!==d?(L&=d-1,L+=d):L=0,T++,0==--F[v]){if(v===S)break;v=t[n+f[T]]}if(O<v&&(L&p)!==_){for(0===C&&(C=O),y+=A,x=1<<(R=v-C);R+C<S&&!((x-=F[R+C])<=0);)R++,x<<=1;if(I+=1<<R,1===e&&852<I||2===e&&592<I)return 1;c[_=L&p]=O<<24|R<<16|y-l|0}}return 0!==L&&(c[y+L]=v-C<<24|64<<16|0),h.bits=O,0}},{"../utils/common":1}],10:[function(e,t,n){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(e,t,n){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/lib/inflate.js":[function(e,t,n){function i(e){if(!(this instanceof i))return new i(e);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==u.Z_OK)throw new Error(c[n]);if(this.header=new f,r.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=s.string2buf(t.dictionary):"[object ArrayBuffer]"===h.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=r.inflateSetDictionary(this.strm,t.dictionary))!==u.Z_OK))throw new Error(c[n])}function o(e,t){var n=new i(t);if(n.push(e,!0),n.err)throw n.msg||c[n.err];return n.result}var r=e("./zlib/inflate"),a=e("./utils/common"),s=e("./utils/strings"),u=e("./zlib/constants"),c=e("./zlib/messages"),l=e("./zlib/zstream"),f=e("./zlib/gzheader"),h=Object.prototype.toString;i.prototype.push=function(e,t){var n,i,o,c,l,f=this.strm,d=this.options.chunkSize,b=this.options.dictionary,_=!1;if(this.ended)return!1;i=t===~~t?t:!0===t?u.Z_FINISH:u.Z_NO_FLUSH,"string"==typeof e?f.input=s.binstring2buf(e):"[object ArrayBuffer]"===h.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new a.Buf8(d),f.next_out=0,f.avail_out=d),(n=r.inflate(f,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&b&&(n=r.inflateSetDictionary(this.strm,b)),n===u.Z_BUF_ERROR&&!0===_&&(n=u.Z_OK,_=!1),n!==u.Z_STREAM_END&&n!==u.Z_OK)return this.onEnd(n),!(this.ended=!0);f.next_out&&(0!==f.avail_out&&n!==u.Z_STREAM_END&&(0!==f.avail_in||i!==u.Z_FINISH&&i!==u.Z_SYNC_FLUSH)||("string"===this.options.to?(o=s.utf8border(f.output,f.next_out),c=f.next_out-o,l=s.buf2string(f.output,o),f.next_out=c,f.avail_out=d-c,c&&a.arraySet(f.output,f.output,o,c,0),this.onData(l)):this.onData(a.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(_=!0)}while((0<f.avail_in||0===f.avail_out)&&n!==u.Z_STREAM_END);return n===u.Z_STREAM_END&&(i=u.Z_FINISH),i===u.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===u.Z_OK):i!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(f.avail_out=0))},i.prototype.onData=function(e){this.chunks.push(e)},i.prototype.onEnd=function(e){e===u.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=i,n.inflate=o,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,o(e,t)},n.ungzip=o},{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js")}])},"object"==typeof t&&"object"==typeof i?i.exports=s():"function"==typeof define&&define.amd?define([],s):"object"==typeof t?t.DanmakuWebSocket=s():a.DanmakuWebSocket=s(),e("default",i.exports),i.exports.DanmakuWebSocket}),{})}}}));

System.register("chunks:///_virtual/danmaku-websocket.min.mjs_cjs=&original=.js",["./danmaku-websocket.min.js","./cjs-loader.mjs"],(function(e,t){var a,n;return{setters:[function(t){a=t.__cjsMetaURL;var n={};n.__cjsMetaURL=t.__cjsMetaURL,n.default=t.default,e(n)},function(e){n=e.default}],execute:function(){a||n.throwInvalidWrapper("./danmaku-websocket.min.js",t.meta.url),n.require(a)}}}));

System.register("chunks:///_virtual/DataManager.ts",["cc","./DevLog.ts"],(function(t){var a,s;return{setters:[function(t){a=t.cclegacy},function(t){s=t.DevLog}],execute:function(){a._RF.push({},"f684bVquu1KiKhkFZaO93MS","DataManager",void 0),t("DataManager",function(){function t(){this.userData={},this.load()}t.getInstance=function(){return t._instance||(t._instance=new t),t._instance};var a=t.prototype;return a.save=function(){var t=JSON.stringify(this.userData);localStorage.setItem("userData",t)},a.load=function(){var t=localStorage.getItem("userData");this.userData=null!=t&&""!==t?JSON.parse(t):{}},a.del=function(){localStorage.removeItem("userData")},a.getGold=function(){return null==this.userData.gold&&(this.userData.gold=0),this.userData.gold},a.setGold=function(t){this.userData.gold=t,this.save()},a.subGold=function(t){null==this.userData.gold&&(this.userData.gold=0),this.userData.gold-=t,this.save()},a.addGold=function(t){null==this.userData.gold&&(this.userData.gold=0),this.userData.gold+=t,this.save()},a.getDiamond=function(){return null==this.userData.diamond&&(this.userData.diamond=30),this.userData.diamond},a.setDiamond=function(t){this.userData.diamond=t,this.save()},a.subDiamond=function(t){null==this.userData.diamond&&(this.userData.diamond=0),this.userData.diamond-=t,this.save()},a.addDiamond=function(t){null==this.userData.diamond&&(this.userData.diamond=0),this.userData.diamond+=t,this.save()},a.getBigCheckPointCount=function(){return null==this.userData.bigCheckPointCount&&(this.userData.bigCheckPointCount=0),this.userData.bigCheckPointCount},a.setBigCheckPointCount=function(t){this.userData.bigCheckPointCount=t,this.save()},a.addBigCheckPointCount=function(){return null==this.userData.bigCheckPointCount&&(this.userData.bigCheckPointCount=0),this.userData.bigCheckPointCount++,this.save(),this.userData.bigCheckPointCount},a.subBigCheckPointCount=function(){return null==this.userData.bigCheckPointCount&&(this.userData.bigCheckPointCount=0),0===this.userData.bigCheckPointCount?0:(this.userData.bigCheckPointCount--,this.save(),this.userData.bigCheckPointCount)},a.getSmallCheckPointCount=function(){return null==this.userData.smallCheckPointCount&&(this.userData.smallCheckPointCount=0),this.userData.smallCheckPointCount},a.setSmallCheckPointCount=function(t){this.userData.smallCheckPointCount=t,this.save()},a.addSmallCheckPointCount=function(){return null==this.userData.smallCheckPointCount&&(this.userData.smallCheckPointCount=0),this.userData.smallCheckPointCount++,this.save(),this.userData.smallCheckPointCount},a.subSmallCheckPointCount=function(){return null==this.userData.smallCheckPointCount&&(this.userData.smallCheckPointCount=0),0===this.userData.smallCheckPointCount?0:(this.userData.smallCheckPointCount--,this.save(),this.userData.smallCheckPointCount)},a.getCheckPoint=function(){return{big:this.getBigCheckPointCount(),small:this.getSmallCheckPointCount()}},a.getTaskByID=function(t){return null==this.userData.taskData&&(this.userData.taskData={}),null==this.userData.taskData[t]&&(this.userData.taskData[t]={}),null==this.userData.taskData[t].curCount&&(this.userData.taskData[t].curCount=0),null==this.userData.taskData[t].maxIndex&&(this.userData.taskData[t].maxIndex=0),this.userData.taskData[t]},a.addTaskCount=function(t){return null!=this.getTaskByID(t)&&(this.userData.taskData&&this.userData.taskData[t]||(this.userData.taskData=this.userData.taskData||{},this.userData.taskData[t]={curCount:0,maxIndex:0}),this.userData.taskData[t].curCount||(this.userData.taskData[t].curCount=0),this.userData.taskData[t].curCount++,this.save(),this.userData.taskData[t].curCount)},a.nextTask=function(t){return null!=this.getTaskByID(t)&&(this.userData.taskData&&this.userData.taskData[t]||(this.userData.taskData=this.userData.taskData||{},this.userData.taskData[t]={curCount:0,maxIndex:0}),this.userData.taskData[t].curCount=0,this.userData.taskData[t].maxIndex||(this.userData.taskData[t].maxIndex=0),this.userData.taskData[t].maxIndex+=1,this.save(),this.userData.taskData[t].curCount)},a.getInternsifLevel=function(t){return null==this.userData.internsifLevel&&(this.userData.internsifLevel=[]),null==this.userData.internsifLevel[t]&&(this.userData.internsifLevel[t]=0),this.userData.internsifLevel[t]},a.addInternsifLevel=function(t){return null==this.userData.internsifLevel&&(this.userData.internsifLevel=[]),null==this.userData.internsifLevel[t]&&(this.userData.internsifLevel[t]=0),this.userData.internsifLevel[t]++,this.save(),s.debug("等级提升："+t+" "+this.userData.internsifLevel[t]+" "+this.getInternsifLevel(t)),this.userData.internsifLevel[t]},t}())._instance=void 0,a._RF.pop()}}}));

System.register("chunks:///_virtual/DataModelManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameModel.ts"],(function(e){var n,t,a,o,r,c;return{setters:[function(e){n=e.inheritsLoose,t=e.createClass},function(e){a=e.cclegacy,o=e._decorator,r=e.Component},function(e){c=e.GameModel}],execute:function(){var s,i;a._RF.push({},"c488aIRZFVPJbWAcKduEKQN","DataModelManager",void 0);var l=o.ccclass,u=(o.property,e("ModelName",function(e){return e.Game="Game",e}({})));e("DataModelManager",l("DataModelManager")(((i=function(e){function a(){for(var n,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(n=e.call.apply(e,[this].concat(a))||this).models=new Map,n}n(a,e);var o=a.prototype;return o.load=function(){a.instance.registerModel(u.Game,c)},o.registerModel=function(e,n){var t=new n;this.models.set(e,t)},o.getModel=function(e){return this.models.get(e)},t(a,null,[{key:"instance",get:function(){return this._instance||(this._instance=new a),this._instance}}]),a}(r))._instance=null,s=i))||s);a._RF.pop()}}}));

System.register("chunks:///_virtual/DateDefine.ts",["cc","./DataManager.ts"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy},function(e){n=e.DataManager}],execute:function(){t._RF.push({},"4625em1ctNLlYKqjWRBm5Ve","DateDefine",void 0);var s=e("mGlobalData",{checkPointNodePos:[{x:94,y:-114},{x:173,y:-68},{x:228,y:-156},{x:343,y:-161},{x:393,y:-64},{x:508,y:-70},{x:545,y:-159},{x:658,y:-132},{x:762,y:-156},{x:812,y:-70},{x:924,y:-101},{x:1028,y:-70},{x:1070,y:-161},{x:1190,y:-132},{x:1291,y:-159},{x:1361,y:-99},{x:1474,y:-64},{x:1535,y:-156},{x:1637,y:-156},{x:1692,y:-79},{x:1799,y:-68},{x:1841,y:-159},{x:1958,y:-132},{x:2057,y:-156},{x:2106,y:-68},{x:2216,y:-90},{x:2324,y:-68},{x:2363,y:-159},{x:2484,y:-125},{x:2590,y:-152},{x:2662,y:-101},{x:2770,y:-64},{x:2829,y:-152},{x:2937,y:-154},{x:2981,y:-70},{x:3104,y:-68},{x:3131,y:-156},{x:3249,y:-128},{x:3366,y:-163},{x:3399,y:-62},{x:3516,y:-95},{x:3624,y:-73},{x:3665,y:-156},{x:3786,y:-132},{x:3892,y:-161},{x:3962,y:-90},{x:4072,y:-73},{x:4125,y:-161},{x:4243,y:-156},{x:4285,y:-70},{x:4395,y:-70},{x:4436,y:-156},{x:4551,y:-125},{x:4656,y:-163},{x:4694,y:-73},{x:4809,y:-95},{x:4924,y:-68},{x:4966,y:-161},{x:5078,y:-130},{x:5183,y:-161},{x:5256,y:-99},{x:5371,y:-73},{x:5428,y:-154},{x:5536,y:-163},{x:5575,y:-68},{x:5690,y:-73},{x:5729,y:-156},{x:5850,y:-134},{x:5956,y:-152},{x:6002,y:-70},{x:6112,y:-97},{x:6246,y:-79},{x:6275,y:-156},{x:6394,y:-137},{x:6504,y:-161},{x:6544,y:-73},{x:6659,y:-99},{x:6767,y:-75},{x:6806,y:-161},{x:6925,y:-132},{x:7033,y:-161}],gameEndMonsterSpeed:200,currentMonsterCount:0,cannonUpLevel:[{type:6,level:0,atk:1},{type:6,level:1,atk:10},{type:6,level:2,atk:80},{type:3,level:0,atk:180},{type:6,level:1,atk:260},{type:5,level:2,atk:540},{type:3,level:0,atk:680},{type:0,level:1,atk:780},{type:0,level:2,atk:960},{type:3,level:0,atk:1100},{type:0,level:1,atk:1200},{type:0,level:2,atk:1350},{type:3,level:0,atk:1300},{type:0,level:1,atk:1550},{type:0,level:2,atk:1680},{type:3,level:0,atk:1980},{type:0,level:1,atk:2200},{type:0,level:2,atk:2800},{type:0,level:3,atk:3800},{type:0,level:4,atk:4800},{type:0,level:5,atk:6800},{type:0,level:3,atk:9800},{type:0,level:4,atk:13500},{type:0,level:5,atk:17e3}],monsterDesign:[{checkPointData:{succedGold:100,faildGold:50,diamond:20},map:{blockData:0},monster:[{type:0,id:0,hp:1e3,speed:120,gold:1},{type:0,id:1,hp:100,speed:120,gold:1},{type:0,id:1,hp:100,speed:120,gold:1},{type:0,id:1,hp:100,speed:120,gold:1},{type:0,id:1,hp:100,speed:120,gold:1},{type:1,id:0,hp:500,speed:80,gold:10},{type:0,id:2,hp:100,speed:120,gold:1},{type:0,id:3,hp:100,speed:120,gold:1},{type:0,id:4,hp:100,speed:120,gold:1},{type:1,id:1,hp:500,speed:80,gold:10},{type:0,id:6,hp:100,speed:120,gold:1},{type:0,id:6,hp:100,speed:120,gold:1},{type:0,id:7,hp:100,speed:120,gold:1},{type:0,id:8,hp:100,speed:120,gold:1},{type:0,id:8,hp:100,speed:120,gold:1},{type:0,id:8,hp:100,speed:120,gold:1},{type:1,id:9,hp:600,speed:70,gold:300}]},{checkPointData:{succedGold:200,faildGold:100,diamond:0},map:{blockData:1},monster:[{type:0,id:0,hp:10,speed:120,gold:10},{type:0,id:7,hp:10,speed:120,gold:10},{type:0,id:7,hp:10,speed:120,gold:10},{type:0,id:7,hp:10,speed:120,gold:10},{type:0,id:7,hp:10,speed:120,gold:10},{type:1,id:7,hp:50,speed:80,gold:100},{type:0,id:2,hp:10,speed:120,gold:10},{type:0,id:3,hp:10,speed:120,gold:10},{type:0,id:4,hp:10,speed:120,gold:10},{type:1,id:2,hp:50,speed:80,gold:100},{type:0,id:6,hp:10,speed:120,gold:10},{type:0,id:6,hp:10,speed:120,gold:10},{type:0,id:7,hp:10,speed:120,gold:10},{type:0,id:2,hp:10,speed:120,gold:10},{type:0,id:2,hp:10,speed:120,gold:10},{type:0,id:2,hp:10,speed:120,gold:10}]}],eachCheckPointData:[[0,1,2],[1,2,3,4,5,6],[7,8,9,10,11,12]],getData:function(e,t){if(null===e||null===t)return this.monsterDesign[this.monsterDesign.length-1].haveData=!1,this.monsterDesign[this.monsterDesign.length-1];if(e>=this.eachCheckPointData.length)return this.monsterDesign[this.monsterDesign.length-1].haveData=!1,this.monsterDesign[this.monsterDesign.length-1];if(t>=this.eachCheckPointData[e].length)return this.monsterDesign[this.monsterDesign.length-1].haveData=!1,this.monsterDesign[this.monsterDesign.length-1];var n=this.eachCheckPointData[e][t];return n>=this.monsterDesign.length?(this.monsterDesign[this.monsterDesign.length-1].haveData=!1,this.monsterDesign[this.monsterDesign.length-1]):(this.monsterDesign[n].haveData=!0,this.monsterDesign[n])},previousCheckPoint:function(){var e=n.getInstance().getCheckPoint();e.small--,e.small<0&&(e.small=0),e.big<0&&(e.big=0),n.getInstance().setBigCheckPointCount(e.big),n.getInstance().setSmallCheckPointCount(e.small)},getCurData:function(){var e=n.getInstance().getCheckPoint();return this.getData(e.big,e.small)},nextCheckPoint:function(){var e=n.getInstance().getCheckPoint();return this.isCurBossAttack()?(e.small=0,e.big++):e.small++,n.getInstance().setBigCheckPointCount(e.big),n.getInstance().setSmallCheckPointCount(e.small),this.getCurData()},getCurBlockDataID:function(){var e=n.getInstance().getCheckPoint();return this.getData(e.big,e.small).map.blockData},getCurCheckPoint:function(){var e=n.getInstance().getCheckPoint();return this.getData(e.big,e.small).checkPointData},getCurMonsterData:function(){var e=n.getInstance().getCheckPoint();return this.getData(e.big,e.small).monster},setCurMonsterCount:function(e){null!==e&&(this.currentMonsterCount=e)},getCurMonsterCount:function(){return this.currentMonsterCount},addCurMonsterCount:function(){return++this.currentMonsterCount},subCurMonsterCount:function(){return--this.currentMonsterCount},isCurBossAttack:function(){for(var e=n.getInstance().getCheckPoint(),t=this.getData(e.big,e.small),s=0;s<t.monster.length;s++)if(2===t.monster[s].type)return!0;return!1},bossName:["大嘴兽","懒懒兽","火龙怪","刺刺怪","绿发怪","紫发怪","牛头怪","猪猪兽","猫头兽","黄猫头","绿面具","黄面具","铁龟怪","智障怪","慌张怪","红丫丫","蓝丫丫","小火龙","大火龙"],getBossNameByID:function(e){return e<0||e>=s.bossName.length?s.bossName[0]:s.bossName[e]}});t._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/DebugManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResManager.ts"],(function(n){var e,t,o,i,s,r,a,l,g,u,h,c,d;return{setters:[function(n){e=n.inheritsLoose,t=n.createClass,o=n.asyncToGenerator,i=n.regeneratorRuntime},function(n){s=n.cclegacy,r=n.log,a=n.Component,l=n.Label,g=n.Button,u=n.director,h=n.instantiate,c=n.Prefab},function(n){d=n.ResManager}],execute:function(){s._RF.push({},"154d8UlSOlMvIKRjAUXQNGc","DebugManager",void 0),n("DebugManager",function(n){function s(){for(var e,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))||this).logLabel=null,e.windowRoot=null,e.showAndHideBt=null,e.isShow=!1,e.logLines=new Array,e}e(s,n);var a=s.prototype;return a.load=function(){var n=o(i().mark((function n(){var e,t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.getInstance().getAsset("FMDebug","DebugWindow",c);case 2:if(e=n.sent,t=h(e),this.node.parent.addChild(t),null!==t){n.next=7;break}return n.abrupt("return");case 7:this.windowRoot=t.getChildByName("WindowRoot"),this.logLabel=this.windowRoot.getChildByName("LogContentLabel").getComponent(l),this.logLabel.string="没有日志",this.showAndHideBt=t.getChildByName("ShowAndHide").getComponent(g),this.showAndHideBt.node.on("click",this.onToggleDebug,this),this.isShow=!0,this.onToggleDebug(),u.addPersistRootNode(t);case 15:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),a.onToggleDebug=function(){this.isShow=!this.isShow,this.isShow?this.windowRoot.active=!0:this.windowRoot.active=!1},s.log=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];for(var o="",i=0;i<arguments.length;i++)o+=arguments[i];r(o),null!==s._instance&&(s._instance.logLines.push(o),s._instance.updateDebugWindow())},a.updateDebugWindow=function(){for(var n="",e=this.logLines.length<20?this.logLines.length:20,t=0;t<e;t++)n=n+this.logLines[this.logLines.length-1-t]+"\n";this.logLabel.string=n},t(s,null,[{key:"instance",get:function(){return s._instance||(s._instance=new s),this._instance}}]),s}(a))._instance=void 0,s._RF.pop()}}}));

System.register("chunks:///_virtual/DevLog.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var i,t;return{setters:[function(n){i=n.createClass},function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"c3abdoF8c1MnYem3n393Zs9","DevLog",void 0);var e=n("DebugLevel",function(n){return n.DEBUG="[DEBUG]",n.INFO="[INFO]",n.WARN="[WARN]",n.ERROR="[ERROR]",n}({})),s=n("DevLog",function(){function n(){if(n._instance)return n._instance;n._instance=this}return n.setDebug=function(n){this.isDebug=n},n.log=function(n,i){if(void 0===i&&(i=e.DEBUG),!1!==this.isDebug)try{console.info(e.INFO+":"+n)}catch(n){console.log(e.INFO+":日志打印异常:"+n)}},n.debug=function(n){this.isDebug&&this.log(n,e.DEBUG)},n.info=function(n){this.isDebug&&this.log(n,e.INFO)},n.warn=function(n){this.isDebug&&this.log(n,e.WARN)},n.error=function(n){this.isDebug&&this.log(n,e.ERROR)},i(n,[{key:"instance",get:function(){return n._instance}}]),n}());s.isDebug=!0,s._instance=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/DiamondFlyManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MathUtils.ts"],(function(t){var e,n,o,a,i,r,l,c,s,u,d,m,g,p,h,f,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,a=t.assertThisInitialized,i=t.createClass},function(t){r=t.cclegacy,l=t._decorator,c=t.Node,s=t.instantiate,u=t.v3,d=t.UITransform,m=t.tween,g=t.Sprite,p=t.Color,h=t.Vec3,f=t.Component},function(t){v=t.MathUtils}],execute:function(){var D,_,y,M,T,b,w,C,P,S;r._RF.push({},"a34f9psyGRCz5l0oAOqrEfr","DiamondFlyManager",void 0);var z,F=l.ccclass,L=l.property;D=F("DiamondFlyManager"),_=L(c),y=L(c),M=L(c),z=D(((S=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,o(e,"m_itemDiamond",w,a(e)),o(e,"m_targetDiamond",C,a(e)),o(e,"m_targetDiamondLight",P,a(e)),e}n(e,t);var r=e.prototype;return r.onLoad=function(){e._instance?this.destroy():e._instance=this},r.start=function(){},r.createDiamondToTip=function(t,e,n,o){var a=this;void 0===o&&(o=null);var i,r=s(this.m_itemDiamond);r.setScale(u(0,0,0)),null==t?i=r.getPosition():(i=t.getWorldPosition(),i=this.node.getComponent(d).convertToNodeSpaceAR(i));var l=this.m_targetDiamond.getWorldPosition(),c=-1;v.randomNum(0,100)>50&&(c=1),r.active=!0,null==o?this.node.addChild(r):o.addChild(r);var h=[];h.push(i);var f=this.node.getComponent(d).convertToNodeSpaceAR(l),D=v.getAngle(i,f),_=v.randomNum(25,65),y=-1===c?D+_:D-_,M=v.randomNum(120,180),T=Math.cos(y*(Math.PI/180))*M,b=Math.sin(y*(Math.PI/180))*M;h.push(u(i.x+T,i.y+b,0)),h.push(f),m(r).to(.2,{scale:u(1,1,1)}).then(this.createSplineTween(r,h,1)).call((function(){if(!a.m_targetDiamond.scaleToBig){a.m_targetDiamond.scaleToBig=!0,m(a.m_targetDiamond).to(.1,{scale:u(1.5,1.5,1.5)}).to(.1,{scale:u(1,1,1)}).call((function(){a.m_targetDiamond.scaleToBig=!1})).start();var t=a.m_targetDiamondLight.getComponent(g);t&&(t.color=new p(255,255,255,0),m(t).to(.1,{color:new p(255,255,255,255)}).to(.1,{color:new p(255,255,255,0)}).start())}null!=e&&e(n),r.destroy()})).start()},r.createSplineTween=function(t,e,n){for(var o=0,a=1;a<e.length;a++)o+=h.distance(e[a-1],e[a]);for(var i=[],r=1;r<e.length;r++){var l=n*(h.distance(e[r-1],e[r])/o);i.push(m(t).to(l,{position:e[r]}))}return i.reduce((function(t,e){return t.then(e)}))},i(e,null,[{key:"instance",get:function(){return this._instance}}]),e}(f))._instance=void 0,w=e((b=S).prototype,"m_itemDiamond",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(b.prototype,"m_targetDiamond",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(b.prototype,"m_targetDiamondLight",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=b))||T,t({DiamondFlyManager:z,default:z});r._RF.pop()}}}));

System.register("chunks:///_virtual/EcsFactory.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CannonEntity.ts","./MonsterEntity.ts","./ResManager.ts","./Constants.ts","./Monster.ts","./GameManager.ts","./DateDefine.ts","./MonsterUtils.ts","./Cannon.ts","./MathUtils.ts","./BulletEntity.ts","./Bullet.ts","./BlockEntity.ts","./Block.ts","./Boot.ts","./AstarTest.ts","./Group.ts"],(function(t){var n,e,o,r,s,a,i,c,u,p,l,m,d,C,f,g,h,v,y,b,x,B,M,k,N,w,E,I;return{setters:[function(t){n=t.asyncToGenerator,e=t.regeneratorRuntime},function(t){o=t.cclegacy,r=t.Graphics,s=t.Color,a=t.instantiate,i=t.Prefab,c=t.v3,u=t.Node,p=t.Sprite,l=t.SpriteAtlas},function(t){m=t.CannonEntity},function(t){d=t.MonsterEntity},function(t){C=t.ResManager},function(t){f=t.BundleName},function(t){g=t.Monster},function(t){h=t.GameManager},function(t){v=t.mGlobalData},function(t){y=t.MonsterUtils},function(t){b=t.Cannon},function(t){x=t.MathUtils},function(t){B=t.BulletEntity},function(t){M=t.Bullet},function(t){k=t.BlockEntity},function(t){N=t.Block},function(t){w=t.Boot},function(t){E=t.default},function(t){I=t.GroupName}],execute:function(){o._RF.push({},"1de86yFTchAs5pxxbXI1OIw","EcsFactory",void 0);var D=t("EcsFactory",function(){function t(){}return t.init=function(t,n){this.monsterNode=t,this.cannonNode=n},t.createMonster=function(){var t=n(e().mark((function t(n,o){var r,s,c,u,p,l,m,b,x,B,M;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===o&&(o=I.BULE),r=new d,t.next=4,C.getInstance().getAsset(f.Role,"Monster",i);case 4:return s=t.sent,c=a(s),this.monsterNode.addChild(c),r.baseCompnent.id=this.entityID++,r.baseCompnent.gameObject=c,u=h.instance.getCurPahtList(),p=v.getCurMonsterData(),l=[],l=I.BULE==o?[].concat(u).reverse():u,r.navCompnent.pathList=l,m=y.getMosterPosition(l[0],106),b=y.getMosterPosition(l[1],106),x=b.subtract(m),B=x.length(),c.setPosition(m),r.transformComponent.x=m.x,r.transformComponent.y=m.y,r.navCompnent.speed=p[n].speed,r.navCompnent.pathIndex=1,r.navCompnent.time=B/p[n].speed,r.navCompnent.vx=r.navCompnent.speed*x.x/B,r.navCompnent.vy=r.navCompnent.speed*x.y/B,r.roleComponent.hp=p[n].hp,r.roleComponent.id=p[n].id,r.roleComponent.gold=p[n].gold,r.roleComponent.type=p[n].type,r.roleComponent.group=o,M=c.addComponent(g),t.next=34,M.init();case 34:return M.setGroup(o),M.setImage(r.roleComponent.type,r.roleComponent.id),M.setMaxHP(p[n].hp),r.collisionComponent.size=M.getSize(),w._instance.isDebug&&this.debugNode(r),t.abrupt("return",r);case 40:case"end":return t.stop()}}),t,this)})));return function(n,e){return t.apply(this,arguments)}}(),t.debugNode=function(t){var n=t.baseCompnent.gameObject;if(n){var e=n.getPosition(),o=t.collisionComponent.size,a=n.getComponent(r)||n.addComponent(r);a.fillColor=s.RED,a.rect(e.x,e.y,o.width,o.height),a.fill()}},t.createCannon=function(){var t=n(e().mark((function t(n,o){var r,s,u,p,l,d;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===o&&(o=I.BULE),r=new m,t.next=4,C.getInstance().getAsset(f.Role,"Cannon",i);case 4:return s=t.sent,u=a(s),this.cannonNode.addChild(u),r.baseCompnent.id=this.entityID++,r.baseCompnent.gameObject=u,p=106*n.x+53,l=106*-n.y-53,u.setPosition(c(p,l)),d=u.addComponent(b),t.next=15,d.init();case 15:return d.setGroupName(o),d.setRotation(x.randomNum(0,360)),0,d.createGun(0),r.moveComponent.speed=100,u.addComponent(E),t.abrupt("return",r);case 22:case"end":return t.stop()}}),t,this)})));return function(n,e){return t.apply(this,arguments)}}(),t.createBlock=function(){var t=n(e().mark((function t(){var n,o,r,s,a,i,c,m;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new k,t.next=3,C.getInstance().getAsset(f.Atlas,"block-1",l);case 3:return o=t.sent,r=h.instance.getCurBlockData(),s=new u,a=s.getComponent(p)||s.addComponent(p),i=""+r[0][0],c=o.getSpriteFrame(i),a.spriteFrame=c,n.baseCompnent.gameObject=s,n.baseCompnent.id=this.entityID++,m=s.addComponent(N),n.collisionComponent.size=m.getSize(),t.abrupt("return",n);case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),t.createBullet=function(){var t=n(e().mark((function t(n,o,r,s,c,u){var p,l,m,d,g,h;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p=new B,t.next=3,C.getInstance().getAsset(f.Role,"bullet/bullet_"+s,i);case 3:return l=t.sent,m=a(l),d="BulletLevel"+s,(g=m.getComponentInChildren(d))&&(g._attackTarget=n,g.targetPos=n.position),this.cannonNode.addChild(m),p.baseCompnent.id=this.entityID++,p.baseCompnent.gameObject=m,p.attackComponent.mAttackTarget=n,p.attackComponent.mAttackValue=c,m.setPosition(o),m.angle=r,(h=m.addComponent(M)).setGroupName(u),p.collisionComponent.size=h.getSize(),t.abrupt("return",p);case 19:case"end":return t.stop()}}),t,this)})));return function(n,e,o,r,s,a){return t.apply(this,arguments)}}(),t}());D.entityID=0,D.monsterNode=null,D.cannonNode=null,D.blockNode=null,o._RF.pop()}}}));

System.register("chunks:///_virtual/ECSWorld.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MonsterEntity.ts","./CannonEntity.ts","./EcsFactory.ts","./NavSystem.ts","./BulletEntity.ts","./SkillManager.ts","./Constants.ts","./MathUtils.ts","./AttackSystem.ts","./CollisionSystem.ts","./DevLog.ts","./MoveSystem.ts","./EventManager.ts","./Event.ts","./BulletBase.ts","./Group.ts","./Cannon.ts","./Monster.ts","./DataModelManager.ts","./GameModel.ts"],(function(t){var n,e,s,o,r,a,i,c,u,l,f,h,m,p,v,g,b,d,y,C,M,k,E,O,S,B,j,w,x;return{setters:[function(t){n=t.inheritsLoose,e=t.createForOfIteratorHelperLoose,s=t.createClass,o=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){a=t.cclegacy,i=t._decorator,c=t.Component},function(t){u=t.MonsterEntity},function(t){l=t.CannonEntity},function(t){f=t.EcsFactory},function(t){h=t.NavSystem},function(t){m=t.BulletEntity},function(t){p=t.SkillManager},function(t){v=t.BUFFER_QUANPINGGONGJI},function(t){g=t.MathUtils},function(t){b=t.AttackSystem},function(t){d=t.CollisionSystem},function(t){y=t.DevLog},function(t){C=t.MoveSystem},function(t){M=t.EventManager},function(t){k=t.WsNetEvent},function(t){E=t.BulletBase},function(t){O=t.GroupName},function(t){S=t.Cannon},function(t){B=t.Monster},function(t){j=t.DataModelManager,w=t.ModelName},function(t){x=t.GameState}],execute:function(){var A,L;a._RF.push({},"4fa20qBhLBBAquarfXNYj4z","ECSWorld",void 0);var N=i.ccclass;i.property,t("ECSWorld",N("ECSWorld")(((L=function(t){function a(){for(var n,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return(n=t.call.apply(t,[this].concat(s))||this).mEventMap={},n.monsters=[],n.cannons=[],n.bullets=[],n.blockMap=[],n}n(a,t);var i=a.prototype;return i.init=function(){this.cannons.length=0},i.onLoad=function(){if(a._instance)return y.warn("ECSWorld 清空"),void this.destroy();a._instance=this,this.initBlockMap(),this.AddEventListener(k.MESSAGE,this.wsMsg,this)},i.wsMsg=function(t){console.info("wsMsg from network:"+JSON.stringify(t))},i.AddEventListener=function(t,n,e){this.mEventMap[t]||(this.mEventMap[t]=[]);var s={func:n,self:e};this.mEventMap[t].push(s),M.getInstance().addEventListener(t,n,e)},i.getCannoList=function(){return this.cannons},i.destroyEntity=function(t){if(t instanceof u){var n=this.monsters.indexOf(t);if(n>=0){if(!this.monsters[n].baseCompnent.gameObject)return;this.monsters[n].baseCompnent.gameObject.destroy(),this.monsters.splice(n,1)}}else if(t instanceof l){var e=this.cannons.indexOf(t);if(e>=0){if(!this.cannons[e].baseCompnent.gameObject)return;this.cannons[e].baseCompnent.gameObject.destroy(),this.cannons.splice(e,1)}}else if(t instanceof m){var s=this.bullets.indexOf(t);if(s>=0){if(!this.bullets[s].baseCompnent.gameObject)return;this.bullets[s].baseCompnent.gameObject.destroy(),this.bullets.splice(s,1)}}},i.initBlockMap=function(){var t=o(r().mark((function t(){var n,e,s,o=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],e=r().mark((function t(){var e,a,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=106*s,a=r().mark((function t(){var s;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=106*i,n.push(f.createBlock().then((function(t){var n=s+53,r=-e-53;return t.baseCompnent.gameObject.setPosition(n,r),o.blockMap.push(t),t})));case 2:case"end":return t.stop()}}),t)})),i=0;case 3:if(!(i<17)){t.next=8;break}return t.delegateYield(a(),"t0",5);case 5:i++,t.next=3;break;case 8:case"end":return t.stop()}}),t)})),s=0;case 3:if(!(s<5)){t.next=8;break}return t.delegateYield(e(),"t0",5);case 5:s++,t.next=3;break;case 8:return t.next=10,Promise.all(n);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.createMonster=function(){var t=o(r().mark((function t(n,e){var s;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=O.BULE),t.next=3,f.createMonster(n,e);case 3:return s=t.sent,this.monsters.push(s),t.abrupt("return",s);case 6:case"end":return t.stop()}}),t,this)})));return function(n,e){return t.apply(this,arguments)}}(),i.createCannon=function(){var t=o(r().mark((function t(n,e){var s;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=O.BULE),t.next=3,f.createCannon(n,e);case 3:return s=t.sent,this.cannons.push(s),t.abrupt("return",s);case 6:case"end":return t.stop()}}),t,this)})));return function(n,e){return t.apply(this,arguments)}}(),i.createBullet=function(){var t=o(r().mark((function t(n,e,s,o,a,i){var c;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.createBullet(n,e,s,o,a,i);case 2:return c=t.sent,this.bullets.push(c),t.abrupt("return",c);case 5:case"end":return t.stop()}}),t,this)})));return function(n,e,s,o,r,a){return t.apply(this,arguments)}}(),i.calcNearDistance=function(t){var n=9999,e=null,s=230;p.instance.mBufferState[v]&&(s*=10);try{t.getComponent(S)}catch(t){return}for(var o=t.getComponent(S),r=0;r<this.monsters.length;r++){var a=this.monsters[r].baseCompnent.gameObject;a.active||this.destroyEntity(this.monsters[r]);try{var i=a.getComponent(B),c=(a.getPosition(),t.getPosition(),g.getDistance(a.getPosition(),t.getPosition()));o.getGroupName()!=i.getGroup()&&c<s&&c<Math.abs(n)&&(n=c,e=a)}catch(t){y.error("异常:"+t),this.destroyEntity(this.monsters[r])}}return e},i.navMonster=function(t){for(var n=0;n<this.monsters.length;n++){var e=this.monsters[n].baseCompnent.gameObject;null!=e&&e.active&&h.update(this.monsters[n],t)}},i.navBullet=function(t){for(var n=0;n<this.bullets.length;n++)h.bulletUpdate(this.bullets[n],t)},i.cannonAttack=function(t){for(var n=0;n<this.cannons.length;n++){var e=this.cannons[n];if(e.attackComponent.mFireTime-=t,!(e.attackComponent.mFireTime>0)){var s=this.calcNearDistance(e.baseCompnent.gameObject);null!=e.attackComponent.mAttackTarget&&null!=e.attackComponent.mAttackTarget||null!=s&&null!=s&&s.active&&(e.attackComponent.mAttackTarget=s),b.cannonAttackUpdate(e,t)}}},i.updateCannonMove=function(t){for(var n=0;n<this.cannons.length;n++){var e=this.cannons[n];C.update(t,e,this.blockMap)}},i.printMe=function(t){for(var n=0,s=Object.keys(t);n<s.length;n++){var o=s[n];console.log(o+":"+t[o])}for(var r,a=e(Object.getOwnPropertyNames(t));!(r=a()).done;){var i=r.value;console.log(i+":"+t[i])}for(var c,u=e(Object.getOwnPropertySymbols(t));!(c=u()).done;){var l=c.value;console.log(l.toString()+":"+t[l])}},i.bulletAttack=function(t){for(var n=this.bullets.filter((function(t){return t.baseCompnent.gameObject.getComponentInChildren(E).isDead})),e=0;e<n.length;e++)this.destroyEntity(n[e])},i.destoryAllMonster=function(){for(var t=this.monsters.length-1;t>=0;t--)this.monsters[t].baseCompnent.gameObject&&(console.info("摧毁前的monster:"+this.monsters[t].baseCompnent.gameObject),this.monsters[t].baseCompnent.gameObject.destroy(),this.monsters[t].baseCompnent.gameObject=null,console.info("摧毁后的monster:"+this.monsters[t].baseCompnent.gameObject)),this.monsters.splice(t,1)},i.checkBuletCollision=function(){for(var t=0;t<this.bullets.length;t++)if(!this.bullets[t].attackComponent.isHit)for(var n=0;n<this.monsters.length;n++)d.checkCollision(this.bullets[t],this.monsters[n])},i.update=function(t){j.instance.getModel(w.Game).state==x.Playering&&(this.navMonster(t),this.cannonAttack(t),this.bulletAttack(t),this.checkBuletCollision(),this.updateCannonMove(t))},i.onDestroy=function(){for(var t in this.mEventMap)for(var n=this.mEventMap[t],e=0;e<n.length;e++)M.getInstance().removeEventListener(t,n[e].func,n[e].self);this.mEventMap=null},s(a,null,[{key:"instance",get:function(){return this._instance}}]),a}(c))._instance=null,A=L))||A);a._RF.pop()}}}));

System.register("chunks:///_virtual/EffectBuilder.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,r,a,o,c,l,s,d,u,f,p,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createClass},function(e){o=e.cclegacy,c=e._decorator,l=e.Node,s=e.instantiate,d=e.Animation,u=e.Label,f=e.tween,p=e.v3,m=e.Component}],execute:function(){var v,y,h,_,E,b,g,H;o._RF.push({},"abdc4fHNUpNwZR/V8WGHuyN","EffectBuilder",void 0);var C,P=c.ccclass,w=c.property;v=P("EffectBuild"),y=w(l),h=w(l),C=v(((H=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"m_deadEffect",b,r(t)),i(t,"m_deadHp",g,r(t)),t}n(t,e);var o=t.prototype;return o.onLoad=function(){t._instance=this},o.createDeadEffect=function(e){var t=s(this.m_deadEffect);this.node.addChild(t),t.active=!0,t.setPosition(e);var n=t.getComponent(d);n.on(d.EventType.FINISHED,(function(){t.removeFromParent(),t.destroy()})),n.play("deadEffect")},o.createHpLabel=function(e,t){var n=s(this.m_deadHp);this.node.addChild(n),n.active=!0,n.setPosition(e),n.getComponent(u).string=t,f(n).to(.1,{scale:p(1.3,1.3,1)}).to(.1,{scale:p(1,1,1)}).call((function(){n.removeFromParent(),n.destroy()})).start()},a(t,null,[{key:"instance",get:function(){return this._instance}}]),t}(m))._instance=void 0,b=t((E=H).prototype,"m_deadEffect",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(E.prototype,"m_deadHp",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=E))||_,e({EffectBuilder:C,default:C});o._RF.pop()}}}));

System.register("chunks:///_virtual/Event.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"53214SYazdKdKrWzUuh5YBQ","Event",void 0);e("WsNetEvent",function(e){return e.CONNECTINT="connecting",e.CONNECTED="connected",e.MESSAGE="message",e.DISCONNECT="disconnect",e}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,r,a,c;return{setters:[function(n){t=n.inheritsLoose,e=n.asyncToGenerator,r=n.regeneratorRuntime},function(n){a=n.cclegacy,c=n.Component}],execute:function(){a._RF.push({},"4c160AMThNBf45fe+ps9VDB","EventManager",void 0),n("EventManager",function(n){function a(){for(var t,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return(t=n.call.apply(n,[this].concat(r))||this).mEventMap=null,t}t(a,n),a.getInstance=function(){return a._instance||(a._instance=new a),a._instance};var c=a.prototype;return c.init=function(){this.mEventMap={}},c.addEventListener=function(n,t,e){console.info(n+" "+this.mEventMap),this.mEventMap||(this.mEventMap={}),this.mEventMap[n]||(this.mEventMap[n]=[]);var r={callback:t,caller:e};this.mEventMap[n].push(r)},c.removeEventListener=function(n,t,e){if(this.mEventMap[n])for(var r=this.mEventMap[n],a=0;a<r.length;a++)if(r[a].callback===t&&r[a].caller===e){r.splice(a,1);break}},c.emit=function(){var n=e(r().mark((function n(t,e){var a,c;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.mEventMap[t]){n.next=2;break}return n.abrupt("return");case 2:a=this.mEventMap[t],c=0;case 4:if(!(c<a.length)){n.next=11;break}if("function"!=typeof a[c].callback){n.next=8;break}return n.next=8,a[c].callback.call(a[c].caller,t,e);case 8:c++,n.next=4;break;case 11:case"end":return n.stop()}}),n,this)})));return function(t,e){return n.apply(this,arguments)}}(),c.emitAll=function(){var n=e(r().mark((function n(t,e){var a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.mEventMap[t]){n.next=2;break}return n.abrupt("return");case 2:return(a=this.mEventMap[t]).map((function(n){n.callback.call(n.caller,t,e)})),n.next=6,Promise.all(a);case 6:case"end":return n.stop()}}),n,this)})));return function(t,e){return n.apply(this,arguments)}}(),a}(c))._instance=null,a._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResManager.ts","./DateDefine.ts","./MonsterBuilder.ts","./Constants.ts","./DataManager.ts","./BlockManager.ts","./CannonManager.ts","./ECSWorld.ts","./DevLog.ts","./MonsterPool.ts","./Group.ts","./MonsterUtils.ts","./DataModelManager.ts","./GameModel.ts"],(function(t){var e,a,n,r,s,o,i,u,c,l,m,p,h,d,g,f,M,D,y,_,G,C,B,P;return{setters:[function(t){e=t.inheritsLoose,a=t.createClass,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){s=t.cclegacy,o=t._decorator,i=t.v2,u=t.Component,c=t.JsonAsset},function(t){l=t.ResManager},function(t){m=t.mGlobalData},function(t){p=t.MonsterBuilder},function(t){h=t.BundleName},function(t){d=t.DataManager},function(t){g=t.BlockManager},function(t){f=t.CannonManager},function(t){M=t.ECSWorld},function(t){D=t.DevLog},function(t){y=t.MonsterPool},function(t){_=t.GroupName},function(t){G=t.MonsterUtils},function(t){C=t.DataModelManager,B=t.ModelName},function(t){P=t.GameState}],execute:function(){var v,S;s._RF.push({},"01d020X2W5HJ6XPzwCWz0Xh","GameManager",void 0);var k=o.ccclass;o.property,t("GameManager",k("GameManager")(((S=function(t){function s(){for(var e,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).m_mapData=null,e.m_gameStart=!1,e.mRedGenerateTimeSpace=0,e.mBlueGenerateTimeSpace=0,e.redPlayerCount=0,e.bluePlayerCount=0,e.mGenerateMonsterTimeSpace={red:e.redPlayerCount,blue:e.bluePlayerCount},e}e(s,t);var o=s.prototype;return o.onLoad=function(){s._instance=this,this.m_gameStart=!1,d.getInstance().load(),this.mGenerateMonsterTimeSpace=G.adjustDeploymentIntervals(this.redPlayerCount,this.bluePlayerCount)},o.load=function(){var t=n(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.getInstance().getAsset(h.Datas,"mapData",c);case 2:this.m_mapData=t.sent;case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.addRedPlayer=function(){this.redPlayerCount+=1,this.mGenerateMonsterTimeSpace=G.adjustDeploymentIntervals(this.redPlayerCount,this.bluePlayerCount)},o.addBluePlayer=function(){this.bluePlayerCount+=1,this.mGenerateMonsterTimeSpace=G.adjustDeploymentIntervals(this.redPlayerCount,this.bluePlayerCount)},o.resetPlayer=function(){this.redPlayerCount=this.bluePlayerCount=0},o.isGameStart=function(){return this.m_gameStart},o.jumpNextMap=function(t,e){var a=this,n=this.getBlockDataByIndex(e.map.blockData);g.instance.buildBlockNextMap(n),g.instance.moveToNextMap(n),M.instance.destoryAllMonster();var r=this.getPathDataByIndex(e.map.blockData);if(null!=r){var s=r[r.length-1];i(106*s.x+53,106*-s.y-53)}f.instance.jumpNextMap(),this.scheduleOnce((function(){D.debug("跳转到下一个地图"),a.playGame(!0)}),.7)},o.playGame=function(t){var e,a;void 0===t&&(t=!1);var n=!1;t&&(e=m.getCurData(),a=m.nextCheckPoint(),n=e.map.blockData!==a.map.blockData),this.m_gameStart=!0,p.instance.destroyMonster(),f.instance.clearAllCannonTarget(),console.info("是否需要跳转到下一张地图:"+n),n?this.jumpNextMap(e,a):this.scheduleOnce((function(){M.instance.destoryAllMonster()}),.5)},o.stopGame=function(){this.m_gameStart=!1},o.getCurPahtList=function(){var t=m.getCurBlockDataID();return t>=this.m_mapData.json._pathList.length&&(t=this.m_mapData.json._pathList.length-1),this.m_mapData.json._pathList[t]},o.getCurBlockData=function(){var t=m.getCurBlockDataID();return t>=this.m_mapData.json._mapBlockData.length&&(t=this.m_mapData.json._mapBlockData.length-1),this.m_mapData.json._mapBlockData[t]},o.getCurCannonPoint=function(){return this.m_mapData.json._cannonList},o.getBlockDataByIndex=function(t){return null!=this.m_mapData.json._mapBlockData[t]?this.m_mapData.json._mapBlockData[t]:null},o.getPathDataByIndex=function(t){return t>=this.m_mapData.json._pathList[t]!=null?this.m_mapData.json._pathList[t]:null},o.createMonsters=function(t,e){if(void 0===e&&(e=_.BULE),this.m_gameStart){var a=y.instance.pop();a>=m.getCurMonsterData().length&&(a=0),M.instance.createMonster(a,e)}},o.redMonsterGenerate=function(t){this.mRedGenerateTimeSpace<this.mGenerateMonsterTimeSpace.red?this.mRedGenerateTimeSpace+=t:(this.mRedGenerateTimeSpace=0,this.createMonsters(t,_.RED))},o.blueMonsterGenerate=function(t){this.mBlueGenerateTimeSpace<this.mGenerateMonsterTimeSpace.blue?this.mBlueGenerateTimeSpace+=t:(this.mBlueGenerateTimeSpace=0,this.createMonsters(t,_.BULE))},o.update=function(t){C.instance.getModel(B.Game).state==P.Playering&&(this.redMonsterGenerate(t),this.blueMonsterGenerate(t))},a(s,null,[{key:"instance",get:function(){return s._instance||(s._instance=new s),s._instance}}]),s}(u))._instance=null,v=S))||v);s._RF.pop()}}}));

System.register("chunks:///_virtual/GameModel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,a;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy,a=e._decorator}],execute:function(){n._RF.push({},"09055a46zFLU6hM+TD4tNI6","GameModel",void 0);a.ccclass,a.property;var o=e("GameState",function(e){return e[e.None=0]="None",e[e.Playering=1]="Playering",e[e.Pause=2]="Pause",e[e.End=3]="End",e}({}));e("GameModel",function(){function e(){this._state=o.None}return t(e,[{key:"state",get:function(){return this._state},set:function(e){this._state=e}}]),e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/GameUIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./DateDefine.ts","./DataManager.ts","./TopUIManager.ts","./BottomUIManager.ts","./UIManager.ts","./Constants.ts"],(function(e){var t,n,a,r,i,s,o,c,u,p,d,l,f,h,m,I,w,g,U;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.createClass,s=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){c=e.cclegacy,u=e._decorator,p=e.Node,d=e.SpriteAtlas,l=e.Component},function(e){f=e.GameManager},function(e){h=e.mGlobalData},function(e){m=e.DataManager},function(e){I=e.TopUIManager},function(e){w=e.BottomUIManager},function(e){g=e.UIManager},function(e){U=e.GUI}],execute:function(){var G,y,M,v,k,x,_,b;c._RF.push({},"9834eIXOJ9KCZYkO1xN+L+W","GameUIManager",void 0);var S=u.ccclass,C=u.property;e("GameUIManager",(G=S("GameUIManager"),y=C(p),M=C(d),G(((b=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return t=e.call.apply(e,[this].concat(i))||this,a(t,"m_coinFlyNode",x,r(t)),a(t,"m_gameUIAtlas",_,r(t)),t}n(t,e);var c=t.prototype;return c.onLoad=function(){t._instance?this.destroy():(t._instance=this,this.m_coinFlyNode.setSiblingIndex(1e3))},c.start=function(){},c.updateGameUI=function(){w.instance.updateGameUI(),I.instance.updateGameUI()},c.createBossSettlement=function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showMapView();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.showSucceed=function(){var e=s(o().mark((function e(){var t,n,a,r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.getCurCheckPoint(),m.getInstance().addGold(t.succedGold),m.getInstance().addDiamond(t.diamond),this.updateGameUI(),a=0,!h.isCurBossAttack()){e.next=11;break}a=6,(n=this.createBossSettlement()).showSucceed(t.succedGold,t.diamond),e.next=16;break;case 11:return a=2,e.next=14,g.Instance.IE_ShowUIView(U.UISettlement);case 14:(n=e.sent).showSucceed(t.succedGold,t.diamond);case 16:this.scheduleOnce(s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,!h.isCurBossAttack()){e.next=9;break}return e.next=4,r.createBossSettlement();case 4:e.sent.hideBossView(),t=!0,e.next=10;break;case 9:n.node.destroy();case 10:r.updateGameUI(),f.instance.playGame(t);case 12:case"end":return e.stop()}}),e)}))),a);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.showFaild=function(){var e=s(o().mark((function e(){var t,n,a=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Instance.IE_ShowUIView(U.UISettlement);case 2:t=e.sent,n=h.getCurCheckPoint(),m.getInstance().addGold(n.faildGold),this.updateGameUI(),t.showFaild(n.faildGold),this.scheduleOnce((function(){h.previousCheckPoint(),t.node.destroy(),a.updateGameUI(),f.instance.playGame()}),2);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.showMapView=function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Instance.IE_ShowUIView(U.UIMap);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c.hideMapView=function(){g.Instance.DestroyUIView(U.UIMap)},c.changeMapViewActive=function(){g.Instance.GetUIComponent(U.UIMap)?this.hideMapView():this.showMapView()},i(t,null,[{key:"instance",get:function(){return this._instance}}]),t}(l))._instance=void 0,x=t((k=b).prototype,"m_coinFlyNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(k.prototype,"m_gameUIAtlas",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=k))||v));c._RF.pop()}}}));

System.register("chunks:///_virtual/Group.ts",["cc"],(function(u){var t;return{setters:[function(u){t=u.cclegacy}],execute:function(){t._RF.push({},"a6909mYwwpBu4Q58av89s7n","Group",void 0);u("GroupName",function(u){return u.BULE="BLUE",u.RED="RED",u}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/GunBase.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,i,r;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,r=t.Component}],execute:function(){var c,u;e._RF.push({},"c42f4TJ9CpDzYMQf8PH34Yh","GunBase",void 0);var o,s=i.ccclass;i.property,c=s("GunBase"),o=c(u=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return(n=t.call.apply(t,[this].concat(i))||this).m_fire=!1,n.m_type=0,n.m_endCallBack=null,n.m_ATK=0,n}n(e,t);var i=e.prototype;return i.ctor=function(){this.m_fire=!1,this.m_type=0,this.m_endCallBack=null,this.m_ATK=0},i.start=function(){},i.isFire=function(){return this.m_fire},i.setFireEndCallBack=function(t,n){this.m_type=n,this.m_endCallBack=t},i.setATK=function(t){this.m_ATK=t},i.fire=function(t){},i.endFire=function(){},i.update=function(t){},e}(r))||u,t({GunBase:o,default:o});e._RF.pop()}}}));

System.register("chunks:///_virtual/GunComponent.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"a6678GI1JFP5Y158K7t5KzZ","GunComponent",void 0);n("GunComponent",(function(){this.angle=0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/GunLevel0.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GunBase.ts","./BulletLevel0.ts","./MathUtils.ts","./GameManager.ts","./BulletManager.ts"],(function(t){var e,n,i,o,l,a,r,c,s,f,u,m,_,h,d,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){l=t.cclegacy,a=t._decorator,r=t.Node,c=t.Animation,s=t.tween,f=t.Vec3,u=t.instantiate},function(t){m=t.GunBase},function(t){_=t.BulletLevel0},function(t){h=t.MathUtils},function(t){d=t.GameManager},function(t){p=t.BulletManager}],execute:function(){var v,g,y,B,b;l._RF.push({},"c04b49Te6VJerW5qxiooVRm","GunLevel0",void 0);var E=a.ccclass,G=a.property;t("GunLevel0",(v=E("GunLevel0"),g=G(r),v((b=e((B=function(t){function e(){for(var e,n=arguments.length,l=new Array(n),a=0;a<n;a++)l[a]=arguments[a];return e=t.call.apply(t,[this].concat(l))||this,i(e,"m_bullet",b,o(e)),e.m_effect=null,e.m_effectEnd=!1,e.m_fireAction=null,e.m_target=null,e}n(e,t);var l=e.prototype;return l.onLoad=function(){var t,e=this;this.m_fire=!1,this.m_effect=(null==(t=this.node.getChildByName("effect"))?void 0:t.getComponent(c))||null,this.m_effect&&this.m_effect.on(c.EventType.FINISHED,this.onEffectEnd,this);var n=s(this.node).call((function(){d.instance.isGameStart()?!e.m_effectEnd&&e.m_effect&&(e.m_effect.node.active=!0,e.m_effect.play("fire")):e.endFire()})).by(.25,{position:new f(0,-15,0)}).call((function(){e.createBullet()})).by(.25,{position:new f(0,15,0)}).call((function(){e.m_effectEnd&&(e.m_fire=!1,null!=e.m_endCallBack&&e.m_endCallBack(e.m_type))}));this.m_fireAction=n.repeatForever().start()},l.start=function(){},l.fire=function(t){this.m_fire=!0,this.m_effectEnd=!1,this.m_effect&&this.m_fireAction.start(),this.m_target=t},l.endFire=function(){this.m_effect&&(this.m_effectEnd=!0)},l.createBullet=function(){var t=u(this.m_bullet);t.active=!0,p.instance.node.addChild(t);var e=this.node.getWorldPosition();t.setWorldPosition(e),t.angle=h.getAngle(e,this.m_target.getWorldPosition());var n=t.getComponent(_);n.setATK(this.m_ATK),n.isDead=!1,n._attackTarget=this.m_target,n.targetPos=this.m_target.position,t.setWorldPosition(e)},l.hideBullet=function(){this.m_bullet.active=!1},l.onEffectEnd=function(){this.m_effect&&(this.m_effect.node.active=!1)},e}(m)).prototype,"m_bullet",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=B))||y));l._RF.pop()}}}));

System.register("chunks:///_virtual/GunLevel1.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GunBase.ts","./GameManager.ts","./BulletManager.ts","./BulletLevel1.ts","./DevLog.ts"],(function(e){var t,n,i,o,l,a,r,c,f,s,u,m,_,h,d,p,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){l=e.cclegacy,a=e._decorator,r=e.Node,c=e.instantiate,f=e.Animation,s=e.tween,u=e.Vec3,m=e.UITransform},function(e){_=e.GunBase},function(e){h=e.GameManager},function(e){d=e.BulletManager},function(e){p=e.BulletLevel1},function(e){v=e.DevLog}],execute:function(){var g,b,B,E,y,C,F;l._RF.push({},"c3b5aoRj99FbZ7JIdfUtm6c","GunLevel1",void 0);var L=a.ccclass,G=a.property;e("GunLevel1",(g=L("GunLevel1"),b=G(r),B=G(r),g((C=t((y=function(e){function t(){for(var t,n=arguments.length,l=new Array(n),a=0;a<n;a++)l[a]=arguments[a];return t=e.call.apply(e,[this].concat(l))||this,i(t,"m_bulletNode",C,o(t)),i(t,"m_boomEffect",F,o(t)),t.m_bullet=null,t.m_effect=null,t.m_fireAction=null,t.m_target=null,t.m_effectEnd=!1,t}n(t,e);var l=t.prototype;return l.onLoad=function(){var e=this;this.m_fire=!1,this.m_bullet=c(this.m_bulletNode),d.instance.node.addChild(this.m_bullet);var t=this.node.getChildByName("effect");t&&(this.m_effect=t.getComponent(f),this.m_effect.on(f.EventType.FINISHED,this.onEffectEnd,this)),this.m_fireAction=s(this.node).call((function(){if(h.instance.isGameStart()){if(!e.m_effectEnd){e.showBullet(),e.createBoomEffect(e.m_target),e.m_effect.play("fire");var t=e.m_target.getComponent("msItem");null!=t&&t.subHP(e.m_ATK)}}else e.endFire()})).to(.25,{position:new u(0,-15,0)}).call((function(){e.hideBullet()})).to(.25,{position:new u(0,0,0)}).call((function(){e.m_effectEnd&&(e.m_fire=!1,null!=e.m_endCallBack&&e.m_endCallBack(e.m_type))})).union().repeatForever()},l.start=function(){},l.fire=function(e){this.m_fire=!0,this.m_effectEnd=!1,null!=this.m_effect&&this.m_fireAction.start(),this.m_target=e,this.m_bullet._attackTarget=this.m_target},l.endFire=function(){this.m_effectEnd=!0},l.showBullet=function(){this.m_bullet.active=!0,this.m_effect.node.active=!0;var e=this.node.getWorldPosition(),t=d.instance.node.getComponent(m).convertToNodeSpaceAR(e);this.m_bullet.setPosition(t);var n=this.m_bullet.getComponent(p);v.info("Gun 创建子弹"),n._attackTarget=this.m_target,n.targetPos=this.m_target.position,n.isDead=!1,n.setATK(this.m_ATK),n.updateBullet()},l.hideBullet=function(){this.m_bullet.active=!1,this.m_effect.node.active=!1},l.createBoomEffect=function(e){var t=c(this.m_boomEffect);e.addChild(t),t.active=!0;var n=t.getComponent(f);n.play("boom"),n.on(f.EventType.FINISHED,(function(){t.removeFromParent()}))},l.update=function(e){},l.isFire=function(){return this.m_fire},l.setFireEndCallBack=function(e,t){this.m_type=t,this.m_endCallBack=e},l.onEffectEnd=function(){this.m_effect.node.active=!1},t}(_)).prototype,"m_bulletNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(y.prototype,"m_boomEffect",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=y))||E));l._RF.pop()}}}));

System.register("chunks:///_virtual/GunLevel2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GunBase.ts","./GameManager.ts","./BulletManager.ts","./MathUtils.ts","./BulletLevel2.ts"],(function(e){var t,n,i,o,a,r,l,c,s,u,f,m,d,_,h,p,v,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,l=e.Node,c=e.NodePool,s=e.Animation,u=e.tween,f=e.instantiate,m=e.UITransform,d=e.v3},function(e){_=e.GunBase},function(e){h=e.GameManager},function(e){p=e.BulletManager},function(e){v=e.MathUtils},function(e){g=e.BulletLevel2}],execute:function(){var y,B,A,C,G;a._RF.push({},"736d8cPzRtLIay+MudsD6GT","GunLevel2",void 0);var L=r.ccclass,b=r.property;e("GunLevel2",(y=L("GunLevel2"),B=b(l),y((G=t((C=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"m_bullet",G,o(t)),t.m_bulletPool=void 0,t.m_effect=void 0,t.m_effectEnd=!1,t.m_fireAction=void 0,t.m_target=void 0,t}n(t,e);var a=t.prototype;return a.onLoad=function(){var e=this;this.m_bulletPool=new c;var t=this.node.getChildByName("effect");t&&(this.m_effect=t.getComponent(s),this.m_effect.node.active=!1),this.m_fireAction=u(this.node).call((function(){h.instance.isGameStart()?e.m_effectEnd:e.endFire()})).delay(.25).call((function(){e.createBullet()})).delay(.25).call((function(){e.m_effectEnd&&(e.m_fire=!1,null!=e.m_endCallBack&&e.m_endCallBack(e.m_type))})).union().repeatForever()},a.start=function(){},a.fire=function(e){this.m_fire=!0,null!=this.m_effect&&(this.m_effectEnd=!1,this.m_fireAction.start()),this.m_target=e},a.endFire=function(){null!=this.m_effect&&(this.m_effectEnd=!0)},a.createBullet=function(){var e=f(this.m_bullet);e.active=!0,p.instance.node.addChild(e);var t=this.node.getComponent(m).convertToWorldSpaceAR(d(0,0));t=p.instance.node.getComponent(m).convertToNodeSpaceAR(t),e.angle=v.getAngle(t,this.m_target.getPosition());var n=e.getComponent(g);n.setATK(this.m_ATK),n.isDead=!1,n._attackTarget=this.m_target,n.targetPos=this.m_target.position,e.setPosition(t)},a.update=function(e){},a.isFire=function(){return this.m_fire},a.setFireEndCallBack=function(e,t){this.m_type=t,this.m_endCallBack=e},t}(_)).prototype,"m_bullet",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=C))||A));a._RF.pop()}}}));

System.register("chunks:///_virtual/GunLevel3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GunBase.ts","./GameManager.ts","./BulletManager.ts","./MathUtils.ts","./BulletLevel3.ts"],(function(e){var t,n,i,a,r,o,s,c,l,u,f,m,d,h,p,g,_,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,s=e.Node,c=e.instantiate,l=e.Sprite,u=e.UITransform,f=e.v3,m=e.TweenSystem,d=e.tween},function(e){h=e.GunBase},function(e){p=e.GameManager},function(e){g=e.BulletManager},function(e){_=e.MathUtils},function(e){v=e.BulletLevel3}],execute:function(){var B,A,F,y,G;r._RF.push({},"392d9oPBBlGLJ1g+WXa6/w2","GunLevel3",void 0);var L=o.ccclass,T=o.property;e("GunLevel3",(B=L("GunLevel3"),A=T(s),B((G=t((y=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,i(t,"m_bullet",G,a(t)),t.m_effectEnd=!1,t.m_target=void 0,t}n(t,e);var r=t.prototype;return r.onLoad=function(){this.m_effectEnd=!1,this.m_fire=!1},r.start=function(){},r.fire=function(e){this.m_target=e,this.m_effectEnd=!1,this.m_fire=!0,this.runFireAction()},r.endFire=function(){this.m_effectEnd=!0},r.createBullet=function(){var e=c(this.m_bullet),t=e.getComponent(v);t.setFrame(this.node.getComponent(l).spriteFrame),e.active=!0,g.instance.node.addChild(e);var n=this.node.getComponent(u).convertToWorldSpaceAR(f(0,0));n=g.instance.node.getComponent(u).convertToNodeSpaceAR(n),e.angle=_.getAngle(n,this.m_target.getPosition())-90,e.setPosition(n),t.setATK(this.m_ATK),t.isDead=!1,t._attackTarget=this.m_target,t.targetPos=this.m_target.position},r.runFireAction=function(){var e=this;m.instance.ActionManager.removeAllActionsFromTarget(this.node),d(this.node).call((function(){p.instance.isGameStart()||e.endFire()})).to(.25,{scale:f(1.2,.8)}).call((function(){p.instance.isGameStart()?e.createBullet():e.endFire()})).to(.1,{scale:f(1,1)}).call((function(){e.m_effectEnd&&(m.instance.ActionManager.removeAllActionsFromTarget(e.node),e.m_fire=!1,null!=e.m_endCallBack&&e.m_endCallBack(e.m_type))})).union().repeatForever().start()},r.update=function(e){},r.isFire=function(){return this.m_fire},r.setFireEndCallBack=function(e,t){this.m_type=t,this.m_endCallBack=e},t}(h)).prototype,"m_bullet",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=y))||F));r._RF.pop()}}}));

System.register("chunks:///_virtual/GunLevel4.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GunBase.ts","./GameManager.ts","./BulletManager.ts","./MathUtils.ts","./BulletLevel4.ts"],(function(e){var t,n,i,a,r,l,o,c,s,u,f,m,d,h,_,p,v,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,o=e.Node,c=e.NodePool,s=e.Animation,u=e.tween,f=e.instantiate,m=e.UITransform,d=e.v3},function(e){h=e.GunBase},function(e){_=e.GameManager},function(e){p=e.BulletManager},function(e){v=e.MathUtils},function(e){g=e.BulletLevel4}],execute:function(){var y,B,T,b,A;r._RF.push({},"4bdc5M7bT5AuKhbTvUXpFhr","GunLevel4",void 0);var C=l.ccclass,F=l.property;e("GunLevel4",(y=C("GunLevel4"),B=F(o),y((A=t((b=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,i(t,"m_bullet",A,a(t)),t.m_bulletPool=new c,t.m_effect=null,t.m_effectEnd=!1,t.m_target=void 0,t.m_fireTween=null,t}n(t,e);var r=t.prototype;return r.onLoad=function(){var e=this.node.getChildByName("effect");e&&(this.m_effect=e.getComponent(s),this.m_effect.node.active=!1),this.createFireAction()},r.start=function(){},r.createFireAction=function(){var e=this;this.m_fireTween=u(this.node).call((function(){_.instance.isGameStart()?e.m_effectEnd:e.endFire()})).delay(.25).call((function(){e.createBullet()})).delay(.25).call((function(){e.m_effectEnd&&(e.m_fire=!1,null!=e.m_endCallBack&&e.m_endCallBack(e.m_type))})).repeatForever()},r.fire=function(e){var t;(this.m_fire=!0,null!=this.m_effect)&&(this.m_effectEnd=!1,null==(t=this.m_fireTween)||t.start());this.m_target=e},r.endFire=function(){var e;null!=this.m_effect&&(this.m_effectEnd=!0,null==(e=this.m_fireTween)||e.stop())},r.createBullet=function(){var e=f(this.m_bullet);e.active=!0,p.instance.node.addChild(e);var t=this.node.getComponent(m).convertToWorldSpaceAR(d(0,0));t=p.instance.node.getComponent(m).convertToNodeSpaceAR(t),e.angle=v.getAngle(t,this.m_target.getPosition()),e.setPosition(t);var n=e.getComponent(g);n.setATK(this.m_ATK),n.isDead=!1,n._attackTarget=this.m_target,n.targetPos=this.m_target.position},r.update=function(e){},r.isFire=function(){return this.m_fire},r.setFireEndCallBack=function(e,t){this.m_type=t,this.m_endCallBack=e},t}(h)).prototype,"m_bullet",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=b))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/GunLevel5.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GunBase.ts","./BulletManager.ts","./MathUtils.ts","./BulletLevel5.ts","./ResManager.ts","./Constants.ts"],(function(t){var e,n,o,i,a,c,s,r,l,f,u,m,d,h,_,g,p,v;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){i=t.cclegacy,a=t._decorator,c=t.Animation,s=t.tween,r=t.v3,l=t.NodePool,f=t.instantiate,u=t.UITransform,m=t.Prefab},function(t){d=t.GunBase},function(t){h=t.BulletManager},function(t){_=t.MathUtils},function(t){g=t.BulletLevel5},function(t){p=t.ResManager},function(t){v=t.BundleName}],execute:function(){var y;i._RF.push({},"2270dtbqolIybK2yvv+9lU9","GunLevel5",void 0);var B=a.ccclass;a.property,t("GunLevel5",B("GunLevel5")(y=function(t){function i(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).m_bulletPool=new l,e.m_effect=null,e.m_effectEnd=!1,e.m_target=void 0,e}e(i,t);var a=i.prototype;return a.onLoad=function(){var t=this.node.getChildByName("effect");t&&(this.m_effect=t.getComponent(c),this.m_effect.on(c.EventType.FINISHED,this.onEffectEnd,this))},a.start=function(){},a.fire=function(t){var e=this;console.log("fire"),this.m_fire=!0,null!=this.m_effect&&(this.m_effectEnd=!1,s(this.node).call((function(){e.m_effectEnd||(e.m_effect.node.active=!0,e.m_effect.play("fire"))})).to(.25,{position:r(0,-15)}).call((function(){e.createBullet()})).to(.25,{position:r(0,0)}).call((function(){e.m_fire=!1,null!=e.m_endCallBack&&e.m_endCallBack(e.m_type)})).start()),this.m_target=t},a.endFire=function(){console.log("endFire",this.m_effect),null!=this.m_effect&&(this.m_effectEnd=!0)},a.createBullet=function(){var t=n(o().mark((function t(){var e,n,i,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.getInstance().getAsset(v.Role,"bullet/bullet_5",m);case 2:e=t.sent,(n=f(e)).active=!0,h.instance.node.addChild(n),i=this.node.getComponent(u).convertToWorldSpaceAR(r(0,0)),i=h.instance.node.getComponent(u).convertToNodeSpaceAR(i),n.angle=_.getAngle(i,this.m_target.getPosition()),(a=n.getComponent(g)).setATK(this.m_ATK),a.isDead=!1,a._attackTarget=this.m_target,a.targetPos=this.m_target.position,n.setPosition(i);case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.update=function(t){},a.onEffectEnd=function(){this.m_effect.node.active=!1},i}(d))||y);i._RF.pop()}}}));

System.register("chunks:///_virtual/GunLevel6.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GunBase.ts","./BulletManager.ts","./MathUtils.ts","./BulletLevel6.ts","./ResManager.ts","./Constants.ts"],(function(t){var e,n,o,i,a,c,s,r,l,f,u,m,d,h,g,_,p;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){i=t.cclegacy,a=t._decorator,c=t.Animation,s=t.tween,r=t.v3,l=t.instantiate,f=t.UITransform,u=t.Prefab},function(t){m=t.GunBase},function(t){d=t.BulletManager},function(t){h=t.MathUtils},function(t){g=t.BulletLevel6},function(t){_=t.ResManager},function(t){p=t.BundleName}],execute:function(){var v;i._RF.push({},"0f842aqWSxP0Yda6cPFR6/6","GunLevel6",void 0);var B=a.ccclass;a.property,t("GunLevel6",B("GunLevel6")(v=function(t){function i(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).m_effect=null,e.m_effectEnd=!1,e.m_target=void 0,e}e(i,t);var a=i.prototype;return a.onLoad=function(){var t=this.node.getChildByName("effect");t&&(this.m_effect=t.getComponent(c),this.m_effect.on(c.EventType.FINISHED,this.onEffectEnd,this))},a.start=function(){},a.fire=function(t){var e=this;console.log("fire"),this.m_fire=!0,null!=this.m_effect&&(this.m_effectEnd=!1,s(this.node).call((function(){e.m_effectEnd||(e.m_effect.node.active=!0)})).to(.25,{position:r(0,-15)}).call((function(){e.createBullet()})).to(.25,{position:r(0,0)}).call((function(){e.m_fire=!1,null!=e.m_endCallBack&&e.m_endCallBack(e.m_type)})).start()),this.m_target=t},a.endFire=function(){console.log("endFire",this.m_effect),null!=this.m_effect&&(this.m_effectEnd=!0)},a.createBullet=function(){var t=n(o().mark((function t(){var e,n,i,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.getInstance().getAsset(p.Role,"bullet/bullet_6",u);case 2:e=t.sent,(n=l(e)).active=!0,d.instance.node.addChild(n),i=this.node.getComponent(f).convertToWorldSpaceAR(r(0,0)),i=d.instance.node.getComponent(f).convertToNodeSpaceAR(i),n.angle=h.getAngle(i,this.m_target.getPosition()),(a=n.getComponent(g)).setATK(this.m_ATK),a.isDead=!1,a._attackTarget=this.m_target,a.targetPos=this.m_target.position,n.setPosition(i);case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.update=function(t){},a.onEffectEnd=function(){this.m_effect.node.active=!1},i}(m))||v);i._RF.pop()}}}));

System.register("chunks:///_virtual/HpEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RandomUtils.ts"],(function(t){var e,n,o,i,r,c,a,s,f,p,u,l,d,h,m,v,y,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.createClass},function(t){c=t.cclegacy,a=t._decorator,s=t.Node,f=t.NodePool,p=t.instantiate,u=t.Label,l=t.UIOpacity,d=t.v2,h=t.Vec2,m=t.tween,v=t.Vec3,y=t.Component},function(t){g=t.RandomUtils}],execute:function(){var E,I,H,P,R,w;c._RF.push({},"b571cEnIPJD0qS/dWV88vTQ","HpEffect",void 0);var _,b=a.ccclass,C=a.property;E=b("HpEffect"),I=C(s),_=E(((w=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r))||this,o(e,"mHpEffectItem",R,i(e)),e.hpEffectPool=new f,e}n(e,t);var c=e.prototype;return c.onLoad=function(){e._instance=this},c.createHpEffect=function(t,e){var n,o=this,i=(n=this.hpEffectPool.size()>0?this.hpEffectPool.get():p(this.mHpEffectItem)).getComponent(u);i&&(i.string=e),n.active=!0,n.setPosition(t.x,t.y,0);var r=n.getComponent(l);r||(r=n.addComponent(l)),r.opacity=255,this.node.addChild(n);var c=g.getRandomInt(0,100)>50?1:-1,a=[];a.push(d(0,0));var s=g.getRandomInt(0,50),f=g.getRandomInt(50,130);a.push(d(s*c,f)),s=g.getRandomInt(60,100),f=g.getRandomInt(10,40),a.push(d(s*c,-f));var v=a.map((function(t){return new h(t.x,t.y)}));this.createSplineTween(n,v,.5),m(r).delay(.3).to(.2,{opacity:0}).call((function(){o.hpEffectPool.put(n)})).start()},c.createSplineTween=function(t,e,n){for(var o=e.reduce((function(t,n,o){return 0===o?t:t+h.distance(e[o-1],n)}),0),i=[],r=1;r<e.length;r++){var c=n*(h.distance(e[r-1],e[r])/o);i.push(m(t).to(c,{position:new v(e[r].x,e[r].y,0)}))}return i.reduce((function(t,e){return t.then(e)}))},r(e,null,[{key:"instance",get:function(){return this._instance}}]),e}(y))._instance=void 0,R=e((P=w).prototype,"mHpEffectItem",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=P))||H,t({HpEffect:_,default:_});c._RF.pop()}}}));

System.register("chunks:///_virtual/index.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./EventManager.ts","./danmaku-websocket.min.mjs_cjs=&original=.js","./danmaku-websocket.min.js"],(function(e){var n,o,t,r,c;return{setters:[function(e){n=e.extends},function(e){o=e.cclegacy},function(e){t=e.BarrageEventName},function(e){r=e.EventManager},null,function(e){c=e.default}],execute:function(){var s;function u(e,n){var o=n[0],t=n,r=JSON.parse(e);return{url:o,urlList:t,customAuthParam:[{key:"key",value:r.key,type:"string"},{key:"group",value:r.group,type:"string"}],rid:r.roomid,protover:r.protoover,uid:r.uid}}function i(){console.log("destroy1"),s&&s.destroy(),s=void 0,console.log("destroy2")}e({createSocket:function(e,o){var a=n({},u(e,o),{onReceivedMessage:function(e){console.log("弹幕内容是:"+e),r.getInstance().emit(t.Barrage,e)},onHeartBeatReply:function(e){return console.log("收到心跳处理回调:",e)},onError:function(e){return console.log("error",e)},onListConnectError:function(){console.log("list connect error"),i()}});s||(s=new c(a));return s},destroySocket:i,getWebSocketConfig:u,getWsClient:function(){return s}}),o._RF.push({},"7ab9cpnQ/tK9IhIFyYiAG0s","index",void 0),o._RF.pop()}}}));

System.register("chunks:///_virtual/IntensifyDataManager.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"26001kaAtxLca8ssXZB7ZtC","IntensifyDataManager",void 0);t("mIntensifyManager",new(function(){function t(){this.data=[{title:"补给站容量扩充",value:[10,11,12,13,14,15,16,17,18,19,20,21],diamond:[5,15,20,30,50,80,120,160,200,250,320,500],icon:"ui_g_libraryCount",showPer:!1},{title:"炮台暴击提升",value:[1,2,3,3.5,4],diamond:[5,15,20,30,50],icon:"ui_g_crit",showPer:!0}]}var n=t.prototype;return n.getData=function(){return this.data},n.getIntensifyDataByID=function(t){return t<0||t>=this.data.length?null:this.data[t]},n.getTitle=function(t){var n=this.getIntensifyDataByID(t);return n?n.title:null},n.getIcon=function(t){var n=this.getIntensifyDataByID(t);return n?n.icon:null},n.getValue=function(t,n){var e=this.getIntensifyDataByID(t);return!e||n<0||n>=e.value.length?null:e.value[n]},n.getDiamond=function(t,n){var e=this.getIntensifyDataByID(t);return!e||n<0||n>=e.diamond.length?null:e.diamond[n]},t}()));n._RF.pop()}}}));

System.register("chunks:///_virtual/IntensifyItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./IntensifyDataManager.ts","./GameUIManager.ts","./DataManager.ts"],(function(e){var t,n,i,a,r,l,u,o,s,m,c,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,u=e.Label,o=e.Sprite,s=e.Button,m=e.Component},function(e){c=e.mIntensifyManager},function(e){p=e.GameUIManager},function(e){f=e.DataManager}],execute:function(){var I,g,_,h,v,D,b,y,d,L,B,z,w,M,F;r._RF.push({},"f6a37nrhBpDZL71z4fSFpr9","IntensifyItem",void 0);var U=l.ccclass,S=l.property;e("IntensifyItem",(I=U("IntensifyItem"),g=S(u),_=S(o),h=S(u),v=S(u),D=S(s),b=S(u),I((L=t((d=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,i(t,"m_title",L,a(t)),i(t,"m_icon",B,a(t)),i(t,"m_lvLabel",z,a(t)),i(t,"m_preLabel",w,a(t)),i(t,"m_upLevelButton",M,a(t)),i(t,"m_needDiamond",F,a(t)),t.m_ID=0,t}n(t,e);var r=t.prototype;return r.start=function(){},r.updateItem=function(){this.m_upLevelButton.interactable=!0;var e=c.getIntensifyDataByID(this.m_ID);if(null!=e){var t=c.getTitle(this.m_ID);this.setTitle(t);var n=c.getIcon(this.m_ID),i=p.instance.m_gameUIAtlas.getSpriteFrame(n);this.m_icon.spriteFrame=i;var a=f.getInstance().getInternsifLevel(this.m_ID);a>=e.value.length&&(a=e.value.length-1,this.m_upLevelButton.interactable=!1);var r=c.getDiamond(this.m_ID,a);f.getInstance().getDiamond()<r&&(this.m_upLevelButton.interactable=!1),this.m_needDiamond.string=""+r,this.m_lvLabel.string="Lv."+(a+1);var l=c.getValue(this.m_ID,a),u=c.getValue(this.m_ID,a+1),o="";e.showPer&&(o="%"),this.m_preLabel.string=null==u?""+l+o+" - MAX":""+l+o+" - "+u+o}},r.setID=function(e){this.m_ID=e},r.setTitle=function(e){this.m_title.string=e},r.onClickUp=function(){var e=c.getIntensifyDataByID(this.m_ID);if(null!=e){var t=f.getInstance().getInternsifLevel(this.m_ID);if(t>=e.value.length)return t=e.value.length-1,void(this.m_upLevelButton.interactable=!1);var n=c.getDiamond(this.m_ID,t);f.getInstance().getDiamond()<n?this.m_upLevelButton.interactable=!1:(f.getInstance().subDiamond(n),f.getInstance().addInternsifLevel(this.m_ID),p.instance.updateGameUI(),this.updateItem())}},r.update=function(e){},t}(m)).prototype,"m_title",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(d.prototype,"m_icon",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(d.prototype,"m_lvLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(d.prototype,"m_preLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(d.prototype,"m_upLevelButton",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(d.prototype,"m_needDiamond",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=d))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/IntensifyView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./IntensifyDataManager.ts","./IntensifyItem.ts"],(function(t){var e,n,i,a,o,r,c,s,u,m,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,c=t.Node,s=t.instantiate,u=t.Component},function(t){m=t.mIntensifyManager},function(t){l=t.IntensifyItem}],execute:function(){var f,h,p,d,I,_,y;o._RF.push({},"0a949pWXVdCe6mr6B1ljk9s","IntensifyView",void 0);var v=r.ccclass,g=r.property;t("IntensifyView",(f=v("IntensifyView"),h=g(c),p=g(c),f((_=e((I=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"m_cloneItem",_,a(e)),i(e,"m_content",y,a(e)),e.m_item=[],e}n(e,t);var o=e.prototype;return o.onLoad=function(){this.m_cloneItem.active=!1,this.updateData()},o.start=function(){},o.show=function(){this.updateData(),this.node.active=!0},o.hide=function(){this.node.active=!1},o.updateData=function(){for(var t=0;t<this.m_item.length;t++)this.m_item[t].node.active=!1;for(var e=m.getData(),n=0;n<e.length;n++)null==this.m_item[n]&&(this.m_item[n]=this.createItem(n)),this.m_item[n].node.active=!0,this.m_item[n].setID(n),this.m_item[n].updateItem()},o.createItem=function(t){var e=s(this.m_cloneItem);this.m_content.addChild(e),e.active=!0;var n=e.getComponent(l);return n.setID(t),n},o.update=function(t){},e}(u)).prototype,"m_cloneItem",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(I.prototype,"m_content",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=I))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/iSDK.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"101026XfeBJ24ESIGDMSBgL","iSDK",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/LeaderboardView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIComponent.ts","./DevLog.ts","./Constants.ts","./Barrage.ts"],(function(e){var t,n,r,a,i,o,s,l,u,c,p,d,m,h,g,f,b,y,C,I,B;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,u=e.Prefab,c=e.Node,p=e.Button,d=e.instantiate,m=e.Vec3,h=e.Label,g=e.Sprite,f=e.resources,b=e.SpriteFrame},function(e){y=e.UIComponent},function(e){C=e.DevLog},function(e){I=e.UIEventName},function(e){B=e.Barrage}],execute:function(){var v,k,R,w,N,L,_,x,S,F,z,D,E,M,P,U,V;s._RF.push({},"83328p4WLdKa4QXclBXEwCX","LeaderboardView",void 0);var T=l.ccclass,A=l.property;e("Rankview",(v=T("Rankview"),k=A(u),R=A(c),w=A(c),N=A(p),L=A(p),_=A(p),x=A(c),v((z=t((F=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,r(t,"leaderboardItem",z,a(t)),r(t,"content",D,a(t)),r(t,"playerItem",E,a(t)),r(t,"easyButton",M,a(t)),r(t,"normalButton",P,a(t)),r(t,"hardButton",U,a(t)),r(t,"tips",V,a(t)),t._leaderboardId="",t._secretId="",t._secretKey="",t._appId="",t._envId="",t._zfbCloud=null,t._playId=null,t._userName="",t._url="",t._extends="",t._score=null,t.rankList=[],t.currentIndex=0,t}n(t,e);var s=t.prototype;return s.onLoad=function(){this.rankList=B.getInstance().getPlayers()},s.onEnable=function(){var e=this;console.log("onEnable called"),this.currentIndex=0,this.updateView(this.rankList.slice(this.currentIndex,this.currentIndex+5),this.currentIndex);var t=setInterval((function(){if(e.currentIndex+=5,e.currentIndex>=e.rankList.length)return e.currentIndex=0,clearInterval(t),void e.EmitEventListener(I.restartGameUI);var n=e.rankList.slice(e.currentIndex,e.currentIndex+5);e.updateView(n,e.currentIndex)}),5e3)},s.update=function(e){},s.startGame=function(e,t){var n=this;this.updateFakeData(),this.easyButton.getComponent(p).interactable=!1,this.normalButton.getComponent(p).interactable=!1,this.hardButton.getComponent(p).interactable=!1,setTimeout((function(){n.easyButton.getComponent(p).interactable=!0,n.normalButton.getComponent(p).interactable=!0,n.hardButton.getComponent(p).interactable=!0}),1e3)},s.updateFakeData=function(){var e=Math.floor(80*Math.random())+20;console.log("分数："+e),this._score=e},s.updateView=function(){var e=i(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._score,this.updateTable(t,n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),s.updateTable=function(){var e=i(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.content.removeAllChildren(),r=0;r<t.length;r++)C.debug("当前排名："+(r+1)+"，分数："+t[r].score),this.updateLeaderboardItem(t[r],r+n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),s.updateLeaderboardItem=function(e,t){var n=d(this.leaderboardItem);switch(n.parent=this.content,n.position=new m(-0,-30-40*t),this.content.addChild(n),C.debug("当前inde:"+t),t){case 0:this.loadResourceSprite(n.getChildByName("Rank").getComponent(g),"images/first/spriteFrame");break;case 1:this.loadResourceSprite(n.getChildByName("Rank").getComponent(g),"images/second/spriteFrame");break;case 2:this.loadResourceSprite(n.getChildByName("Rank").getComponent(g),"images/third/spriteFrame");break;default:n.getChildByName("RankLabel").getComponent(h).string=String(t+1),n.removeChild(n.getChildByName("Rank"))}n.getChildByName("UserInfo").getChildByName("Name").getComponent(h).string=e&&e.getName()?null==e?void 0:e.getName():"神秘勇士",n.getChildByName("Score").getComponent(h).string=e&&e.score?e.score:0;var r=Math.floor(4*Math.random())+1;this.loadResourceSprite(n.getChildByPath("UserInfo/Mask/Avator").getComponent(g),"images/avator"+r+"/spriteFrame")},s.updatePlayerItem=function(e,t){switch(t){case 0:this.loadResourceSprite(this.playerItem.getChildByName("Rank").getComponent(g),"sprites/first/spriteFrame"),this.playerItem.getChildByName("RankLabel").getComponent(h).string="";break;case 1:this.loadResourceSprite(this.playerItem.getChildByName("Rank").getComponent(g),"sprites/second/spriteFrame"),this.playerItem.getChildByName("RankLabel").getComponent(h).string="";break;case 2:this.loadResourceSprite(this.playerItem.getChildByName("Rank").getComponent(g),"sprites/third/spriteFrame"),this.playerItem.getChildByName("RankLabel").getComponent(h).string="";break;default:this.playerItem.getChildByName("RankLabel").getComponent(h).string=String(t+1),this.playerItem.getChildByName("Rank").getComponent(g).spriteFrame=null}this.playerItem.getChildByName("Score").getComponent(h).string=e&&e.score?e.score:0},s.loadResourceSprite=function(e,t){f.load(t,b,(function(t,n){t?console.log("出现异常："+t):e.spriteFrame=n}))},t}(y)).prototype,"leaderboardItem",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(F.prototype,"content",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(F.prototype,"playerItem",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(F.prototype,"easyButton",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(F.prototype,"normalButton",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(F.prototype,"hardButton",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(F.prototype,"tips",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=F))||S));s._RF.pop()}}}));

System.register("chunks:///_virtual/LoginScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SceneManager.ts","./UIManager.ts","./MonsterUtils.ts","./UIComponent.ts","./Constants.ts","./Barrage.ts"],(function(e){var t,n,r,i,a,o,c,s,u,m,l,f,p,h,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){c=e.cclegacy,s=e._decorator,u=e.Label},function(e){m=e.SceneManager},function(e){l=e.UIManager},function(e){f=e.MonsterUtils},function(e){p=e.UIComponent},function(e){h=e.BarrageEventName},function(e){g=e.Barrage}],execute:function(){var I,S,T,d,v;c._RF.push({},"385b4Vw5QZFjrOA/eF4u9BB","LoginScene",void 0);var y=s.ccclass,w=s.property;e("loginScene",(I=y("loginScene"),S=w(u),I((v=t((d=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).mTimeData=20,t.mMaxTime=20,r(t,"mTime",v,i(t)),t}n(t,e);var c=t.prototype;return c.onLoad=function(){g.getInstance().clearAll(),this.AddEventListener(h.GameStart,this.gameStart,this)},c.gameStart=function(){var e=a(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.getInstance().enterScene("main"),e.next=3,l.Instance.IE_ShowUIView("UIGame");case 3:this.node.destroy();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.start=function(){this.mTimeData=20,this.mMaxTime=20},c.update=function(e){0!==this.mTimeData&&(this.mTimeData-=e,this.mTimeData<=0?(this.clickLogin(),this.mTimeData=this.mMaxTime):this.mTime.string="开始游戏("+f.formatSeconds(this.mTimeData)+"秒)")},c.clickLogin=function(){var e=a(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.getInstance().enterScene("main"),e.next=3,l.Instance.IE_ShowUIView("UIGame");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t}(p)).prototype,"mTime",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=d))||T));c._RF.pop()}}}));

System.register("chunks:///_virtual/LogType.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"7fe67DyLBpOXKiw/OoeGniF","LogType",void 0);e("LogType",function(e){return e[e.INFO=0]="INFO",e[e.WARNING=1]="WARNING",e[e.ERROR=2]="ERROR",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./Boot.ts","./Config.ts","./BlockManager.ts","./BulletManager.ts","./CannonManager.ts","./CoinFlyManager.ts","./Constants.ts","./Crown.ts","./CrownManager.ts","./DataManager.ts","./DateDefine.ts","./DiamondFlyManager.ts","./EffectBuilder.ts","./GameManager.ts","./HpEffect.ts","./MonsterBuilder.ts","./MonsterItem.ts","./MonsterPool.ts","./SkillManager.ts","./BulletBase.ts","./GunBase.ts","./BulletLevel0.ts","./BulletLevel1.ts","./BulletLevel2.ts","./BulletLevel3.ts","./BulletLevel4.ts","./BulletLevel5.ts","./BulletLevel6.ts","./GunLevel0.ts","./GunLevel1.ts","./GunLevel2.ts","./GunLevel3.ts","./GunLevel4.ts","./GunLevel5.ts","./GunLevel6.ts","./MonsterComp.ts","./ECSWorld.ts","./EcsFactory.ts","./AttackComponent.ts","./BaseComponent.ts","./CollisionComponent.ts","./GunComponent.ts","./MoveComponent.ts","./NaviComponent.ts","./PlayerComponent.ts","./RoleComponent.ts","./TransformComponent.ts","./BaseEntity.ts","./BlockEntity.ts","./BulletEntity.ts","./CannonEntity.ts","./MonsterEntity.ts","./AttackSystem.ts","./CollisionSystem.ts","./MoveSystem.ts","./NavSystem.ts","./Map.ts","./MapGameData.ts","./MapTile.ts","./MapTiles.ts","./AstarTest.ts","./SimpleAstar.ts","./DataModelManager.ts","./GameModel.ts","./Group.ts","./IntensifyDataManager.ts","./TaskDataManager.ts","./BaseArea.ts","./Block.ts","./Bullet.ts","./Cannon.ts","./Monster.ts","./LoginScene.ts","./MainScene.ts","./StartScene.ts","./BossViewManager.ts","./BottomUIManager.ts","./GameUIManager.ts","./IntensifyItem.ts","./IntensifyView.ts","./LeaderboardView.ts","./MapView.ts","./Settlement.ts","./TaskItem.ts","./TaskView.ts","./TopUIManager.ts","./UIAttackUpLeftUICtrl.ts","./UIAttackUpRightUICtrl.ts","./UIBossUICtrl.ts","./UIGameUICtrl.ts","./UIHpUpLeftUICtrl.ts","./UIHpUpRightUICtrl.ts","./UIIntensifyUICtrl.ts","./UIJoinLeftUICtrl.ts","./UIJoinRightUICtrl.ts","./UILifeUpLeftUICtrl.ts","./UILifeUpRightUICtrl.ts","./UIMapUICtrl.ts","./UIRetoreUpLeftUICtrl.ts","./UIRetoreUpRightUICtrl.ts","./UIRunUpLeftUICtrl.ts","./UIRunUpRightUICtrl.ts","./UISettlementUICtrl.ts","./UIStartUICtrl.ts","./UITaskUICtrl.ts","./UITaskItem.ts","./UITntensifyItem.ts","./MonsterUtils.ts","./BiliBiliManager.ts","./DebugManager.ts","./EventManager.ts","./ResManager.ts","./SceneManager.ts","./SoundManager.ts","./TimerManager.ts","./UIManager.ts","./WsNetManager.ts","./Event.ts","./LogType.ts","./UIComponent.ts","./DevLog.ts","./MathUtils.ts","./RandomUtils.ts","./axios.mjs_cjs=&original=.js","./webapi.ts","./Barrage.ts","./BiliCmd.ts","./BiliPlayer.ts","./api.ts","./danmaku-websocket.min.mjs_cjs=&original=.js","./index.ts","./request.ts","./iSDK.ts","./ttSDK.ts","./wxSDK.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainScene.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,c,r;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,c=e._decorator,r=e.Component}],execute:function(){var i;t._RF.push({},"04d8e9RZexPjK8ZMGgLemB3","MainScene",void 0);var o=c.ccclass;c.property,e("MainScene",o("MainScene")(i=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(r))||i);t._RF.pop()}}}));

System.register("chunks:///_virtual/Map.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MapTiles.ts"],(function(t){var e,n,a,i,r,s;return{setters:[function(t){e=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){a=t.cclegacy,i=t.resources,r=t.error},function(t){s=t.default}],execute:function(){a._RF.push({},"db165RRdohJ74Yk7i45wiff","Map",void 0);t("default",function(){function t(t){this.tiles=void 0,this.node=void 0,this.mapData=void 0,this.node=t}var a=t.prototype;return a.init=function(){var t=e(n().mark((function t(e){var a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this,t.next=3,new Promise((function(t){i.load("/map/"+e+"/data",(function(e,n){e&&(r(e.message||e),t());var i=n.json;a.mapData=i,t()}))}));case 3:this.tiles=new s(this.node),this.tiles.init(e,this.mapData),this.updateCameraPos(0,0);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),a.updateCameraPos=function(t,e){this.tiles.updateCameraPos(t,e)},a.getMapData=function(){return this.mapData},t}());a._RF.pop()}}}));

System.register("chunks:///_virtual/MapGameData.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"7b67ck7c4hI24CC7LQirS3w","MapGameData",void 0);var a=e("default",(function(){}));a.GameTileWidth=636,a.GameTileHeight=636,a.GameCellWidth=106,a.GameCellHeight=106,a.GameAoiWidth=636,a.GameAoiHeight=636,a.WalkSpeed=3,t._RF.pop()}}}));

System.register("chunks:///_virtual/MapTile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MapGameData.ts"],(function(e){var i,t,o,s,r,a,n,l;return{setters:[function(e){i=e.inheritsLoose},function(e){t=e.cclegacy,o=e.view,s=e.resources,r=e.log,a=e.SpriteFrame,n=e.Sprite},function(e){l=e.default}],execute:function(){t._RF.push({},"c3da09q9XdGBbY6z7wI/Bjs","MapTile",void 0);e("default",function(e){function t(){var i;return(i=e.call(this)||this).col=void 0,i.row=void 0,i.tileResKey=void 0,i.spriteFrame=void 0,i.texture=void 0,i}i(t,e);var n=t.prototype;return n.init=function(e,i,t){this.col=i,this.row=t;var n=o.getVisibleSize(),c=n.width,u=n.height;this.node.x=this.col*l.GameTileWidth-c/2+l.GameTileWidth/2,this.node.y=u/2-this.row*l.GameTileHeight-l.GameTileHeight/2;var h="/map/"+e+"/"+(t+"_"+i);this.tileResKey=h;var d=this;s.load(h,(function(e,i){e?r(e.message):d.spriteFrame=new a(i)}))},n.destory=function(){s.release(this.tileResKey)},t}(n));t._RF.pop()}}}));

System.register("chunks:///_virtual/MapTiles.ts",["cc","./MapGameData.ts","./MapTile.ts"],(function(i){var t,e,s,h;return{setters:[function(i){t=i.cclegacy,e=i.view},function(i){s=i.default},function(i){h=i.default}],execute:function(){t._RF.push({},"1e4311BYGhKppOO0Wkavwbo","MapTiles",void 0);i("default",function(){function i(i){this.mapId=void 0,this.tiles=[],this.screenTiles=[],this.cols=void 0,this.rows=void 0,this.node=void 0,this.node=i}var t=i.prototype;return t.init=function(i,t){this.mapId=i,this.cols=Math.floor(t.width/s.GameTileWidth),this.rows=Math.floor(t.height/s.GameTileHeight)},t.updateCameraPos=function(i,t){var o=Math.round(i/s.GameTileWidth),a=Math.round(t/s.GameTileHeight),n=e.getVisibleSize(),l=n.width,r=n.height,d=Math.ceil(l/s.GameTileWidth)+1,c=Math.ceil(r/s.GameTileHeight)+1,u=o-d,f=o+d;u<0&&(f+=-u,u=0),f>this.cols&&(u-=f-this.cols,f=this.cols);var v=a-c,p=a+c;v<0&&(p+=-v,v=0),p>this.rows&&(v-=p-this.rows,p=this.rows);for(var m=[],T=u;T<=f;T++)for(var w=v;w<=p;w++){var M=T+"_"+w,g=this.tiles[M];if(!g){var G=new Node;this.node.addChild(G),(g=G.addComponent(h)).init(this.mapId,T,w),this.tiles[M]=g}g.node.active||(g.node.active=!0),m.push(M)}this.screenTiles.forEach(function(i){-1==m.indexOf(i)&&(this.tiles[i].node.active=!1)}.bind(this)),this.screenTiles=m},t.destory=function(){for(var i=Object.keys(this.tiles),t=0;t<i.length;t++){var e=i[t];this.tiles[e].destory(),this.tiles[e]=null,delete this.tiles[e]}this.screenTiles.splice(0)},i}());t._RF.pop()}}}));

System.register("chunks:///_virtual/MapView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CoinFlyManager.ts","./DataManager.ts","./MathUtils.ts","./DiamondFlyManager.ts","./GameUIManager.ts","./DateDefine.ts"],(function(t){var i,n,e,o,a,r,l,s,c,u,m,d,p,h,f,b,_,g,w,v,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,l=t.ScrollView,s=t.Node,c=t.Label,u=t.instantiate,m=t.Vec3,d=t.tween,p=t.v3,h=t.UITransform,f=t.Component},function(t){b=t.CoinFlyManager},function(t){_=t.DataManager},function(t){g=t.MathUtils},function(t){w=t.DiamondFlyManager},function(t){v=t.GameUIManager},function(t){y=t.mGlobalData}],execute:function(){var D,P,M,N,V,I,z,G,F,C,k,x,U,T,B,L,S,A,E,R,H;a._RF.push({},"3848ck5yNFIhZLMz46NQVDo","MapView",void 0);var O=r.ccclass,j=r.property;t("MapView",(D=O("MapView"),P=j(l),M=j(s),N=j(s),V=j(s),I=j(s),z=j(s),G=j(s),F=j(c),C=j(c),D((U=i((x=function(t){function i(){for(var i,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return i=t.call.apply(t,[this].concat(a))||this,e(i,"m_scrollView",U,o(i)),e(i,"m_onNode",T,o(i)),e(i,"m_pointNode",B,o(i)),e(i,"m_point",L,o(i)),e(i,"m_curPoint",S,o(i)),e(i,"m_bossView",A,o(i)),e(i,"m_bg",E,o(i)),e(i,"m_labGold",R,o(i)),e(i,"m_labDiamond",H,o(i)),i.m_pointData=[],i.m_curtPos={x:0,y:0},i}n(i,t);var a=i.prototype;return a.onLoad=function(){this.m_pointNode.setSiblingIndex(1e3)},a.updatePoint=function(){this.m_pointNode.removeAllChildren();for(var t=0;t<this.m_pointData.length;t++){var i=this.m_pointData[t],n=u(this.m_point);this.m_pointNode.addChild(n),n.active=!0,n.setPosition(new m(i.x,i.y,0))}var e=u(this.m_curPoint);this.m_pointNode.addChild(e),e.active=!0,e.setPosition(new m(this.m_curtPos.x,this.m_curtPos.y,0)),this.curPointRunAction(e)},a.curPointRunAction=function(t){d(t).sequence(d().to(.1,{scale:new m(1.2,.8,1)}),d().parallel(d().by(.2,{position:p(0,30,0)}),d().to(.2,{scale:new m(1,1,1)})),d().parallel(d().by(.2,{position:p(0,-30,0)}),d().to(.2,{scale:new m(1.2,.8,1)})),d().to(.1,{scale:new m(1,1,1)})).repeatForever().start()},a.start=function(){},a.onClickDel=function(){this.m_pointData.pop(),this.updatePoint()},a.onOut=function(){var t=this.m_pointData.map((function(t){return{x:Math.floor(t.x),y:Math.floor(t.y)}}));console.log(JSON.stringify(t))},a.show=function(){this.m_bg.active=!0,this.m_bossView.active=!1,this.node.active=!0,this.m_pointData=[];var t=_.getInstance().getCheckPoint();if(this.m_curtPos=y.checkPointNodePos[0],t.big>1)for(var i=0;i<t.big;i++){var n=y.checkPointNodePos[i];this.m_pointData.push(n)}this.m_curtPos=y.checkPointNodePos[t.big],this.updatePoint();var e=this.m_curtPos.x-320;e<0&&(e=0);var o=e/this.m_onNode.getComponent(h).width;this.m_scrollView.scrollToPercentHorizontal(o,1,!1)},a.hide=function(){this.node.active=!1},a.onClickBG=function(){this.hide()},a.showBossView=function(){this.show(),this.m_bossView.active=!0,this.m_bg.active=!1},a.hideBossView=function(){this.hide(),this.m_bossView.active=!1},a.goldFlyEnd=function(t){_.getInstance().addGold(t),v.instance.updateGameUI()},a.diamondFlyEnd=function(t){_.getInstance().addDiamond(t),v.instance.updateGameUI()},a.showSucceed=function(t,i){var n=this;this.m_labGold.string=""+g.formatNum(t),this.m_labDiamond.string=""+g.formatNum(i),this.showBossView();var e=0,o=setInterval((function(){e<50?(!function(){if(t>0){var e=Math.floor(t/50);b.instance.createCoinToTip(n.m_labGold.node,n.goldFlyEnd.bind(n),e)}if(i>0){var o=Math.floor(i/50);w.instance.createDiamondToTip(n.m_labDiamond.node,n.diamondFlyEnd.bind(n),o)}}(),e++):(clearInterval(o),_.getInstance().setGold(t),_.getInstance().setDiamond(i),v.instance.updateGameUI())}),10)},i}(f)).prototype,"m_scrollView",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(x.prototype,"m_onNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i(x.prototype,"m_pointNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(x.prototype,"m_point",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=i(x.prototype,"m_curPoint",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(x.prototype,"m_bossView",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(x.prototype,"m_bg",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(x.prototype,"m_labGold",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=i(x.prototype,"m_labDiamond",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=x))||k));a._RF.pop()}}}));

System.register("chunks:///_virtual/MathUtils.ts",["cc"],(function(t){var n,r;return{setters:[function(t){n=t.cclegacy,r=t.Vec3}],execute:function(){n._RF.push({},"141449RZZxLQpEInAILH53n","MathUtils",void 0);t("MathUtils",function(){function t(){}return t.clamp=function(t,n,r){return t<n?n:t>r?r:t},t.lerp=function(t,n,r){void 0===r&&(r=.25);var a=n;return t>n?a=n+(t-n)*r:t<n&&(a=n-(n-t)*r),a},t.formatNum=function(t){if(t<=0)return"0";var n=["","K","M","B","T"],r=Math.floor(Math.log10(t)/Math.log10(1e3));return r=Math.min(r,n.length-1),parseInt((t/Math.pow(1e3,r)).toString(),10)+n[r]},t.getAngle=function(t,n){var r=n.x-t.x,a=n.y-t.y,o=r/Math.sqrt(r*r+a*a),e=Math.acos(o),u=180/(Math.PI/e);return a<0?u=-u:0===a&&r<0&&(u=180),u},t.getDistance=function(t,n){var a=new r(t.x-n.x,t.y-n.y,t.z-n.z);return Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z)},t.randomNum=function(t,n){return void 0===n?Math.floor(Math.random()*t+1):Math.floor(Math.random()*(n-t+1)+t)},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Monster.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIComponent.ts","./ResManager.ts","./Constants.ts","./DataModelManager.ts","./GameModel.ts","./SkillManager.ts","./DataManager.ts","./DateDefine.ts","./MathUtils.ts","./EffectBuilder.ts","./CoinFlyManager.ts","./EventManager.ts","./HpEffect.ts","./Group.ts","./DevLog.ts"],(function(e){var t,n,i,s,o,a,r,m,c,u,p,l,h,f,d,g,I,v,M,S,N,H,x,B,y,E,C,D,F,w,T,_,G,A,b,L,U;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){s=e.cclegacy,o=e._decorator,a=e.ProgressBar,r=e.Sprite,m=e.UITransform,c=e.CircleCollider2D,u=e.tween,p=e.v3,l=e.v2,h=e.Size,f=e.SpriteAtlas},function(e){d=e.UIComponent},function(e){g=e.ResManager},function(e){I=e.BUFFER_GONGJIFANBEI,v=e.RED_INTENSIFY_ATTACK,M=e.RED_INTENSIFY_BAOJI,S=e.BLUE_INTENSIFY_ATTACK,N=e.BLUE_INTENSIFY_BAOJI,H=e.BUFFER_JINBIFANBEI,x=e.UIEventName,B=e.BundleName},function(e){y=e.DataModelManager,E=e.ModelName},function(e){C=e.GameState},function(e){D=e.SkillManager},function(e){F=e.DataManager},function(e){w=e.mGlobalData},function(e){T=e.MathUtils},function(e){_=e.EffectBuilder},function(e){G=e.CoinFlyManager},function(e){A=e.EventManager},function(e){b=e.HpEffect},function(e){L=e.GroupName},function(e){U=e.DevLog}],execute:function(){var P;s._RF.push({},"03c01Xdwq1PxrSjiKK3dkfn","Monster",void 0);var R=o.ccclass;o.property,e("Monster",R("Monster")(P=function(e){function s(){for(var t,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))||this).mType=0,t.mIndex=0,t.mHp=0,t.mMaxHp=0,t.mDeadGold=0,t.isDead=!1,t.group=void 0,t.mItemNode=null,t.mScaleItem=null,t.mItemSprite=[],t.mHpBar=null,t.mDiamond=null,t.mSlow=null,t.mMonsterTexture=[],t.mMonsterSize=new h(0,0),t}t(s,e);var o=s.prototype;return o.onLoad=function(){this.mItemNode=this.ViewNode("item"),this.mScaleItem=this.ViewNode("item/scale"),this.mItemSprite[0]=this.ViewNode("item/scale/right"),this.mItemSprite[1]=this.ViewNode("item/scale/left"),this.mHpBar=this.ViewNode("item/hp/bar").getComponent(a),this.mDiamond=this.ViewNode("diamond"),this.mSlow=this.ViewNode("ui_enemy_slow"),this.scaleAction()},o.getSize=function(){return this.mMonsterSize},o.setGroup=function(e){this.group=e},o.getGroup=function(){return this.group},o.init=function(){var e=n(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<4)){e.next=9;break}return e.next=4,g.getInstance().getAsset(B.Atlas,"monster_"+t,f);case 4:n=e.sent,this.mMonsterTexture.push(n);case 6:t++,e.next=1;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.updateDir=function(e,t){t.x>e.x?(this.mItemSprite[0].active=!0,this.mItemSprite[1].active=!1):t.x<e.x&&(this.mItemSprite[0].active=!1,this.mItemSprite[1].active=!0)},o.setImage=function(e,t){if(!(e<0||e>=this.mMonsterTexture.length)){var n=this.mMonsterTexture[e].getSpriteFrame(""+t);if(n){this.mType=e,this.mIndex=t;for(var i=0,s=0,o=0;o<this.mItemSprite.length;o++){var a=this.mItemSprite[o].getComponent(r);a.spriteFrame=n,i=a.node.getComponent(m).width,s=a.node.getComponent(m).height}this.mMonsterSize.width=i,this.mMonsterSize.height=s,this.updateCollider(i,s),this.updateHpSize(i,s)}else console.log("setImage:",e," index:",t)}},o.updateHpSize=function(e,t){this.mHpBar.node.getComponent(m).width=e,this.mHpBar.node.getComponent(m).height=t,this.mHpBar.totalLength=e},o.updateCollider=function(e,t){var n=this.mItemNode.getComponent(c);n.radius=.8*e/2,n.offset.y=t/2},o.scaleAction=function(){var e,t=this,n=[],i=u().to(.5,{scale:p(.8,1.2)}),s=u().by(.5,{position:p(0,80)}),o=u().parallel(i,s);n.push(o);var a=u().to(.5,{scale:p(1,1)}),r=u().by(.5,{position:p(0,-80)}),m=u().parallel(a,r);n.push(m);var c=u().call((function(){t.mType>0?u(t.mScaleItem).repeatForever(u().sequence(u().to(.5,{scale:p(1.1,.9)}),u().to(.5,{scale:p(.9,1.1)}))).start():u(t.mItemNode).repeatForever(u().sequence(u().by(.2,{position:p(0,30)}),u().by(.2,{position:p(0,-30)}))).start()}));n.push(c),(e=u(this.mItemNode)).sequence.apply(e,n).start()},o.getHp=function(){return this.mHp},o.subHP=function(e,t){if(y.instance.getModel(E.Game).state==C.Playering)if(null!=e){D.instance.mBufferState[I]&&(e*=2);var n=!1;if(1e3*Math.random()<=500){var i=0,s=0;t&&t==L.BULE?(s=F.getInstance().getInternsifLevel(v),i=F.getInstance().getInternsifLevel(M)):(s=F.getInstance().getInternsifLevel(S),i=F.getInstance().getInternsifLevel(N)),e=e+s+i,e=parseFloat(e.toFixed(2)),U.debug("暴击等级(2):"+i+" 暴击值:"+e),n=!0}if(this.mHp-=e,this.mHp<=0){this.mHpBar.progress=0,this.isDead=!0,this.node.active=!1;var o=this.node.getPosition();_.instance.createDeadEffect(o);var a=this.mDeadGold;D.instance.mBufferState[H]&&(a*=2),a>0&&G.instance.createCoinToTip(this.node,(function(e){F.getInstance().addGold(e),A.getInstance().emit(x.updateGameUI,{})}),a),w.subCurMonsterCount()}else U.debug("血量 "+this.mHp+" "+this.mMaxHp),this.mHpBar.progress=this.mHp/this.mMaxHp;var r=T.formatNum(e);n&&(r="暴击"+r),b.instance.createHpEffect(l(this.node.getPosition().x,this.node.getPosition().y),r)}else console.log("攻击力未定义")},o.setMaxHP=function(e){this.mHp=e,this.mMaxHp=e},s}(d))||P);s._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterBuilder.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./MathUtils.ts","./SkillManager.ts","./ECSWorld.ts","./DateDefine.ts","./GameManager.ts","./MonsterItem.ts","./UIManager.ts","./MonsterPool.ts"],(function(e){var t,n,o,r,i,s,a,c,l,d,h,u,f,m,g,M,p,v,y,C,I,P;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.createClass},function(e){s=e.cclegacy,a=e._decorator,c=e.Prefab,l=e.NodePool,d=e.tween,h=e.instantiate,u=e.Component},function(e){f=e.GUI,m=e.BUFFER_QUANPINGGONGJI},function(e){g=e.MathUtils},function(e){M=e.SkillManager},function(e){p=e.ECSWorld},function(e){v=e.mGlobalData},function(e){y=e.GameManager},function(e){C=e.MonsterItem},function(e){I=e.UIManager},function(e){P=e.MonsterPool}],execute:function(){var S,_,D,b,w,B;s._RF.push({},"b84adaWFkpMVaSwSsrSVSyM","MonsterBuilder",void 0);var G=a.ccclass,U=a.property;e("MonsterBuilder",(S=G("MonsterBuilder"),_=U(c),S(((B=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return t=e.call.apply(e,[this].concat(i))||this,o(t,"m_msItemPrefab",w,r(t)),t.m_currentLevel=0,t.m_monsterIndex=0,t.enemyPool=new l,t}n(t,e);var s=t.prototype;return s.onLoad=function(){var e=this;t._instance=this,this.schedule((function(){e.sortMonsterList()}),.5),y.instance.playGame()},s.start=function(){},s.setGameEndSpeed=function(){for(var e=0;e<this.node.children.length;e++){var t=this.node.children[e].getComponent(C);if(!t.isDead()&&!t.m_diamond.active){var n=t.getSpeed();n+=v.gameEndMonsterSpeed,t.setSlow(!1),t.setSpeed(n)}}},s.setAllSlow=function(e){for(var t=0;t<this.node.children.length;t++){var n=this.node.children[t].getComponent(C);n.isDead()||(n.m_diamond.active||n.setSlow(e))}},s.begin=function(){v.isCurBossAttack()&&I.Instance.IE_ShowUIView(f.UIBoss),this.beginCreate()},s.monsterCreate=function(){var e=0,t=(y.instance.getCurPahtList(),v.getCurMonsterData());v.setCurMonsterCount(t.length);for(var n=d(this.node),o=0;o<t.length;o++){var r=Math.random();n=n.delay(.8+r).call((function(){e>=t.length||(p.instance.createMonster(e),e++)}))}n.start()},s.beginCreate=function(){var e=d(this.node);(e=e.delay(.8).call(this.createMonsters)).start(),e.repeat(1/0)},s.createMonsters=function(){var e=P.instance.pop();e>=v.getCurMonsterData().length&&(e=0),p.instance.createMonster(e)},s.destroyMonster=function(){for(;this.node.children.length;){var e=this.node.children[0];e.removeFromParent(),e.destroy()}},s.createTest=function(){var e=y.instance.getCurPahtList(),t=L(0,2),n=L(0,[10,15,18][t]);this.createMonster(t,n,e,1e6,1e3).getComponent(C).go(100),v.addCurMonsterCount()},s.createMonsterByData=function(e,t){var n=e.type,o=e.id,r=e.hp,i=e.gold;return this.createMonster(n,o,t,r,i)},s.createMonster=function(e,t,n,o,r){var i;void 0===r&&(r=0),i=this.enemyPool.size()>0?this.enemyPool.get():h(this.m_msItemPrefab),this.node.addChild(i);var s=i.getComponent(C);return s.setImage(e,t),s.setPath(n),s.setID(this.m_monsterIndex),s.setMaxHP(o),s.setDeadGold(r),this.m_monsterIndex++,i},s.killMonster=function(e){this.enemyPool.put(e)},s.sortMonsterList=function(){if(!(this.node.children.length<2)){this.node.children.sort((function(e,t){return e.position.y-t.position.y>.001?-1:e.position.y===t.position.y?0:1}));for(var e=0;e<this.node.children.length;e++)this.node.children[e].setSiblingIndex(e)}},s.calcNearDistance=function(e){var t=9999,n=null,o=230;M.instance.mBufferState[m]&&(o*=10);for(var r=0;r<this.node.children.length;r++)if(!this.node.children[r].getComponent(C).isDead()){var i=g.getDistance(this.node.children[r].getPosition(),e.getPosition());i<o&&i<Math.abs(t)&&(t=i,n=this.node.children[r])}return n},i(t,null,[{key:"instance",get:function(){return this._instance}}]),t}(u))._instance=null,w=t((b=B).prototype,"m_msItemPrefab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=b))||D));function L(e,t){return Math.floor(Math.random()*(t-e+1))+e}s._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DevLog.ts","./Monster.ts"],(function(o){var n,t,e,r,s,i,u,p;return{setters:[function(o){n=o.inheritsLoose},function(o){t=o.cclegacy,e=o._decorator,r=o.Collider2D,s=o.Contact2DType,i=o.Component},function(o){u=o.DevLog},function(o){p=o.Monster}],execute:function(){var c;t._RF.push({},"0c504jyJn1IuaR6q8NHnAhA","MonsterComp",void 0);var a=e.ccclass;e.property,o("MonsterComp",a("MonsterComp")(c=function(o){function t(){return o.apply(this,arguments)||this}n(t,o);var e=t.prototype;return e.onLoad=function(){var o=this.getComponent(r);o&&o.on(s.BEGIN_CONTACT,this.onCollisionEnter,this)},e.onCollisionEnter=function(o,n){var t=o.node.parent.getComponent(p),e=n.node.parent.getComponent(p);if(t&&e){u.debug("Group Name: "+t.getGroup()+" "+e.getGroup());var r=t.getHp(),s=e.getHp(),i=Math.min(r,s);u.debug("怪物组件碰撞检测：怪物扣血"),t.subHP(i),e.subHP(i)}},e.update=function(o){},t}(i))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterEntity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CollisionComponent.ts","./NaviComponent.ts","./RoleComponent.ts","./TransformComponent.ts","./BaseEntity.ts"],(function(n){var o,t,e,i,s,r,c;return{setters:[function(n){o=n.inheritsLoose},function(n){t=n.cclegacy},function(n){e=n.CollisionComponent},function(n){i=n.NaviComponent},function(n){s=n.RoleComponent},function(n){r=n.TransformComponent},function(n){c=n.BaseEntity}],execute:function(){t._RF.push({},"d9f97EH0JJDGKfB5WduaQ/+","MonsterEntity",void 0);n("MonsterEntity",function(n){function t(){for(var o,t=arguments.length,c=new Array(t),u=0;u<t;u++)c[u]=arguments[u];return(o=n.call.apply(n,[this].concat(c))||this).navCompnent=new i,o.transformComponent=new r,o.roleComponent=new s,o.collisionComponent=new e,o}return o(t,n),t}(c));t._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DateDefine.ts","./MonsterBuilder.ts","./GameModel.ts","./Constants.ts","./DataManager.ts","./SkillManager.ts","./EventManager.ts","./DataModelManager.ts","./MathUtils.ts","./HpEffect.ts","./EffectBuilder.ts","./CoinFlyManager.ts","./GameManager.ts","./CrownManager.ts","./Group.ts","./DevLog.ts"],(function(e){var t,n,i,o,a,s,r,m,c,u,l,p,d,h,f,_,g,v,M,I,S,b,x,y,D,C,B,E,H,P,w,F,G,N,A,z,L,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,r=e.SpriteAtlas,m=e.Node,c=e.ProgressBar,u=e.Sprite,l=e.UITransform,p=e.v3,d=e.tween,h=e.CircleCollider2D,f=e.v2,_=e.Component},function(e){g=e.mGlobalData},function(e){v=e.MonsterBuilder},function(e){M=e.GameState},function(e){I=e.UIEventName,S=e.BUFFER_GONGJIFANBEI,b=e.RED_INTENSIFY_BAOJI,x=e.BLUE_INTENSIFY_BAOJI,y=e.BUFFER_JINBIFANBEI,D=e.TASK_JIDAO_DIREN},function(e){C=e.DataManager},function(e){B=e.SkillManager},function(e){E=e.EventManager},function(e){H=e.DataModelManager,P=e.ModelName},function(e){w=e.MathUtils},function(e){F=e.HpEffect},function(e){G=e.EffectBuilder},function(e){N=e.CoinFlyManager},function(e){A=e.GameManager},function(e){z=e.CrownManager},function(e){L=e.GroupName},function(e){T=e.DevLog}],execute:function(){var U,R,J,k,q,O,K,Y,j,Q,V,W,X,Z,$,ee,te;a._RF.push({},"665b1B90MFLmpBIVwQoIzKo","MonsterItem",void 0);var ne=s.ccclass,ie=s.property;e("MonsterItem",(U=ne("MonsterItem"),R=ie([r]),J=ie([m]),k=ie(m),q=ie(m),O=ie(c),K=ie(m),Y=ie(m),U((V=t((Q=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,i(t,"m_monsterTexture",V,o(t)),i(t,"m_itemSprite",W,o(t)),i(t,"m_itemNode",X,o(t)),i(t,"m_scaleItem",Z,o(t)),i(t,"m_HpBar",$,o(t)),i(t,"m_diamond",ee,o(t)),i(t,"m_slow",te,o(t)),t.m_curMoveIndex=0,t.m_speed=0,t.m_defaultSpeed=0,t.m_Hp=0,t.m_maxHp=0,t.m_deadGold=0,t._pathPos=[],t.m_type=0,t.m_index=0,t.m_isDead=!1,t}n(t,e);var a=t.prototype;return a.onLoad=function(){this.m_curMoveIndex=0,this.m_isDead=!1},a.start=function(){},a.isDead=function(){return this.m_isDead},a.setImage=function(e,t){if(!(e<0||e>=this.m_monsterTexture.length)){var n=this.m_monsterTexture[e].getSpriteFrame(""+t);if(n){var i,o;this.m_type=e,this.m_index=t;for(var a=0;a<this.m_itemSprite.length;a++){var s=this.m_itemSprite[a].getComponent(u);s.spriteFrame=n,i=s.node.getComponent(l).width,o=s.node.getComponent(l).height}this.updateCollider(i,o),this.updateHpSize(i,o)}else console.log("setImage:",e," index:",t)}},a.updateDir=function(e,t){t.x>e.x?(this.m_itemSprite[0].active=!0,this.m_itemSprite[1].active=!1):t.x<e.x&&(this.m_itemSprite[0].active=!1,this.m_itemSprite[1].active=!0)},a.setPath=function(e){this._pathPos=[];for(var t=0;t<e.length;t++){var n=106*e[t].x+53,i=106*-e[t].y-53;this._pathPos.push(p(n,i))}this.node.setPosition(this._pathPos[0]),this.updateDir(this._pathPos[0],this._pathPos[1])},a.stopMoveAction=function(){d(this.node).stop()},a.nextMove=function(){var e=this;this.stopMoveAction();var t=this.node.getPosition(),n=this._pathPos[this.m_curMoveIndex+1];if(n){this.updateDir(t,n);var i=t.subtract(n).length()/this.m_speed;d(this.node).to(i,{position:n}).call((function(){if(e.m_curMoveIndex++,e.m_curMoveIndex===e._pathPos.length-1){if(H.instance.getModel(P.Game).state==M.Playering)e.m_diamond.active=!0,A.instance.stopGame(),H.instance.getModel(P.Game).state=M.End,z.instance.hide(),v.instance.setGameEndSpeed();e.gameEndAction()}else e.nextMove()})).start()}},a.moveAction=function(){this.nextMove()},a.gameEndAction=function(){var e=this,t=A.instance.getCurPahtList()[0],n=p(106*t.x+53,106*-t.y-53),i=this.node.getPosition(),o=p((n.x-i.x)/2+i.x,i.y+150);d(this.node).to(.2,{position:o}).to(.4,{position:n}).call((function(){e.m_diamond.active=!1,e.node.active=!1,e.m_isDead=!0,g.subCurMonsterCount(),g.getCurMonsterCount()<=0&&E.getInstance().emit(I.showFaild,{})})).start(),this.node.setScale(p(1,1)),d(this.node).sequence(d().to(.1,{scale:p(1.2,.8)}),d().to(.1,{scale:p(1,1)}),d().to(.2,{scale:p(.8,1.2)})).start()},a.scaleAction=function(){var e,t=this,n=[],i=d().to(.5,{scale:p(.8,1.2)}),o=d().by(.5,{position:p(0,80)}),a=d().parallel(i,o);n.push(a);var s=d().to(.5,{scale:p(1,1)}),r=d().by(.5,{position:p(0,-80)}),m=d().parallel(s,r);n.push(m);var c=d().call((function(){t.m_type>0?d(t.m_scaleItem).repeatForever(d().sequence(d().to(.5,{scale:p(1.1,.9)}),d().to(.5,{scale:p(.9,1.1)}))).start():d(t.m_itemNode).repeatForever(d().sequence(d().by(.2,{position:p(0,30)}),d().by(.2,{position:p(0,-30)}))).start()}));n.push(c),(e=d(this.m_itemNode)).sequence.apply(e,n).start()},a.getSpeed=function(){return this.m_speed},a.setSpeed=function(e){this.m_speed=e,this.nextMove()},a.defaultSpeed=function(){this.m_speed=this.m_defaultSpeed,this.nextMove()},a.go=function(e){this.m_speed=e,this.m_defaultSpeed=e,this.moveAction(),this.scaleAction()},a.updateHpSize=function(e,t){this.m_HpBar.node.getComponent(l).width=e,this.m_HpBar.node.getComponent(l).height=t,this.m_HpBar.totalLength=e},a.updateCollider=function(e,t){var n=this.m_itemNode.getComponent(h);n.radius=.8*e/2,n.offset.y=t/2},a.setID=function(e){this.m_itemNode._monsterID=e,this.node._monsterID=e},a.setMaxHP=function(e){this.m_Hp=e,this.m_maxHp=e},a.setDeadGold=function(e){this.m_deadGold=e},a.subHP=function(e,t){if(H.instance.getModel(P.Game).state==M.Playering&&!this.m_isDead)if(null!=e){B.instance.mBufferState[S]&&(e*=2);var n=!1;if(1e3*Math.random()<=500){var i=0;e+=i=t&&t==L.BULE?C.getInstance().getInternsifLevel(b):C.getInstance().getInternsifLevel(x),e=parseFloat(e.toFixed(2)),T.debug("暴击等级："+i+" 暴击值:"+e),n=!0}if(this.m_Hp-=e,this.m_Hp<=0){this.m_HpBar.progress=0,this.m_isDead=!0,this.node.active=!1;var o=this.node.getPosition();G.instance.createDeadEffect(o);var a=this.m_deadGold;B.instance.mBufferState[y]&&(a*=2),a>0&&N.instance.createCoinToTip(this.node,(function(e){C.getInstance().addGold(e),E.getInstance().emit(I.updateGameUI,{})}),a),g.subCurMonsterCount(),g.getCurMonsterCount(),C.getInstance().addTaskCount(D)}else this.m_HpBar.progress=this.m_Hp/this.m_maxHp;var s=w.formatNum(e);n&&(s="暴击"+s),F.instance.createHpEffect(f(this.node.getPosition().x,this.node.getPosition().y),s)}else console.log("攻击力未定义")},a.setSlow=function(e){e?(this.m_slow.active=!0,this.setSpeed(this.m_defaultSpeed/2)):(this.m_slow.active=!1,this.setSpeed(this.m_defaultSpeed))},t}(_)).prototype,"m_monsterTexture",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W=t(Q.prototype,"m_itemSprite",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=t(Q.prototype,"m_itemNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(Q.prototype,"m_scaleItem",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(Q.prototype,"m_HpBar",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(Q.prototype,"m_diamond",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(Q.prototype,"m_slow",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=Q))||j));a._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterPool.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"5376bXyCbRBOqSs5oAPFuc/","MonsterPool",void 0),t("MonsterPool",function(){function t(){this.types=[],this.defaultType=0}var e=t.prototype;return e.push=function(t){this.types.push(t)},e.pop=function(){return this.types.length>0?this.types.shift():this.defaultType},n(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterUtils.ts",["cc","./DevLog.ts"],(function(t){var n,r,o,e;return{setters:[function(t){n=t.cclegacy,r=t.Vec3,o=t.Color},function(t){e=t.DevLog}],execute:function(){n._RF.push({},"44d22QSFjVPRpNCMZ2rnJRX","MonsterUtils",void 0);t("MonsterUtils",function(){function t(){}return t.getMosterPosition=function(t,n){var o=t.x*n+n/2,e=-t.y*n-n/2;return new r(o,e,0)},t.drawPoint=function(t,n,r,e,i){void 0===i&&(i=o.RED),t.fillColor=i,t.circle(n,r,e),t.fill()},t.formatSeconds=function(t){var n=Math.floor(t),r=Math.floor(n/60),o=n%60;return(r>9?r.toString():"0"+r)+":"+(o>9?o.toString():"0"+o)},t.adjustDeploymentIntervals=function(t,n){var r=t>0?3:999,o=n>0?3:999;return r=Math.max(1,r-.1*(t-1)),o=Math.max(1,o-.1*(n-1)),1===r&&o<3&&(o=Math.min(3,o+.1)),1===o&&r<3&&(r=Math.min(3,r+.1)),e.debug("当前出兵间隔:"+JSON.stringify({red:r,blue:o})),{red:r,blue:o}},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/MoveComponent.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"02e06FPM4pBx71xQ7fx8D4I","MoveComponent",void 0);t("MoveComponent",(function(){this.vx=0,this.vy=0,this.speed=void 0,this.time=0,this.listPos=[]}));e._RF.pop()}}}));

System.register("chunks:///_virtual/MoveSystem.ts",["cc","./RandomUtils.ts","./DevLog.ts","./AstarTest.ts"],(function(e){var o,n,t,m,i;return{setters:[function(e){o=e.cclegacy,n=e.v2},function(e){t=e.RandomUtils},function(e){m=e.DevLog},function(e){i=e.default}],execute:function(){o._RF.push({},"c86c7p6vBhA17Cy536h8KZK","MoveSystem",void 0);e("MoveSystem",function(){function e(){}return e.update=function(e,o,s){if(null!=o.baseCompnent.gameObject&&o.baseCompnent.gameObject.active){var v=s[t.getRandomInt(0,s.length)];if(null!=v&&!(o.attackComponent.mFireTime>=0)){var p=o.baseCompnent.gameObject.position,a=v.baseCompnent.gameObject.position,c=v.collisionComponent.size;a.x,a.x,c.width,a.y,a.y,c.height;if(o.moveComponent.listPos.length<=0&&o.moveComponent.time<=0){var C=o.baseCompnent.gameObject.getComponent(i).init(n(a.x,a.y));o.moveComponent.listPos=C||[]}else{if(o.moveComponent.time<=0){var l=o.moveComponent.listPos.shift().subtract(n(p.x,p.y)),u=l.length();o.moveComponent.time=u/o.moveComponent.speed,0!=u?(o.moveComponent.vx=o.moveComponent.speed*(l.x/u),o.moveComponent.vy=o.moveComponent.speed*(l.y/u)):(o.moveComponent.vx=0,o.moveComponent.vy=0)}o.moveComponent.time-=e;var g=o.baseCompnent.gameObject.position.x+o.moveComponent.vx*e,b=o.baseCompnent.gameObject.position.y+o.moveComponent.vy*e;o.baseCompnent.gameObject.setPosition(g,b)}}}else m.debug("entity is null or not active,cannont move canncel")},e}());o._RF.pop()}}}));

System.register("chunks:///_virtual/NaviComponent.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"e6948hnbdBPOJySAvrpRrLp","NaviComponent",void 0);t("NaviComponent",(function(){this.vx=0,this.vy=0,this.speed=void 0,this.pathList=[],this.time=0,this.pathIndex=0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/NavSystem.ts",["cc","./MathUtils.ts","./MonsterUtils.ts","./ECSWorld.ts","./DevLog.ts","./BulletBase.ts","./Monster.ts","./DataManager.ts","./Group.ts","./Constants.ts"],(function(t){var e,n,i,o,s,a,r,c,g,u,p,v,m;return{setters:[function(t){e=t.cclegacy,n=t.view,i=t.UITransform},function(t){o=t.MathUtils},function(t){s=t.MonsterUtils},function(t){a=t.ECSWorld},function(t){r=t.DevLog},function(t){c=t.BulletBase},function(t){g=t.Monster},function(t){u=t.DataManager},function(t){p=t.GroupName},function(t){v=t.BLUE_INTENSIFY_RUN,m=t.RED_INTENSIFY_RUN}],execute:function(){e._RF.push({},"2bab2t9mxlK/q1kmOVbP5jY","NavSystem",void 0);t("NavSystem",function(){function t(){}return t.update=function(t,e){var n=t.baseCompnent,i=t.navCompnent;if(i.pathIndex>=i.pathList.length)a.instance.destroyEntity(t);else{if(i.time<=0){if(i.pathIndex++,i.pathIndex>=i.pathList.length)return;var o=s.getMosterPosition(i.pathList[i.pathIndex-1],106),r=s.getMosterPosition(i.pathList[i.pathIndex],106).subtract(o),c=r.length(),f=t.baseCompnent.gameObject.getComponent(g),h=0;h=p.BULE==f.getGroup()?2*u.getInstance().getInternsifLevel(v):2*u.getInstance().getInternsifLevel(m);var l=i.speed+h;return i.time=c/l,i.vx=l*(r.x/c),void(i.vy=l*(r.y/c))}i.time-=e;var y=n.gameObject.position.x+i.vx*e,d=n.gameObject.position.y+i.vy*e;n.gameObject.setPosition(y,d)}},t.bulletUpdate=function(t,e){var s=t.baseCompnent,g=t.attackComponent,u=s.gameObject,p=n.getVisibleSize(),v=u.getComponentInChildren(c);if((u.getPosition().x<=0||u.getPosition().x>=p.x||u.getPosition().x<=0||u.getPosition().y>=p.y)&&(v.isDead=!0,a.instance.destroyEntity(t)),v&&!v.isDead){var m=g.mAttackTarget;if(!m||!m.active)return a.instance.destroyEntity(t),void r.warn("子弹 "+t+" 攻击目标不存在,取消更新并销毁子弹");try{var f=500*e,h=m.getComponent(i).height,l=m.getPosition();l.y+=h/2;var y=o.getAngle(u.getPosition(),l),d=Math.cos(y*(Math.PI/180))*f,I=Math.sin(y*(Math.PI/180))*f;u.setPosition(u.position.x+d,u.position.y+I)}catch(e){return r.warn(m.active+" 节点应该不存活,取消更新并销毁子弹:"+e),void a.instance.destroyEntity(t)}}},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerComponent.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"040e5yAjA5EJ6t57gJWjsou","PlayerComponent",void 0);t("PlayerComponent",(function(){this.pid=void 0,this.name=void 0,this.avatar=void 0,this.level=void 0}));e._RF.pop()}}}));

System.register("chunks:///_virtual/RandomUtils.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"9b4e6scxw9EzpZr7Eo4tlEK","RandomUtils",void 0);var r=t("RandomUtils",function(){function t(){}return t.randomStr=function(t,n){void 0===n&&(n=this.CHARACTERS);for(var r=n.length,o="",a=0;a<t;a++)o+=n.charAt(Math.floor(Math.random()*r));return o},t.randomIntStr=function(t){return this.randomStr(t,this.NUMBER_CHARACTERS)},t.shuffleArray=function(t){for(var n=[].concat(t),r=n.length-1;r>0;r--){var o=Math.floor(Math.random()*(r+1)),a=[n[o],n[r]];n[r]=a[0],n[o]=a[1]}return n},t.getRandomInt=function(t,n){var r=Math.random()*(n-t+1)+t;return Math.floor(r)},t}());r.CHARACTERS="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",r.NUMBER_CHARACTERS="0123456789",n._RF.pop()}}}));

System.register("chunks:///_virtual/request.ts",["cc","./axios.mjs_cjs=&original=.js","./axios.js"],(function(e){var t,r;return{setters:[function(e){t=e.cclegacy},null,function(e){r=e.default}],execute:function(){t._RF.push({},"17146cmD4tLhrPKrZAYLBBV","request",void 0);var o=e("default",r.create({baseURL:"http://localhost:3000",timeout:55e3}));o.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.authorization=t),e}),(function(e){return console.log(e),Promise.reject(e)})),o.interceptors.response.use((function(e){var t=e.data;return console.info("接口返回值："+JSON.stringify(t)),200!==t.code&&4e3!=t.code&&0!=t.code?Promise.reject(new Error(t.message||"Error")):t}),(function(e){return console.log("出错了:"+JSON.stringify(e)),Promise.reject(e)})),t._RF.pop()}}}));

System.register("chunks:///_virtual/ResManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,t,r,u,s,a;return{setters:[function(n){e=n.inheritsLoose,t=n.asyncToGenerator,r=n.regeneratorRuntime},function(n){u=n.cclegacy,s=n.assetManager,a=n.Component}],execute:function(){u._RF.push({},"1f859H4lTpKtqYOUVaSnkgm","ResManager",void 0),n("ResManager",function(n){function u(){return n.apply(this,arguments)||this}e(u,n),u.getInstance=function(){return u._instance||(u._instance=new u),this._instance};var a=u.prototype;return a.load=function(){},a.loadBundle=function(){var n=t(r().mark((function n(e){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,t){s.loadBundle(e,(function(e,r){e?(console.info("null"),t(null)):(console.info(r),n(r))}))})));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),a.loadAllAssetsInBundle=function(){var n=t(r().mark((function n(e,t){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,r){e.loadDir("",t,(function(e,t){e?r(e):n(t)}))})));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),a.loadSceneInBundle=function(){var n=t(r().mark((function n(e,t){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,r){e.loadScene(t,(function(e,t){e?r(e):n(t)}))})));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),a.loadBundleAndAllAssets=function(){var n=t(r().mark((function n(e,t){var u;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.loadBundle(e);case 2:if(u=n.sent){n.next=5;break}return n.abrupt("return",null);case 5:return n.next=7,this.loadAllAssetsInBundle(u,t);case 7:case"end":return n.stop()}}),n,this)})));return function(e,t){return n.apply(this,arguments)}}(),a.getSceneAsset=function(){var n=t(r().mark((function n(e,t){var u,a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(u=s.getBundle(e)){n.next=7;break}return n.next=4,this.loadBundle(e);case 4:if(u=n.sent){n.next=7;break}return n.abrupt("return");case 7:return n.next=9,this.loadSceneInBundle(u,t);case 9:return a=n.sent,n.abrupt("return",a);case 11:case"end":return n.stop()}}),n,this)})));return function(e,t){return n.apply(this,arguments)}}(),a.getAsset=function(){var n=t(r().mark((function n(e,t,u){var a,o;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=s.getBundle(e)){n.next=7;break}return n.next=4,this.loadBundle(e);case 4:if(a=n.sent){n.next=7;break}return n.abrupt("return",null);case 7:if(!(o=a.get(t,u))){n.next=10;break}return n.abrupt("return",o);case 10:return n.next=12,this.loadAssetInBundle(a,t,u);case 12:return o=n.sent,n.abrupt("return",o);case 14:case"end":return n.stop()}}),n,this)})));return function(e,t,r){return n.apply(this,arguments)}}(),a.loadAssetInBundle=function(){var n=t(r().mark((function n(e,t,u){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,r){e.load(t,u,(function(e,t){e?r(e):n(t)}))})));case 1:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}(),a.releaseAsset=function(n){s.releaseAsset(n)},a.releaseAllAssetInBundle=function(n){var e=s.getBundle(n);e&&(e.releaseAll(),s.removeBundle(e))},a.debugAssetRefCount=function(n,e){var t=s.getBundle(n),r=null==t?void 0:t.get(e);r&&console.log("asset ref count: "+r.refCount)},u}(a))._instance=null,u._RF.pop()}}}));

System.register("chunks:///_virtual/RoleComponent.ts",["cc"],(function(o){var t;return{setters:[function(o){t=o.cclegacy}],execute:function(){t._RF.push({},"007d7k0Q6hDy7GC9CbZFFOX","RoleComponent",void 0);o("RoleComponent",(function(){this.type=void 0,this.id=void 0,this.hp=void 0,this.gold=void 0,this.group=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/SceneManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResManager.ts"],(function(e){var n,t,r,c,a,o,s,i;return{setters:[function(e){n=e.inheritsLoose,t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){c=e.cclegacy,a=e._decorator,o=e.director,s=e.Component},function(e){i=e.ResManager}],execute:function(){var u,p;c._RF.push({},"e6e04Y7fYxP2bjNbWS8zR1P","SceneManager",void 0);var f=a.ccclass;a.property,e("SceneManager",f("SceneManager")(((p=function(e){function c(){return e.apply(this,arguments)||this}n(c,e),c.getInstance=function(){return c._instance||(c._instance=new c),this._instance};var a=c.prototype;return a.load=function(){},a.enterScene=function(e){o.loadScene(e)},a.runScene=function(){var e=t(r().mark((function e(n,t){var c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t="Scenes"),e.next=3,i.getInstance().getSceneAsset(t,n);case 3:c=e.sent,o.runSceneImmediate(c);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),c}(s))._instance=null,u=p))||u);c._RF.pop()}}}));

System.register("chunks:///_virtual/Settlement.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MathUtils.ts"],(function(t){var e,i,o,n,r,a,s,l,c,u,d,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Node,l=t.Label,c=t.v3,u=t.tween,d=t.Component},function(t){f=t.MathUtils}],execute:function(){var h,m,p,_,b,v,y,N,w;r._RF.push({},"35788j93WRPYYmHmkaA02AG","Settlement",void 0);var g=a.ccclass,S=a.property;t("Settlement",(h=g("Settlement"),m=S(s),p=S(s),_=S(l),h((y=e((v=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,o(e,"m_faildNode",y,n(e)),o(e,"m_succeedNode",N,n(e)),o(e,"m_labGold",w,n(e)),e}i(e,t);var r=e.prototype;return r.start=function(){},r.showSucceed=function(t){this.show(),this.m_labGold.string=f.formatNum(t),this.m_faildNode.active=!1,this.m_succeedNode.active=!0},r.showFaild=function(t){this.show(),this.m_labGold.string=f.formatNum(t),this.m_faildNode.active=!0,this.m_succeedNode.active=!1},r.show=function(){this.node.setPosition(c(0,980)),u(this.node).to(.3,{position:c(0,0)}).start()},r.hide=function(){this.node.setPosition(c(0,0)),u(this.node).to(.3,{position:c(0,980)}).start()},r.update=function(t){},e}(d)).prototype,"m_faildNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(v.prototype,"m_succeedNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(v.prototype,"m_labGold",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=v))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/SimpleAstar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MapGameData.ts"],(function(t){var i,s,n,h;return{setters:[function(t){i=t.createClass},function(t){s=t.cclegacy,n=t.Vec2},function(t){h=t.default}],execute:function(){s._RF.push({},"3384cWep5NI0JyclQZsjq+D","SimpleAstar",void 0);t("default",function(){function t(t){this.WorkMode=4,this._grid=void 0,this._path=void 0,this._astar=void 0,this.makeGrid(t)}var i=t.prototype;return i.find=function(t,i,s,n){if(s=Math.floor(s/h.GameCellWidth),n=Math.floor(n/h.GameCellHeight),s=Math.min(s,this._grid.numCols-1),n=Math.abs(Math.min(Math.abs(n),this._grid.numCols-1)),this._grid.setEndNode(s,n)){if(t=Math.floor(t/h.GameCellWidth),i>=0)i=Math.abs(Math.floor(i/h.GameCellHeight));else{var e=i/h.GameCellHeight,o=Math.ceil(e);i=Math.abs(o)}var a=Math.min(i,this._grid.numCols-1);return this._grid.setStartNode(t,a),this._astar.findPath()?(this._path=this._astar.path,this._path):(this._grid.setEndNode(s-1,n-1),null)}},i.makeGrid=function(t){var i,s,n=t.length,h=t[0].length;for(this._grid=new a(h,n),s=0;s<n;s++)for(i=0;i<h;i++)this._grid.setWalkable(i,s,1==t[s][i]);4==this.WorkMode?this._grid.calculateLinks(1):this._grid.calculateLinks(),this._astar=new e(this._grid)},t}());var e=t("AStar",function(){function t(t){this._open=void 0,this._grid=void 0,this._endNode=void 0,this._startNode=void 0,this._path=void 0,this._floydPath=void 0,this._straightCost=1,this._diagCost=Math.SQRT2,this._nowversion=1,this._heuristic=void 0,this.TwoOneTwoZero=2*Math.cos(Math.PI/3),this._grid=t,this._heuristic=this.manhattan}var s=t.prototype;return s.justMin=function(t,i){return t.f<i.f},s.findPath=function(){return this._endNode=this._grid.endNode,this._nowversion++,this._startNode=this._grid.startNode,this._open=new o(this.justMin),this._startNode.g=0,this.search()},s.floyd=function(){if(null!=this.path){this._floydPath=this.path.concat();var t=this._floydPath.length;if(t>2){var i=new d(0,0),s=new d(0,0);this.floydVector(i,this._floydPath[t-1],this._floydPath[t-2]);for(var n=this._floydPath.length-3;n>=0;n--)this.floydVector(s,this._floydPath[n+1],this._floydPath[n]),i.x==s.x&&i.y==s.y?this._floydPath.splice(n+1,1):(i.x=s.x,i.y=s.y)}for(n=(t=this._floydPath.length)-1;n>=0;n--)for(var h=0;h<=n-2;h++)if(this.floydCrossAble(this._floydPath[n],this._floydPath[h])){for(var e=n-1;e>h;e--)this._floydPath.splice(e,1);n=h,t=this._floydPath.length;break}}},s.floydCrossAble=function(t,i){for(var s=this.bresenhamNodes(new n(t.x,t.y),new n(i.x,i.y)),h=s.length-2;h>0;h--)if(!this._grid.getNode(s[h].x,s[h].y).walkable)return!1;return!0},s.bresenhamNodes=function(t,i){var s=Math.abs(i.y-t.y)>Math.abs(i.x-t.x);if(s){var h=t.x;t.x=t.y,t.y=h,h=i.x,i.x=i.y,i.y=h}var e=i.x>t.x?1:i.x<t.x?-1:0,o=(i.y>t.y||(i.y,t.y),(i.y-t.y)/Math.abs(i.x-t.x)),a=[],r=t.x+e,d=t.y+o;for(s?a.push(new n(t.y,t.x)):a.push(new n(t.x,t.y));r!=i.x;){var u=Math.floor(d),l=Math.ceil(d);s?a.push(new n(u,r)):a.push(new n(r,u)),u!=l&&(s?a.push(new n(l,r)):a.push(new n(r,l))),r+=e,d+=o}return s?a.push(new n(i.y,i.x)):a.push(new n(i.x,i.y)),a},s.floydVector=function(t,i,s){t.x=i.x-s.x,t.y=i.y-s.y},s.search=function(){var t=this._startNode;for(t.version=this._nowversion;t!=this._endNode;){for(var i=t.links.length,s=0;s<i;s++){var n=t.links[s].node;if(n.walkable){var h=t.links[s].cost,e=t.g+h,o=this._heuristic(n),a=e+o;n.version==this._nowversion?n.f>a&&(n.f=a,n.g=e,n.h=o,n.parent=t):(n.f=a,n.g=e,n.h=o,n.parent=t,this._open.ins(n),n.version=this._nowversion)}}if(1==this._open.a.length)return!1;t=this._open.pop()}return this.buildPath(),!0},s.buildPath=function(){this._path=[];var t=this._endNode;for(this._path.push(t);t!=this._startNode;)t=t.parent,this._path.unshift(t)},s.manhattan=function(t){return Math.abs(t.x-this._endNode.x)+Math.abs(t.y-this._endNode.y)},s.manhattan2=function(t){var i=Math.abs(t.x-this._endNode.x),s=Math.abs(t.y-this._endNode.y);return i+s+Math.abs(i-s)/1e3},s.euclidian=function(t){var i=t.x-this._endNode.x,s=t.y-this._endNode.y;return Math.sqrt(i*i+s*s)},s.chineseCheckersEuclidian2=function(t){var i=t.y/this.TwoOneTwoZero,s=t.x+t.y/2-this._endNode.x-this._endNode.y/2,n=i-this._endNode.y/this.TwoOneTwoZero;return this.sqrt(s*s+n*n)},s.sqrt=function(t){return Math.sqrt(t)},s.euclidian2=function(t){var i=t.x-this._endNode.x,s=t.y-this._endNode.y;return i*i+s*s},s.diagonal=function(t){var i=Math.abs(t.x-this._endNode.x),s=Math.abs(t.y-this._endNode.y),n=Math.min(i,s),h=i+s;return this._diagCost*n+this._straightCost*(h-2*n)},i(t,[{key:"path",get:function(){return this._path}},{key:"floydPath",get:function(){return this._floydPath}}]),t}()),o=t("BinaryHeap",function(){function t(t){void 0===t&&(t=null),this.a=[],this.justMinFun=function(t,i){return t<i},this.a.push(-1),null!=t&&(this.justMinFun=t)}var i=t.prototype;return i.ins=function(t){var i=this.a.length;this.a[i]=t;for(var s=i>>1;i>1&&this.justMinFun(this.a[i],this.a[s]);){var n=this.a[i];this.a[i]=this.a[s],this.a[s]=n,s=(i=s)>>1}},i.pop=function(){var t=this.a[1];this.a[1]=this.a[this.a.length-1],this.a.pop();for(var i=1,s=this.a.length,n=i<<1,h=n+1;n<s;){if(h<s)var e=this.justMinFun(this.a[h],this.a[n])?h:n;else e=n;if(!this.justMinFun(this.a[e],this.a[i]))break;var o=this.a[i];this.a[i]=this.a[e],this.a[e]=o,h=(n=(i=e)<<1)+1}return t},t}()),a=t("Grid",function(){function t(t,i){this._startNode=void 0,this._endNode=void 0,this._nodes=void 0,this._numCols=void 0,this._numRows=void 0,this.type=void 0,this._straightCost=1,this._diagCost=Math.SQRT2,this._numCols=t,this._numRows=i,this._nodes=[];for(var s=0;s<this._numCols;s++){this._nodes[s]=[];for(var n=0;n<this._numRows;n++)this._nodes[s][n]=new d(s,n)}}var s=t.prototype;return s.calculateLinks=function(t){void 0===t&&(t=0),this.type=t;for(var i=0;i<this._numCols;i++)for(var s=0;s<this._numRows;s++)this.initNodeLink(this._nodes[i][s],t)},s.getType=function(){return this.type},s.initNodeLink=function(t,i){var s=Math.max(0,t.x-1),n=Math.min(this.numCols-1,t.x+1),h=Math.max(0,t.y-1),e=Math.min(this.numRows-1,t.y+1);t.links=[];for(var o=s;o<=n;o++)for(var a=h;a<=e;a++){var d=this.getNode(o,a);if(d!=t&&d.walkable){if(2!=i&&o!=t.x&&a!=t.y){var u=this.getNode(t.x,a);if(!u.walkable)continue;if(!(u=this.getNode(o,t.y)).walkable)continue}var l=this._straightCost;if(t.x!=d.x&&t.y!=d.y){if(1==i)continue;if(2==i&&(t.x-d.x)*(t.y-d.y)==1)continue;l=2==i?this._straightCost:this._diagCost}t.links.push(new r(d,l))}}},s.getNode=function(t,i){return this._nodes[t][i]},s.setEndNode=function(t,i){return this._nodes.length<=0||!this._nodes[t]?null:(this._endNode=this._nodes[t][i],this._endNode)},s.setStartNode=function(t,i){this._startNode=this._nodes[t][i]},s.setWalkable=function(t,i,s){this._nodes[t][i].walkable=s},i(t,[{key:"endNode",get:function(){return this._endNode}},{key:"numCols",get:function(){return this._numCols}},{key:"numRows",get:function(){return this._numRows}},{key:"startNode",get:function(){return this._startNode}}]),t}()),r=t("Link",(function(t,i){this.node=void 0,this.cost=void 0,this.node=t,this.cost=i})),d=t("PathNode",function(){function t(t,i){this.x=void 0,this.y=void 0,this.f=void 0,this.g=void 0,this.h=void 0,this.walkable=!0,this.parent=void 0,this.version=1,this.links=void 0,this.x=t,this.y=i}return t.prototype.toString=function(){return"x:"+this.x+" y:"+this.y},t}());s._RF.pop()}}}));

System.register("chunks:///_virtual/SkillManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MonsterBuilder.ts","./Constants.ts","./DevLog.ts"],(function(t){var e,i,n,a,r,o,s,m,l,c,u,f,h,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,r=t.createClass},function(t){o=t.cclegacy,s=t._decorator,m=t.Node,l=t.Sprite,c=t.Label,u=t.Component},function(t){f=t.MonsterBuilder},function(t){h=t.BUFFER_GUAIWUJIANSHU},function(t){p=t.DevLog}],execute:function(){var T,D,d,g,S,y,v,b,B,k,M,C;o._RF.push({},"954f5KxcLND0qIuGnjo0X3D","SkillManager",void 0);var L=s.ccclass,_=s.property;t("SkillManager",(T=L("SkillManager"),D=_(m),d=_(l),g=_(c),S=_(Number),T(((C=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,n(e,"mLock",b,a(e)),n(e,"mCD",B,a(e)),n(e,"mTime",k,a(e)),n(e,"mBufferType",M,a(e)),e.mTimeData=0,e.mMaxTime=60,e.mBufferState=[],e}i(e,t);var o=e.prototype;return o.onLoad=function(){e._instance=this,this.mBufferState=[!0,!0,!0,!0,!0]},o.start=function(){this.mLock.active=!1,this.mCD.node.active=!1,this.mTime.node.active=!1,this.mTimeData=0,this.mMaxTime=60},o.onClickSkill=function(){this.mTimeData>0?p.debug("技能正在冷却中，请等待冷却时间结束"):(this.mCD.node.active=!0,this.mTime.node.active=!0,this.mTimeData=this.mMaxTime,this.mTime.string=this.formatSeconds(this.mTimeData),this.mBufferState[this.mBufferType]=!0,this.mBufferType===h&&f.instance.setAllSlow(!0))},o.update=function(t){0!==this.mTimeData&&(this.mTimeData-=t,this.mTimeData<=0?this.resetSkill():(this.mTime.string=this.formatSeconds(this.mTimeData),this.mCD.fillRange=this.mTimeData/this.mMaxTime))},o.resetSkill=function(){this.mTimeData=0,this.mCD.node.active=!1,this.mTime.node.active=!1,this.mBufferState[this.mBufferType]=!1,this.mBufferType===h&&f.instance.setAllSlow(!1)},o.formatSeconds=function(t){var e=Math.floor(t),i=Math.floor(e/60),n=e%60;return(i>9?i.toString():"0"+i)+":"+(n>9?n.toString():"0"+n)},r(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(u))._instance=void 0,b=e((v=C).prototype,"mLock",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(v.prototype,"mCD",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(v.prototype,"mTime",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(v.prototype,"mBufferType",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=v))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/SoundManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResManager.ts","./MathUtils.ts"],(function(u){var e,t,s,n,i,o,r,c,a;return{setters:[function(u){e=u.inheritsLoose,t=u.asyncToGenerator,s=u.regeneratorRuntime},function(u){n=u.cclegacy,i=u.AudioSource,o=u.Component,r=u.AudioClip},function(u){c=u.ResManager},function(u){a=u.MathUtils}],execute:function(){n._RF.push({},"55738YqBUNOJbnHKbAQ4xgS","SoundManager",void 0);var l=u("SoundManager",function(u){function n(){for(var e,t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return(e=u.call.apply(u,[this].concat(s))||this).musicAudioSource=null,e.soundAudioSources=void 0,e.curIndex=0,e.isMusicMute=!1,e.isSoundMute=!1,e.volume=0,e}e(n,u),n.getInstance=function(){return n._instance||(n._instance=new n),n._instance};var o=n.prototype;return o.load=function(u,e){null!==u&&null===e?(n.SoundsBundleName=u,n.MusicBundleName=u):null!==u&&null!==e&&(n.SoundsBundleName=e,n.MusicBundleName=u),this.musicAudioSource=this.node.addComponent(i),this.soundAudioSources=new Array;for(var t=0;t<n.MAX_SOUNDS;t++){var s=this.node.addComponent(i);this.soundAudioSources.push(s)}this.curIndex=0,this.isMusicMute=!1,this.isSoundMute=!1,this.volume=1;var o=localStorage.getItem(n.MusicMuteKey);null!=o&&(this.isMusicMute="true"==o),null!=(o=localStorage.getItem(n.SoundMuteKey))&&(this.isSoundMute="true"==o),null!==(o=localStorage.getItem(n.VolumeKey))&&(this.volume=parseFloat(o),this.volume=this.volume<0?0:this.volume,this.volume=this.volume>1?1:this.volume)},o.stopMusic=function(){this.musicAudioSource.stop()},o.playMusic=function(){var u=t(s().mark((function u(e,t){var i;return s().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(void 0===t&&(t=!0),!this.isMusicMute){u.next=3;break}return u.abrupt("return");case 3:return u.next=5,c.getInstance().getAsset(n.MusicBundleName,e,r);case 5:if(null!==(i=u.sent)){u.next=8;break}return u.abrupt("return");case 8:this.musicAudioSource.clip=i,this.musicAudioSource.loop=t,this.musicAudioSource.stop(),this.musicAudioSource.play();case 12:case"end":return u.stop()}}),u,this)})));return function(e,t){return u.apply(this,arguments)}}(),o.playSound=function(){var u=t(s().mark((function u(e,t){var i,o;return s().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(void 0===t&&(t=!1),!this.isSoundMute){u.next=3;break}return u.abrupt("return");case 3:return u.next=5,c.getInstance().getAsset(n.SoundsBundleName,e,r);case 5:if(null!==(i=u.sent)){u.next=8;break}return u.abrupt("return");case 8:o=this.soundAudioSources[this.curIndex],this.curIndex++,this.curIndex>=n.MAX_SOUNDS&&(this.curIndex=0),o.clip=i,o.loop=t,o.stop(),o.play();case 15:case"end":return u.stop()}}),u,this)})));return function(e,t){return u.apply(this,arguments)}}(),o.setVolume=function(u){this.volume=a.clamp(u,0,1),this.musicAudioSource.volume=this.volume;for(var e=0;e<this.soundAudioSources.length;e++){this.soundAudioSources[e].volume=this.volume}localStorage.setItem(n.VolumeKey,this.volume.toString())},o.setMusicMute=function(u){this.isMusicMute!=u&&(this.isMusicMute=!this.isMusicMute,this.isMusicMute?this.musicAudioSource.pause():this.musicAudioSource.play(),localStorage.setItem(n.MusicMuteKey,this.isMusicMute.toString()))},o.getMusicMute=function(u){return this.isMusicMute},o.getSoundMute=function(){return this.isSoundMute},o.setSoundMute=function(u){if(this.isSoundMute!=u){this.isSoundMute=!this.isSoundMute;for(var e=0;e<this.soundAudioSources.length;e++){var t=this.soundAudioSources[e];this.isSoundMute?t.pause():t.play()}localStorage.setItem(n.SoundMuteKey,this.isSoundMute.toString())}},n}(o));l._instance=null,l.MAX_SOUNDS=8,l.MusicMuteKey="MusicMute",l.SoundMuteKey="SoundMute",l.VolumeKey="GameVolume",l.SoundsBundleName="Sounds",l.MusicBundleName="Sounds",n._RF.pop()}}}));

System.register("chunks:///_virtual/StartScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./ResManager.ts","./UIManager.ts","./SceneManager.ts"],(function(e){var r,t,n,s,a,o,c,i,u,l,p,g,f,d,h,A,B;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized,a=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){c=e.cclegacy,i=e._decorator,u=e.ProgressBar,l=e.Component,p=e.Prefab,g=e.JsonAsset,f=e.SpriteAtlas},function(e){d=e.BundleName},function(e){h=e.ResManager},function(e){A=e.UIManager},function(e){B=e.SceneManager}],execute:function(){var S,I,y,v,m;c._RF.push({},"f9369cb4rBKVKQoefpl69Js","StartScene",void 0);var b=i.ccclass,x=i.property;e("StartScene",(S=b("StartScene"),I=x(u),S((m=r((v=function(e){function r(){for(var r,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a))||this,n(r,"progressBar",m,s(r)),r}t(r,e);var c=r.prototype;return c.start=function(){var e=a(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.progressBar.progress=.2,e.next=3,h.getInstance().loadBundleAndAllAssets(d.GUI,p);case 3:return this.progressBar.progress=.5,e.next=6,h.getInstance().loadBundleAndAllAssets(d.Atlas,f);case 6:return this.progressBar.progress=.65,e.next=9,h.getInstance().loadBundleAndAllAssets(d.Datas,g);case 9:return this.progressBar.progress=.8,e.next=12,h.getInstance().loadBundleAndAllAssets(d.Prefabs,p);case 12:return this.progressBar.progress=1,this.progressBar.node.active=!1,B.getInstance().enterScene("main"),e.next=17,A.Instance.IE_ShowUIView("UIGame");case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.update=function(e){},r}(l)).prototype,"progressBar",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=v))||y));c._RF.pop()}}}));

System.register("chunks:///_virtual/TaskDataManager.ts",["cc"],(function(t){var a;return{setters:[function(t){a=t.cclegacy}],execute:function(){a._RF.push({},"e9927IuZD1Jx6hKuJYlOe4S","TaskDataManager",void 0);t("mTaskDataManager",new(function(){function t(){this.data=[{title:"[合成]合成防御塔{0}次",max:[1,5,10,20,30,60,120,150,200,280,400],award:[10,50,110,200,300,600,1200,1500,2e3,2800,4e3],taskType:0},{title:"击败{0}个敌人",max:[1,5,10,20,30,60,120,150,200,280,400],award:[1,5,10,20,30,60,120,150,200,280,400],taskType:0},{title:"强化技能{0}次",max:[1,5,10,20,30,60,120,150,200,280,400],award:[1,5,10,20,30,60,120,150,200,280,400],taskType:0},{title:"合成{0}次防御塔",max:[1,5,10,20,30,60,120,150,200,280,400],award:[10,50,110,200,300,600,1200,1500,2e3,2800,4e3],taskType:1}]}var a=t.prototype;return a.getTaskDataByID=function(t){return t<0||t>=this.data.length?null:this.data[t]},a.getAward=function(t,a){var e=this.getTaskDataByID(t);if(null==e)return null;var n=e.award;return a<0||a>=n.length?null:n[a]},a.getTitle=function(t,a){var e=this.getTaskDataByID(t);if(null==e)return null;var n=e.title;return a<0||a>=e.max.length?null:n.replace("{0}",e.max[a].toString())},a.getMaxCount=function(t,a){var e=this.getTaskDataByID(t);return null==e||a<0||a>=e.max.length?null:e.max[a]},a.getData=function(){return this.data},t}()));a._RF.pop()}}}));

System.register("chunks:///_virtual/TaskItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataManager.ts","./GameUIManager.ts","./TaskDataManager.ts","./CoinFlyManager.ts","./DiamondFlyManager.ts"],(function(t){var a,e,n,i,r,o,s,l,u,c,m,d,g,p,_,I;return{setters:[function(t){a=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,s=t.Label,l=t.ProgressBar,u=t.Button,c=t.Node,m=t.Component},function(t){d=t.DataManager},function(t){g=t.GameUIManager},function(t){p=t.mTaskDataManager},function(t){_=t.CoinFlyManager},function(t){I=t.DiamondFlyManager}],execute:function(){var f,D,b,h,y,k,w,T,v,C,B,M,x,F,z,L,G;r._RF.push({},"22623WRX0xB+JM5u1YU9qmT","TaskItem",void 0);var U=o.ccclass,E=o.property;t("TaskItem",(f=U("TaskItem"),D=E(s),b=E(s),h=E(l),y=E(s),k=E(u),w=E(c),T=E(c),f((B=a((C=function(t){function a(){for(var a,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return a=t.call.apply(t,[this].concat(r))||this,n(a,"m_title",B,i(a)),n(a,"m_curLabel",M,i(a)),n(a,"m_progressBar",x,i(a)),n(a,"m_awardLabel",F,i(a)),n(a,"m_getButton",z,i(a)),n(a,"m_awardCoin",L,i(a)),n(a,"m_awardDiamond",G,i(a)),a.m_taskID=0,a}e(a,t);var r=a.prototype;return r.start=function(){},r.setTaskID=function(t){this.m_taskID=t},r.updateItem=function(){this.m_getButton.interactable=!1;var t=p.getData(),a=p.getTaskDataByID(this.m_taskID);if(!(this.m_taskID>=t.length)){var e=d.getInstance().getTaskByID(this.m_taskID),n=p.getTitle(this.m_taskID,e.maxIndex);this.m_title.string=n;var i=p.getMaxCount(this.m_taskID,e.maxIndex);e.curCount>=i&&(e.curCount=i,this.m_getButton.interactable=!0);var r=e.curCount+"/"+i;this.m_curLabel.string=r;var o=e.curCount/i;this.m_progressBar.progress=o,0==a.taskType?(this.m_awardCoin.active=!0,this.m_awardDiamond.active=!1):(this.m_awardCoin.active=!1,this.m_awardDiamond.active=!0),this.m_awardLabel.string=""+p.getAward(this.m_taskID,e.maxIndex)}},r.goldFlyEnd=function(t){d.getInstance().addGold(t),g.instance.updateGameUI()},r.diamondFlyEnd=function(t){d.getInstance().addDiamond(t),g.instance.updateGameUI()},r.onClickGet=function(){var t=this,a=d.getInstance().getTaskByID(this.m_taskID),e=p.getAward(this.m_taskID,a.maxIndex),n=p.getTaskDataByID(this.m_taskID),i=0,r=setInterval((function(){i<50?(!function(){if(0==n.taskType){var a=Math.floor(e/50);_.instance.createCoinToTip(t.m_awardCoin,t.goldFlyEnd.bind(t),a,g.instance.m_coinFlyNode)}if(1==n.taskType){var i=Math.floor(e/50);I.instance.createDiamondToTip(t.m_awardCoin,t.diamondFlyEnd.bind(t),i,g.instance.m_coinFlyNode)}}(),i++):(clearInterval(r),0==n.taskType?d.getInstance().setGold(e):d.getInstance().setDiamond(e),g.instance.updateGameUI())}),10);d.getInstance().nextTask(this.m_taskID),this.updateItem()},r.update=function(t){},a}(m)).prototype,"m_title",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=a(C.prototype,"m_curLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=a(C.prototype,"m_progressBar",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=a(C.prototype,"m_awardLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=a(C.prototype,"m_getButton",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=a(C.prototype,"m_awardCoin",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=a(C.prototype,"m_awardDiamond",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=C))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/TaskView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TaskDataManager.ts","./TaskItem.ts"],(function(t){var e,i,n,a,o,r,s,c,u,m,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,s=t.Node,c=t.instantiate,u=t.Component},function(t){m=t.mTaskDataManager},function(t){l=t.TaskItem}],execute:function(){var h,p,d,f,_,v,I;o._RF.push({},"af914wr1CpLGYQ2PWVWWcyQ","TaskView",void 0);var g=r.ccclass,k=r.property;t("TaskView",(h=g("TaskView"),p=k(s),d=k(s),h((v=e((_=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,n(e,"m_cloneItem",v,a(e)),n(e,"m_content",I,a(e)),e.m_item=[],e.m_selectId=0,e}i(e,t);var o=e.prototype;return o.onLoad=function(){this.m_cloneItem.active=!1,this.m_item=[],this.m_selectId=0,this.updateData()},o.start=function(){},o.show=function(){this.updateData(),this.node.active=!0},o.hide=function(){this.node.active=!1},o.updateData=function(){for(var t=0;t<this.m_item.length;t++)this.m_item[t].node.active=!1;for(var e=m.getData(),i=0;i<e.length;i++)e[i].taskType==this.m_selectId&&(null==this.m_item[i]&&(this.m_item[i]=this.createItem(i)),this.m_item[i].node.active=!0,this.m_item[i].updateItem())},o.createItem=function(t){var e=c(this.m_cloneItem);this.m_content.addChild(e),e.active=!0;var i=e.getComponent(l);return i.setTaskID(t),i},o.onChangeClick=function(t,e){this.m_selectId=parseInt(e),this.updateData()},o.update=function(t){},e}(u)).prototype,"m_cloneItem",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(_.prototype,"m_content",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=_))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/TimerManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,s;return{setters:[function(e){i=e.inheritsLoose},function(e){t=e.cclegacy,s=e.Component}],execute:function(){t._RF.push({},"3b66fiPf/ZHOZPx+z6oaQDp","TimerManager",void 0);var n=function(){this.mTimeId=0,this.self=null,this.repeat=0,this.interval=0,this.callback=void 0,this.data=void 0,this.pastTime=0,this.triggerTime=0,this.isRemove=!1};e("TimerManager",function(e){function t(){for(var i,t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return(i=e.call.apply(e,[this].concat(s))||this).mTimerList=[],i.mIndex=1,i}i(t,e),t.getInstance=function(){return t._instance||(t._instance=new t),t._instance};var s=t.prototype;return s.load=function(){},s.scheduleWithParams=function(e,i,t,s,r,a){var m=new n;return m.mTimeId=this.mIndex++,0===this.mIndex&&(this.mIndex=1),m.callback=e,m.self=i,m.data=t,m.repeat=s<=0?-1:s,m.interval=r,m.triggerTime=a,m.pastTime=0,this.mTimerList.push(m),m.mTimeId},s.scheduleTime=function(e,i,t,s,n){return this.scheduleWithParams(e,i,null,t,s,n)},s.scheduleOnceTime=function(e,i,t){return this.scheduleTime(e,i,1,0,t)},s.scheduleOnceWithParams=function(e,i,t,s){return this.scheduleWithParams(e,i,t,1,0,s)},s.unSchedule=function(e){for(var i=0;i<this.mTimerList.length;++i)if(this.mTimerList[i].mTimeId==e)return void(this.mTimerList[i].isRemove=!0)},s.update=function(e){if(null!==this.mTimerList&&0!==this.mTimerList.length){for(var i=0;i<this.mTimerList.length;i++){var t=this.mTimerList[i];if(!0!==t.isRemove&&(t.pastTime+=e,t.pastTime>=t.triggerTime)){if(t.callback.call(t.self,t.data),-1!==t.repeat&&t.repeat--,0===t.repeat)return void(t.isRemove=!0);t.triggerTime=t.interval,t.pastTime=0}}for(var s=0;s<this.mTimerList.length;s++)!0===this.mTimerList[s].isRemove&&(this.mTimerList.splice(s,1),s--)}},t}(s))._instance=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/TopUIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DateDefine.ts","./DataManager.ts","./MathUtils.ts","./EventManager.ts","./Constants.ts"],(function(t){var n,e,a,i,o,r,c,l,s,u,p,g,m,h;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized,o=t.createClass},function(t){r=t.cclegacy,c=t._decorator,l=t.Label,s=t.Component},function(t){u=t.mGlobalData},function(t){p=t.DataManager},function(t){g=t.MathUtils},function(t){m=t.EventManager},function(t){h=t.UIEventName}],execute:function(){var f,d,b,_,C,v,y,M,k,I;r._RF.push({},"890eeplWtdCb6o0Ca8uiC7N","TopUIManager",void 0);var D=c.ccclass,P=c.property;t("TopUIManager",(f=D("TopUIManager"),d=P(l),b=P(l),_=P(l),f(((I=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return n=t.call.apply(t,[this].concat(o))||this,a(n,"m_labGold",y,i(n)),a(n,"m_diamond",M,i(n)),a(n,"m_labCheckPoint",k,i(n)),n}e(n,t);var r=n.prototype;return r.onLoad=function(){n._instance?this.destroy():n._instance=this},r.start=function(){this.updateGameUI()},r.updateGameUI=function(){var t=p.getInstance().getGold(),n=p.getInstance().getDiamond();this.m_labGold.string=g.formatNum(t),this.m_diamond.string=g.formatNum(n),this.updateCheckPoint()},r.updateCheckPoint=function(){var t=p.getInstance().getCheckPoint(),n=u.getData(t.big,t.small);this.m_labCheckPoint.string="关卡",this.m_labCheckPoint.string+=t.big+1+"-",this.m_labCheckPoint.string+=""+(t.small+1),n.haveData||(this.m_labCheckPoint.string+="*")},r.onClickMap=function(){m.getInstance().emit(h.changeMapViewActive,null)},r.update=function(t){},o(n,null,[{key:"instance",get:function(){return this._instance}}]),n}(s))._instance=void 0,y=n((v=I).prototype,"m_labGold",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=n(v.prototype,"m_diamond",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=n(v.prototype,"m_labCheckPoint",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=v))||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/TransformComponent.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"ba766Vqs+5P2qrPFQFR0e/F","TransformComponent",void 0);n("TransformComponent",(function(){this.x=0,this.y=0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/ttSDK.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"952c2vCpaxEfIGBAF7115WX","ttSDK",void 0);t("ttSDK",function(){function t(){}var n=t.prototype;return n.login=function(){console.log("ttSDK login"),tt.login({force:!0,success:function(t){console.log("登录成功"),tt.getUserInfo({withCredentials:!0,withRealNameAuthenticationInfo:!0,success:function(t){console.log("getUserInfo 调用成功",t.userInfo)},fail:function(t){console.log("getUserInfo 调用失败",t.errMsg)}})},fail:function(t){console.log("登录失败",t.errMsg)}})},n.getSetting=function(){tt.getSetting({success:function(t){console.log("getSetting ",t)},fail:function(t){console.log("getSetting 调用失败")}})},n.openSetting=function(){tt.openSetting({success:function(t){console.log("openSetting",t)},fail:function(t){console.log("openSetting 调用失败")}})},n.checkUpdate=function(){var t=this,n=tt.getUpdateManager();n.onCheckForUpdate((function(n){n.hasUpdate||(console.log("当前版本已经是最新版本"),t.login())})),n.onUpdateReady((function(t){tt.showModal({title:"更新提示",content:"新版本已经准备好，是否重启小游戏？",success:function(t){t.confirm&&n.applyUpdate()}})})),n.onUpdateFailed((function(t){console.log("版本下载失败原因",t),tt.showToast({title:"新版本下载失败，请稍后再试",icon:"none"})})),this.onRealNameAuthenticationComplete()},n.authenticateRealName=function(){tt.onTouchEnd((function(){tt.authenticateRealName({success:function(t){console.log("用户实名认证成功")},fail:function(t){console.log("用户实名认证失败",t.errMsg)}})}))},n.onRealNameAuthenticationComplete=function(){tt.onRealNameAuthenticationComplete((function(t){console.log("实名认证完成回调 ",t)}))},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/UIAttackUpLeftUICtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./UIComponent.ts","./DataManager.ts","./DateDefine.ts","./UIManager.ts"],(function(t){var n,e,a,i,o,s,r,l,c,u,p,f,m;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){i=t.cclegacy,o=t._decorator,s=t.Animation,r=t.tween,l=t.Label},function(t){c=t.GUI},function(t){u=t.UIComponent},function(t){p=t.DataManager},function(t){f=t.mGlobalData},function(t){m=t.UIManager}],execute:function(){var h;i._RF.push({},"59751nli9FHAblCWSvjPW3m","UIAttackUpLeftUICtrl",void 0);var U=o.ccclass;o.property,t("UIAttackUpLeftUICtrl",U("UIAttackUpLeftUICtrl")(h=function(t){function i(){for(var n,e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return(n=t.call.apply(t,[this].concat(a))||this).m_labLevel=null,n.m_bossName=null,n.m_bossSprite=null,n.m_bossAtlas=null,n.m_anim=null,n.m_callBack=null,n}n(i,t);var o=i.prototype;return o.onLoad=function(){this.init(),this.m_anim=this.node.getComponent(s)},o.init=function(){var t=e(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.m_labLevel=this.ViewComponent("ui_boss_p2/tips",l),this.m_bossName=this.ViewComponent("ui_boss_p2/name",l);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.showView=function(t){this.play(t)},o.play=function(t){var n=this,e=p.getInstance().getCheckPoint();this.m_labLevel.string=e.big+1+"-"+(e.small+1);for(var a=f.getCurMonsterData(),i=0;i<a.length;i++)if(2===a[i].type){a[i].id;break}this.m_bossName.string=t,this.m_anim.play("joinLeft"),r(this.node).delay(2).call((function(){m.Instance.DestroyUIView(c.UIAttackUpLeft),n.node.destroy()})).start()},o.end=function(){this.destroy()},i}(u))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/UIAttackUpRightUICtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./UIComponent.ts","./DataManager.ts","./DateDefine.ts","./UIManager.ts"],(function(t){var n,e,a,i,o,s,r,c,l,u,p,h,m;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){i=t.cclegacy,o=t._decorator,s=t.Animation,r=t.tween,c=t.Label},function(t){l=t.GUI},function(t){u=t.UIComponent},function(t){p=t.DataManager},function(t){h=t.mGlobalData},function(t){m=t.UIManager}],execute:function(){var f;i._RF.push({},"ad6d2c6iQJEAaO+POo+S9I9","UIAttackUpRightUICtrl",void 0);var g=o.ccclass;o.property,t("UIAttackUpRightUICtrl",g("UIAttackUpRightUICtrl")(f=function(t){function i(){for(var n,e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return(n=t.call.apply(t,[this].concat(a))||this).m_labLevel=null,n.m_bossName=null,n.m_bossSprite=null,n.m_bossAtlas=null,n.m_anim=null,n.m_callBack=null,n}n(i,t);var o=i.prototype;return o.onLoad=function(){this.init(),this.m_anim=this.node.getComponent(s)},o.init=function(){var t=e(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.m_labLevel=this.ViewComponent("ui_boss_p2/tips",c),this.m_bossName=this.ViewComponent("ui_boss_p2/name",c);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.showView=function(t){this.play(t)},o.play=function(t){var n=this,e=p.getInstance().getCheckPoint();this.m_labLevel.string=e.big+1+"-"+(e.small+1);for(var a=h.getCurMonsterData(),i=0;i<a.length;i++)if(2===a[i].type){a[i].id;break}this.m_bossName.string=t,this.m_anim.play("joinRight"),r(this.node).delay(2).call((function(){m.Instance.DestroyUIView(l.UIAttackUpRight),n.node.destroy()})).start()},o.end=function(){this.destroy()},i}(u))||f);i._RF.pop()}}}));

System.register("chunks:///_virtual/UIBossUICtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./ResManager.ts","./UIComponent.ts","./DataManager.ts","./DateDefine.ts","./DevLog.ts","./UIManager.ts"],(function(t){var n,e,s,o,a,i,r,l,c,u,m,p,h,g,f,_,b,I;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){o=t.cclegacy,a=t._decorator,i=t.Animation,r=t.tween,l=t.Label,c=t.Sprite,u=t.SpriteAtlas},function(t){m=t.GUI,p=t.BundleName},function(t){h=t.ResManager},function(t){g=t.UIComponent},function(t){f=t.DataManager},function(t){_=t.mGlobalData},function(t){b=t.DevLog},function(t){I=t.UIManager}],execute:function(){var v;o._RF.push({},"a81d9+FgFRGa7Sl1t3YSXmh","UIBossUICtrl",void 0);var y=a.ccclass;a.property,t("UIBossUICtrl",y("UIBossUICtrl")(v=function(t){function o(){for(var n,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return(n=t.call.apply(t,[this].concat(s))||this).m_labLevel=null,n.m_bossName=null,n.m_bossSprite=null,n.m_bossAtlas=null,n.m_anim=null,n.m_callBack=null,n}n(o,t);var a=o.prototype;return a.onLoad=function(){this.init(),this.m_anim=this.node.getComponent(i)},a.init=function(){var t=e(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.m_labLevel=this.ViewComponent("ui_boss_p2/checkPoint",l),this.m_bossName=this.ViewComponent("ui_boss_p2/name",l),this.m_bossSprite=this.ViewComponent("0",c),t.next=5,h.getInstance().getAsset(p.Atlas,"monster_2",u);case 5:this.m_bossAtlas=t.sent,this.play();case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.play=function(){var t=this,n=f.getInstance().getCheckPoint();this.m_labLevel.string=n.big+1+"-"+(n.small+1);for(var e=0,s=_.getCurMonsterData(),o=0;o<s.length;o++)if(2===s[o].type){e=s[o].id;break}var a=_.getBossNameByID(e);this.m_bossName.string=a;var i=this.m_bossAtlas.getSpriteFrame(e.toString());this.m_bossSprite.spriteFrame=i,this.m_anim.play("bossView"),r(this.node).delay(2).call((function(){b.debug("销毁BossUI..."),I.Instance.DestroyUIView(m.UIBoss),t.node.destroy()})).start()},a.end=function(){this.destroy()},o}(g))||v);o._RF.pop()}}}));

System.register("chunks:///_virtual/UIComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./DevLog.ts"],(function(t){var e,n,o,i,s,r,a;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t.view,i=t.sys,s=t.Component},function(t){r=t.EventManager},function(t){a=t.DevLog}],execute:function(){n._RF.push({},"19ec2elzW9O6ZWYLxuKN/di","UIComponent",void 0);t("UIComponent",function(t){function n(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).mEventMap={},e}e(n,t);var s=n.prototype;return s.safeAreaUpdate=function(){var t=this.node.getChildByPath("TopRoot"),e=this.node.getChildByPath("BottomRoot"),n=o.getDesignResolutionSize(),s=o.getVisibleSize();console.log("frameSize",s),console.log("设计分辨率："+n);var r=n.height-s.height;t&&t.setPosition(t.position.x,t.position.y-r/2),e&&e.setPosition(e.position.x,e.position.y+r/2);var a=i.getSafeAreaRect();console.log("safeArea",a),a.y>0&&t&&t.setPosition(t.position.x,t.position.y-a.y/2)},s.ViewNode=function(t){return this.node.getChildByPath(t)},s.ViewComponent=function(t,e){var n=this.node.getChildByPath(t);return null===n?null:n.getComponent(e)},s.AddButtonListener=function(t,e,n){var o=this.ViewNode(t);o?o.on("click",n,e):a.error(t+" 对应的节点不存在,无法添加点击时间")},s.AddEventListener=function(t,e,n){this.mEventMap[t]||(this.mEventMap[t]=[]);var o={func:e,self:n};this.mEventMap[t].push(o),r.getInstance().addEventListener(t,e,n)},s.EmitEventListener=function(t,e){void 0===e&&(e={}),r.getInstance().emit(t,e)},s.onDestroy=function(){for(var t in this.mEventMap)for(var e=this.mEventMap[t],n=0;n<e.length;n++)r.getInstance().removeEventListener(t,e[n].func,e[n].self);this.mEventMap=null},n}(s));n._RF.pop()}}}));

System.register("chunks:///_virtual/UIGameUICtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIComponent.ts","./GameManager.ts","./Constants.ts","./ResManager.ts","./CrownManager.ts","./DateDefine.ts","./DataManager.ts","./UIManager.ts","./IntensifyDataManager.ts","./CannonManager.ts","./MathUtils.ts","./EcsFactory.ts","./DataModelManager.ts","./GameModel.ts","./DevLog.ts","./Group.ts","./ECSWorld.ts","./BiliBiliManager.ts","./Barrage.ts","./SoundManager.ts","./EventManager.ts"],(function(e){var t,n,a,i,s,o,r,c,u,m,h,d,l,I,p,f,w,g,_,k,U,v,C,M,B,N,E,y,b,L,S,x,G,V,T,A,P,R,D,F,O,H,Y,z,K,J,W,j,q,X,Z,Q,$,ee,te,ne,ae,ie;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized,s=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){r=e.cclegacy,c=e._decorator,u=e.Node,m=e.Label,h=e.PhysicsSystem2D,d=e.EPhysics2DDrawFlags,l=e.v2,I=e.Sprite,p=e.tween,f=e.v3,w=e.Vec2,g=e.instantiate,_=e.Vec3,k=e.UITransform,U=e.SpriteAtlas},function(e){v=e.UIComponent},function(e){C=e.GameManager},function(e){M=e.UIEventName,B=e.BarrageEventName,N=e.GUI,E=e.INTENSIFY_KUORONG,y=e.BarrageType,b=e.BLUE_INTENSIFY_BAOJI,L=e.RED_INTENSIFY_BAOJI,S=e.BundleName,x=e.RED_INTENSIFY_ATTACK,G=e.BLUE_INTENSIFY_ATTACK,V=e.RED_INTENSIFY_RUN,T=e.BLUE_INTENSIFY_RUN,A=e.RED_INTENSIFY_RESTORE,P=e.BLUE_INTENSIFY_RESTORE,R=e.RED_INTENSIFY_LIFE,D=e.BLUE_INTENSIFY_LIFE},function(e){F=e.ResManager},function(e){O=e.CrownManager},function(e){H=e.mGlobalData},function(e){Y=e.DataManager},function(e){z=e.UIManager},function(e){K=e.mIntensifyManager},function(e){J=e.CannonManager},function(e){W=e.MathUtils},function(e){j=e.EcsFactory},function(e){q=e.DataModelManager,X=e.ModelName},function(e){Z=e.GameState},function(e){Q=e.DevLog},function(e){$=e.GroupName},function(e){ee=e.ECSWorld},function(e){te=e.BiliBiliManager},function(e){ne=e.Barrage},function(e){ae=e.SoundManager},function(e){ie=e.EventManager}],execute:function(){var se,oe,re,ce,ue;r._RF.push({},"13081KKZ0hFFqV4HPS6Xeyf","UIGameUICtrl",void 0);var me=c.ccclass,he=c.property;e("UIGameUICtrl",(se=me("UIGameUICtrl"),oe=he(u),se((ue=t((ce=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))||this).m_imageAtlas=null,t.startPos=[],t.m_mapBlockItem=[],t.m_hammer=null,t.m_makeNumberLabel=null,t.m_water=null,t.m_destroyNode=null,t.m_canMakeCount=9999,t.m_maxMakeCount=9999,t.m_hammerAction=!1,t.m_waterAction=!1,t.m_labGold=null,t.m_diamond=null,t.m_labCheckPoint=null,t.blockMaps=null,t.m_curCrown=null,t.m_nextCrown=null,t.m_crown=null,t.crownBuild=null,a(t,"mUIBoard",ue,i(t)),t.mTimeData=20,t.mMaxTime=20,t.mBufferSpaceTime=1,t.mCurrentBufferTime=1,t.debugTime=5,t.mGamePeerTime=1200,t.mUIStartUICtrl=null,t}n(t,e);var r=t.prototype;return r.onLoad=function(){this.blockMaps=this.ViewNode("blockMaps"),this.crownBuild=this.ViewNode("crownBuild"),this.mUIBoard=this.node.getChildByName("UIBoard"),this.m_hammer=this.ViewNode("BottomRoot/make/ui_build_hammer"),this.m_makeNumberLabel=this.ViewComponent("BottomRoot/make/num",m),this.m_water=this.ViewNode("BottomRoot/make/ui_build_water"),this.m_destroyNode=this.ViewNode("BottomRoot/destroy"),this.updateGameBottomUI(),this.setShowDestroy("",!1),this.AddButtonListener("BottomRoot/make/make",this,this.onClickMake),this.AddButtonListener("BottomRoot/make/autoMake",this,this.onClickAutoMake),this.AddButtonListener("BottomRoot/task/bt",this,this.showTaskView),this.AddButtonListener("BottomRoot/intensify",this,this.showIntensifyView),this.m_labGold=this.ViewComponent("TopRoot/glod/btGlod/ui_coin_rect/gold",m),this.m_diamond=this.ViewComponent("TopRoot/glod/btDiamond/ui_coin_rect/diamond",m),this.m_labCheckPoint=this.ViewComponent("TopRoot/checkPoint",m),this.updateGameTopUI(),this.AddEventListener(M.updateGameUI,this.updateGameUI,this),this.AddEventListener(M.showSucceed,this.showSucceed,this),this.AddEventListener(M.showFaild,this.showFaild,this),this.AddEventListener(M.changeMapViewActive,this.changeMapViewActive,this),this.AddEventListener(M.updateGameBottomUI,this.updateGameBottomUI,this),this.AddEventListener(M.setShowDestroy,this.setShowDestroy,this),this.AddEventListener(M.isInDestroy,this.isInDestroy,this),this.AddEventListener(B.GameEnd,this.gameEnd,this),this.AddEventListener(M.restartGameUI,this.restartGameUI,this),this.AddEventListener(B.Barrage,this.onBarrage,this),j.init(this.ViewNode("monsterNode"),this.ViewNode("cannonBuild")),z.Instance.IE_ShowUIView(N.UIStart),this.AddButtonListener("ui_win_rect/btnClose",this,(function(){z.Instance.DestroyUIView(N.UIStart)})),ae.getInstance().playMusic("Musics/background.mp3")},r.restartGameUI=function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.mUIBoard.active=!1,e.next=3,z.Instance.IE_ShowUIView(N.UIStart);case 3:this.mUIStartUICtrl=e.sent,ie.getInstance().emit(M.resetAreaHp,{});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.clickLogin=function(){q.instance.getModel(X.Game).state=Z.Playering},r.gameEnd=function(){},r.start=function(){h.instance.enable=!0,h.instance.debugDrawFlags=d.None,this.startPos.push(l(0,0)),this.startPos.push(l(640,0)),this.Init(),this.safeAreaUpdate()},r.Init=function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.getInstance().getAsset(S.Atlas,"block-1",U);case 2:this.m_imageAtlas=e.sent,t=C.instance.getCurBlockData(),this.buildBlockMap(0,t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.updateGameUI=function(){this.updateGameBottomUI(),this.updateGameTopUI()},r.createBossSettlement=function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showMapView();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.showSucceed=function(){var e=s(o().mark((function e(){var t,n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=H.getCurCheckPoint(),Y.getInstance().addGold(t.succedGold),Y.getInstance().addDiamond(t.diamond),this.updateGameUI(),0,q.instance.getModel(X.Game).state=Z.End,ee.instance.destoryAllMonster(),this.scheduleOnce((function(){n.mUIBoard.active=!0}),0);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.showFaild=function(){var e=s(o().mark((function e(){var t,n,a=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.Instance.IE_ShowUIView(N.UISettlement);case 2:t=e.sent,n=H.getCurCheckPoint(),Y.getInstance().addGold(n.faildGold),this.updateGameUI(),t.showFaild(n.faildGold),this.scheduleOnce((function(){H.previousCheckPoint(),t.node.destroy(),a.updateGameUI(),C.instance.playGame(),q.instance.getModel(X.Game).state=Z.Playering}),2);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.showMapView=function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.Instance.IE_ShowUIView(N.UIMap);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r.hideMapView=function(){z.Instance.DestroyUIView(N.UIMap)},r.changeMapViewActive=function(){z.Instance.GetUIComponent(N.UIMap)?this.hideMapView():this.showMapView()},r.buildBlockNextMap=function(e){null!=e&&this.buildBlockMap(1,e)},r.buildBlockMap=function(e,t){var n;null==this.m_mapBlockItem[e]&&(this.m_mapBlockItem[e]=[]);for(var a=t.length,i=null==(n=t[0])?void 0:n.length,s=0;s<a;s++){var o=106*s;null==this.m_mapBlockItem[e][s]&&(this.m_mapBlockItem[e][s]=[]);for(var r=0;r<i;r++){var c=106*r,m=void 0;null==this.m_mapBlockItem[e][s][r]?(m=new u,this.blockMaps.addChild(m)):m=this.m_mapBlockItem[e][s][r].node;var h=c+53+this.startPos[e].x,d=-o-53+this.startPos[e].y;m.setPosition(h,d);var p=m.getComponent(I)||m.addComponent(I);p._selfIndex=l(r,s),this.m_mapBlockItem[e][s][r]=p;var f=""+t[s][r],w=this.m_imageAtlas.getSpriteFrame(f);p.spriteFrame=w}}},r.moveToNextMap=function(e){var t=this;p(this.node).by(.5,{position:f(-640,0)}).call((function(){t.node.setPosition(f(-320,310)),t.buildBlockMap(0,e)})).start(),O.instance.moveToNextMap()},r.buildEndPoint=function(){var e=C.instance.getCurPahtList(),t=e[e.length-1],n=new w(0,0);n.x=106*t.x+53,n.y=106*-t.y-53,null==this.m_curCrown&&(this.m_curCrown=g(this.m_crown),this.crownBuild.addChild(this.m_curCrown)),n.y+=25,this.m_curCrown.setPosition(new _(n.x,n.y,0)),Q.debug("UIGameCtrl 构建终点....")},r.showCrownBuild=function(){this.crownBuild.active=!0},r.hideCrownBuild=function(){this.crownBuild.active=!1},r.setNextCrownPos=function(e){null==this.m_nextCrown&&(this.m_nextCrown=g(this.m_crown),this.crownBuild.addChild(this.m_nextCrown)),e.y+=25,this.m_nextCrown.setPosition(new _(e.x,e.y,0))},r.crownBuildmoveToNextMap=function(){var e=this,t={position:new _(-640,0,0)};p(this.crownBuild).by(.5,t).call((function(){e.crownBuild.setPosition(new _(-320,310,0)),e.buildEndPoint()})).start()},r.onClickMake=function(){var e=this;if(q.instance.getModel(X.Game).state==Z.Playering){var t=J.instance.getCanMakeIndex();null!=t?0!=this.m_canMakeCount?(this.m_hammerAction||(this.m_hammerAction=!0,p(this.m_hammer).to(.2,{eulerAngles:new _(-90,0,0)}).to(.2,{eulerAngles:new _(0,0,0)}).call((function(){e.m_hammerAction=!1})).start()),this.subMakeNumber(),J.instance.cannonBuild(t)):Q.debug("可创建已经为0"):Q.debug("没有炮台位置了")}else Q.info("当前不处于游戏状态,跳过创建")},r.addMakeNumber=function(){this.m_canMakeCount++,this.m_canMakeCount>this.m_maxMakeCount&&(this.m_canMakeCount=this.m_maxMakeCount),this.updateMakeCount()},r.subMakeNumber=function(){this.m_canMakeCount--,this.m_canMakeCount<0&&(this.m_canMakeCount=0),this.m_waterAction||this.m_water.getComponent(k).setContentSize(0,0),this.updateMakeCount()},r.updateMakeCount=function(){this.m_makeNumberLabel.string=this.m_canMakeCount+"/"+this.m_maxMakeCount},r.updateBottom=function(e){if(this.m_canMakeCount<this.m_maxMakeCount){var t=this.m_water.getComponent(k).height+50*e;this.m_water.getComponent(k).setContentSize(133,t),this.m_waterAction=!0,t>=133&&(this.addMakeNumber(),this.m_canMakeCount==this.m_maxMakeCount?(this.m_water.getComponent(k).setContentSize(133,133),this.m_waterAction=!1):this.m_water.getComponent(k).setContentSize(133,0))}},r.onClickAutoMake=function(){q.instance.getModel(X.Game).state==Z.Playering&&J.instance.autoMerge()},r.updateGameBottomUI=function(){this.m_waterAction||this.m_water.getComponent(k).setContentSize(133,0);var e=Y.getInstance().getInternsifLevel(E);this.m_maxMakeCount=K.getValue(E,e),this.updateMakeCount()},r.showTaskView=function(){z.Instance.IE_ShowUIView(N.UITask)},r.showIntensifyView=function(){z.Instance.IE_ShowUIView(N.UIIntensify)},r.setShowDestroy=function(e,t){console.log("setShowDestroy",e,t),this.m_destroyNode.active=t},r.isInDestroy=function(e,t){var n=this.m_destroyNode.getComponent(k).convertToNodeSpaceAR(f(t.x,t.y));return n.x<50&&n.x>-50&&n.y<50&&n.y>-50},r.onBarrage=function(e,t){console.info("接收到Bilibili弹幕信息:"+JSON.stringify(t)),ne.getInstance().decode(t,(function(e,t){console.info("解析弹幕信息:"+e+" "+t)}))},r.decodeBarrag=function(e){if(e)switch(Q.debug("解析礼物:"+e.cmd+" "+e.gift_id),e.cmd){case y.LIVE_OPEN_PLATFORM_LIKE:this.restoreHp(e);break;case y.LIVE_OPEN_PLATFORM_SEND_GIFT:switch(e.getGiftId()){case 31036:this.addHp(e);break;case 30758:this.addAttackLevel(e);break;case 31537:this.addRunLevel(e);break;case 31538:this.addRestoreLevel(e);break;case 31087:this.addLifeLevel(e)}break;case y.LIVE_OPEN_PLATFORM_DM:}},r.addBaoJiLevel=function(e){void 0===e&&(e=$.BULE),e==$.BULE?Y.getInstance().addInternsifLevel(b):Y.getInstance().addInternsifLevel(L)},r.addAttackLevel=function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=ne.getInstance().searchUserByCmd(t))&&n.addScore(t.price),t.getGroupName()!=$.BULE){e.next=10;break}return Y.getInstance().addInternsifLevel(G),e.next=6,z.Instance.IE_ShowUIView(N.UIAttackUpRight);case 6:e.sent.showView(t.getNickName()),e.next=15;break;case 10:return Y.getInstance().addInternsifLevel(x),e.next=13,z.Instance.IE_ShowUIView(N.UIAttackUpLeft);case 13:e.sent.showView(t.getNickName());case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.addRunLevel=function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=ne.getInstance().searchUserByCmd(t))&&n.addScore(t.price),t.getGroupName()!=$.BULE){e.next=10;break}return Y.getInstance().addInternsifLevel(T),e.next=6,z.Instance.IE_ShowUIView(N.UIRunUpRight);case 6:e.sent.showView(t.getNickName()),e.next=15;break;case 10:return Y.getInstance().addInternsifLevel(V),e.next=13,z.Instance.IE_ShowUIView(N.UIRunUpLeft);case 13:e.sent.showView(t.getNickName());case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.addRestoreLevel=function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=ne.getInstance().searchUserByCmd(t))&&n.addScore(t.price),t.getGroupName()!=$.BULE){e.next=10;break}return Y.getInstance().addInternsifLevel(P),e.next=6,z.Instance.IE_ShowUIView(N.UIRetoreUpRight);case 6:e.sent.showView(t.getNickName()),e.next=15;break;case 10:return Y.getInstance().addInternsifLevel(A),e.next=13,z.Instance.IE_ShowUIView(N.UIRetoreUpLeft);case 13:e.sent.showView(t.getNickName());case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.addLifeLevel=function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=ne.getInstance().searchUserByCmd(t))&&n.addScore(t.price),t.getGroupName()!=$.BULE){e.next=10;break}return Y.getInstance().addInternsifLevel(D),e.next=6,z.Instance.IE_ShowUIView(N.UILifeUpRight);case 6:e.sent.showView(t.getNickName()),e.next=15;break;case 10:return Y.getInstance().addInternsifLevel(R),e.next=13,z.Instance.IE_ShowUIView(N.UILifeUpLeft);case 13:e.sent.showView(t.getNickName());case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.restoreHp=function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=O.instance.getEndPointNode(t.getGroupName()),O.instance.restoreHp(n),$.BULE!=t.getGroupName()){e.next=9;break}return e.next=5,z.Instance.IE_ShowUIView(N.UIRetoreUpRight);case 5:e.sent.showView(t.getNickName()),e.next=13;break;case 9:return e.next=11,z.Instance.IE_ShowUIView(N.UIRetoreUpLeft);case 11:e.sent.showView(t.getNickName());case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.addHp=function(){var e=s(o().mark((function e(t){var n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=ne.getInstance().searchUserByCmd(t))&&n.addScore(t.price),a=O.instance.getEndPointNode(t.getGroupName()),O.instance.addHp(a),$.BULE!=t.getGroupName()){e.next=11;break}return e.next=7,z.Instance.IE_ShowUIView(N.UIHpUpRight);case 7:e.sent.showView(t.getNickName()),e.next=15;break;case 11:return e.next=13,z.Instance.IE_ShowUIView(N.UIHpUpLeft);case 13:e.sent.showView(t.getNickName());case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.updateGameTopUI=function(){var e=Y.getInstance().getGold(),t=Y.getInstance().getDiamond();this.m_labGold.string=W.formatNum(e),this.m_diamond.string=W.formatNum(t),this.updateCheckPoint()},r.updateCheckPoint=function(){var e=Y.getInstance().getCheckPoint(),t=H.getData(e.big,e.small);this.m_labCheckPoint.string="关卡",this.m_labCheckPoint.string+=e.big+1+"-",this.m_labCheckPoint.string+=""+(e.small+1),t.haveData||(this.m_labCheckPoint.string+="*")},r.onClickMap=function(){this.changeMapViewActive()},r.update=function(e){this.updateBottom(e),this.mGamePeerTime-=e,this.mGamePeerTime<=0&&(this.mGamePeerTime=1200,te.getInstance().gameEnd(),ie.getInstance().emit(M.showSucceed,{}));var t=q.instance.getModel(X.Game);if(t.state!=Z.End){if(t.state==Z.Playering&&(this.mUIBoard.active&&(this.mUIBoard.active=!1),this.mCurrentBufferTime-=e,this.mCurrentBufferTime<=0)){this.mCurrentBufferTime=this.mBufferSpaceTime;var n=ne.getInstance().shiftCmd();n&&(Q.debug("开始解析礼物信息..."+JSON.stringify(n)),this.decodeBarrag(n))}}else this.mTimeData-=e,this.mUIStartUICtrl&&this.mUIStartUICtrl.leaveTime(this.mTimeData),this.mTimeData<=0&&(this.mTimeData=this.mMaxTime,q.instance.getModel(X.Game).state=Z.Playering)},t}(v)).prototype,"mUIBoard",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=ce))||re));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIHpUpLeftUICtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./UIComponent.ts","./DataManager.ts","./DateDefine.ts","./UIManager.ts"],(function(t){var n,e,o,a,i,s,r,l,c,u,p,f,m;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){a=t.cclegacy,i=t._decorator,s=t.Animation,r=t.tween,l=t.Label},function(t){c=t.GUI},function(t){u=t.UIComponent},function(t){p=t.DataManager},function(t){f=t.mGlobalData},function(t){m=t.UIManager}],execute:function(){var h;a._RF.push({},"99556cEgUtI14kV2oJU4ynK","UIHpUpLeftUICtrl",void 0);var U=i.ccclass;i.property,t("UIHpUpLeftUICtrl",U("UIHpUpLeftUICtrl")(h=function(t){function a(){for(var n,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return(n=t.call.apply(t,[this].concat(o))||this).m_labLevel=null,n.m_bossName=null,n.m_bossSprite=null,n.m_bossAtlas=null,n.m_anim=null,n.m_callBack=null,n}n(a,t);var i=a.prototype;return i.onLoad=function(){this.init(),this.m_anim=this.node.getComponent(s)},i.init=function(){var t=e(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.m_labLevel=this.ViewComponent("ui_boss_p2/tips",l),this.m_bossName=this.ViewComponent("ui_boss_p2/name",l);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.showView=function(t){this.play(t)},i.play=function(t){var n=this,e=p.getInstance().getCheckPoint();this.m_labLevel.string=e.big+1+"-"+(e.small+1);for(var o=f.getCurMonsterData(),a=0;a<o.length;a++)if(2===o[a].type){o[a].id;break}this.m_bossName.string=t,this.m_anim.play("joinLeft"),r(this.node).delay(2).call((function(){m.Instance.DestroyUIView(c.UIHpUpLeft),n.node.destroy()})).start()},i.end=function(){this.destroy()},a}(u))||h);a._RF.pop()}}}));

System.register("chunks:///_virtual/UIHpUpRightUICtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./UIComponent.ts","./DataManager.ts","./DateDefine.ts","./UIManager.ts"],(function(t){var n,e,i,o,a,s,r,l,c,u,p,h,m;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){o=t.cclegacy,a=t._decorator,s=t.Animation,r=t.tween,l=t.Label},function(t){c=t.GUI},function(t){u=t.UIComponent},function(t){p=t.DataManager},function(t){h=t.mGlobalData},function(t){m=t.UIManager}],execute:function(){var f;o._RF.push({},"25f1dvN7qFEn7MI52umhtVu","UIHpUpRightUICtrl",void 0);var g=a.ccclass;a.property,t("UIHpUpRightUICtrl",g("UIHpUpRightUICtrl")(f=function(t){function o(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this).m_labLevel=null,n.m_bossName=null,n.m_bossSprite=null,n.m_bossAtlas=null,n.m_anim=null,n.m_callBack=null,n}n(o,t);var a=o.prototype;return a.onLoad=function(){this.init(),this.m_anim=this.node.getComponent(s)},a.init=function(){var t=e(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.m_labLevel=this.ViewComponent("ui_boss_p2/tips",l),this.m_bossName=this.ViewComponent("ui_boss_p2/name",l);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.showView=function(t){this.play(t)},a.play=function(t){var n=this,e=p.getInstance().getCheckPoint();this.m_labLevel.string=e.big+1+"-"+(e.small+1);for(var i=h.getCurMonsterData(),o=0;o<i.length;o++)if(2===i[o].type){i[o].id;break}this.m_bossName.string=t,this.m_anim.play("joinRight"),r(this.node).delay(2).call((function(){m.Instance.DestroyUIView(c.UIHpUpRight),n.node.destroy()})).start()},a.end=function(){this.destroy()},o}(u))||f);o._RF.pop()}}}));

System.register("chunks:///_virtual/UIIntensifyUICtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIComponent.ts","./ResManager.ts","./Constants.ts","./IntensifyDataManager.ts","./UIManager.ts","./UITntensifyItem.ts","./DevLog.ts"],(function(t){var e,n,i,r,s,a,c,o,u,f,m,I,h,l,p;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){r=t.cclegacy,s=t._decorator,a=t.instantiate,c=t.Prefab},function(t){o=t.UIComponent},function(t){u=t.ResManager},function(t){f=t.GUI,m=t.BundleName},function(t){I=t.mIntensifyManager},function(t){h=t.UIManager},function(t){l=t.UITntensifyItem},function(t){p=t.DevLog}],execute:function(){var d;r._RF.push({},"fbcafSPW2NO46A12nrMhadC","UIIntensifyUICtrl",void 0);var _=s.ccclass;s.property,t("UIIntensifyUICtrl",_("UIIntensifyUICtrl")(d=function(t){function r(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).m_item=[],e.m_selectId=0,e.m_content=null,e}e(r,t);var s=r.prototype;return s.onLoad=function(){this.m_item=[],this.m_selectId=0,this.m_content=this.ViewNode("ui_win_inRect/scrollView/view/content"),this.AddButtonListener("ui_win_rect/btnClose",this,(function(){p.debug("xxxx"),h.Instance.DestroyUIView(f.UIIntensify)})),this.updateData()},s.updateData=function(){var t=n(i().mark((function t(){var e,n,r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=0;e<this.m_item.length;e++)this.m_item[e].node.active=!1;n=I.getData(),r=0;case 3:if(!(r<n.length)){t.next=14;break}if(null!=this.m_item[r]){t.next=8;break}return t.next=7,this.createItem(r);case 7:this.m_item[r]=t.sent;case 8:this.m_item[r].node.active=!0,this.m_item[r].setID(r),this.m_item[r].updateItem();case 11:r++,t.next=3;break;case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.createItem=function(){var t=n(i().mark((function t(e){var n,r,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.getInstance().getAsset(m.Prefabs,"intensifyItem",c);case 2:return n=t.sent,r=a(n),this.m_content.addChild(r),r.active=!0,s=r.addComponent(l),t.next=9,s.init();case 9:return s.setID(e),t.abrupt("return",s);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),s.onChangeClick=function(t,e){this.m_selectId=parseInt(e),this.updateData()},r}(o))||d);r._RF.pop()}}}));

System.register("chunks:///_virtual/UIJoinLeftUICtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./UIComponent.ts","./DataManager.ts","./DateDefine.ts","./UIManager.ts"],(function(t){var n,e,o,i,a,s,r,l,c,u,f,p,m,h;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){i=t.cclegacy,a=t._decorator,s=t.Animation,r=t.tween,l=t.Label,c=t.Sprite},function(t){u=t.GUI},function(t){f=t.UIComponent},function(t){p=t.DataManager},function(t){m=t.mGlobalData},function(t){h=t.UIManager}],execute:function(){var _;i._RF.push({},"a6e31Uavc1C872tsmGjfYHP","UIJoinLeftUICtrl",void 0);var I=a.ccclass;a.property,t("UIJoinLeftUICtrl",I("UIJoinLeftUICtrl")(_=function(t){function i(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(n=t.call.apply(t,[this].concat(o))||this).m_labLevel=null,n.m_bossName=null,n.avator=null,n.m_bossSprite=null,n.m_bossAtlas=null,n.m_anim=null,n.m_callBack=null,n}n(i,t);var a=i.prototype;return a.onLoad=function(){this.init(),this.m_anim=this.node.getComponent(s)},a.init=function(){var t=e(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.m_labLevel=this.ViewComponent("ui_boss_p2/tips",l),this.m_bossName=this.ViewComponent("ui_boss_p2/name",l),this.avator=this.ViewComponent("ui_boss_p2/avator",c);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.showView=function(t,n){this.play(t,n)},a.play=function(t,n){for(var e=this,o=(p.getInstance().getCheckPoint(),m.getCurMonsterData()),i=0;i<o.length;i++)if(2===o[i].type){o[i].id;break}this.m_bossName.string=t,this.m_anim.play("joinLeft"),r(this.node).delay(2).call((function(){h.Instance.DestroyUIView(u.UIJoinLeft),e.node.destroy()})).start()},a.end=function(){this.destroy()},i}(f))||_);i._RF.pop()}}}));

System.register("chunks:///_virtual/UIJoinRightUICtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./UIComponent.ts","./DataManager.ts","./DateDefine.ts","./UIManager.ts"],(function(t){var n,e,i,o,a,s,r,l,c,u,h,p,m;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){o=t.cclegacy,a=t._decorator,s=t.Animation,r=t.tween,l=t.Label},function(t){c=t.GUI},function(t){u=t.UIComponent},function(t){h=t.DataManager},function(t){p=t.mGlobalData},function(t){m=t.UIManager}],execute:function(){var f;o._RF.push({},"87503t54bFIa7da6ZItVyFt","UIJoinRightUICtrl",void 0);var g=a.ccclass;a.property,t("UIJoinRightUICtrl",g("UIJoinRightUICtrl")(f=function(t){function o(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this).m_labLevel=null,n.m_bossName=null,n.m_bossSprite=null,n.m_bossAtlas=null,n.m_anim=null,n.m_callBack=null,n}n(o,t);var a=o.prototype;return a.onLoad=function(){this.init(),this.m_anim=this.node.getComponent(s)},a.init=function(){var t=e(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.m_labLevel=this.ViewComponent("ui_boss_p2/tips",l),this.m_bossName=this.ViewComponent("ui_boss_p2/name",l);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.showView=function(t){this.play(t)},a.play=function(t){for(var n=this,e=(h.getInstance().getCheckPoint(),p.getCurMonsterData()),i=0;i<e.length;i++)if(2===e[i].type){e[i].id;break}this.m_bossName.string=t,this.m_anim.play("joinRight"),r(this.node).delay(2).call((function(){m.Instance.DestroyUIView(c.UIJoinRight),n.node.destroy()})).start()},a.end=function(){this.destroy()},o}(u))||f);o._RF.pop()}}}));

System.register("chunks:///_virtual/UILifeUpLeftUICtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./UIComponent.ts","./DataManager.ts","./DateDefine.ts","./UIManager.ts"],(function(t){var n,e,i,a,o,s,r,l,c,u,f,p,m;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){a=t.cclegacy,o=t._decorator,s=t.Animation,r=t.tween,l=t.Label},function(t){c=t.GUI},function(t){u=t.UIComponent},function(t){f=t.DataManager},function(t){p=t.mGlobalData},function(t){m=t.UIManager}],execute:function(){var h;a._RF.push({},"0ef2cvqGelEhrjHXbia6iOZ","UILifeUpLeftUICtrl",void 0);var U=o.ccclass;o.property,t("UILifeUpLeftUICtrl",U("UILifeUpLeftUICtrl")(h=function(t){function a(){for(var n,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return(n=t.call.apply(t,[this].concat(i))||this).m_labLevel=null,n.m_bossName=null,n.m_bossSprite=null,n.m_bossAtlas=null,n.m_anim=null,n.m_callBack=null,n}n(a,t);var o=a.prototype;return o.onLoad=function(){this.init(),this.m_anim=this.node.getComponent(s)},o.init=function(){var t=e(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.m_labLevel=this.ViewComponent("ui_boss_p2/tips",l),this.m_bossName=this.ViewComponent("ui_boss_p2/name",l);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.showView=function(t){this.play(t)},o.play=function(t){var n=this,e=f.getInstance().getCheckPoint();this.m_labLevel.string=e.big+1+"-"+(e.small+1);for(var i=p.getCurMonsterData(),a=0;a<i.length;a++)if(2===i[a].type){i[a].id;break}this.m_bossName.string=t,this.m_anim.play("joinLeft"),r(this.node).delay(2).call((function(){m.Instance.DestroyUIView(c.UILifeUpLeft),n.node.destroy()})).start()},o.end=function(){this.destroy()},a}(u))||h);a._RF.pop()}}}));

System.register("chunks:///_virtual/UILifeUpRightUICtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./UIComponent.ts","./DataManager.ts","./DateDefine.ts","./UIManager.ts"],(function(t){var n,e,i,o,s,a,r,l,c,u,p,h,f;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){o=t.cclegacy,s=t._decorator,a=t.Animation,r=t.tween,l=t.Label},function(t){c=t.GUI},function(t){u=t.UIComponent},function(t){p=t.DataManager},function(t){h=t.mGlobalData},function(t){f=t.UIManager}],execute:function(){var m;o._RF.push({},"2e9bbfdGUdNK6s0dgLytBC0","UILifeUpRightUICtrl",void 0);var g=s.ccclass;s.property,t("UILifeUpRightUICtrl",g("UILifeUpRightUICtrl")(m=function(t){function o(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this).m_labLevel=null,n.m_bossName=null,n.m_bossSprite=null,n.m_bossAtlas=null,n.m_anim=null,n.m_callBack=null,n}n(o,t);var s=o.prototype;return s.onLoad=function(){this.init(),this.m_anim=this.node.getComponent(a)},s.init=function(){var t=e(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.m_labLevel=this.ViewComponent("ui_boss_p2/tips",l),this.m_bossName=this.ViewComponent("ui_boss_p2/name",l);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.showView=function(t){this.play(t)},s.play=function(t){var n=this,e=p.getInstance().getCheckPoint();this.m_labLevel.string=e.big+1+"-"+(e.small+1);for(var i=h.getCurMonsterData(),o=0;o<i.length;o++)if(2===i[o].type){i[o].id;break}this.m_bossName.string=t,this.m_anim.play("joinRight"),r(this.node).delay(2).call((function(){f.Instance.DestroyUIView(c.UILifeUpRight),n.node.destroy()})).start()},s.end=function(){this.destroy()},o}(u))||m);o._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResManager.ts","./Constants.ts"],(function(n){var t,e,a,r,i,o,u,s,l,c,p,h,f,d;return{setters:[function(n){t=n.inheritsLoose,e=n.asyncToGenerator,a=n.regeneratorRuntime},function(n){r=n.cclegacy,i=n.find,o=n.error,u=n.director,s=n.Canvas,l=n.Camera,c=n.instantiate,p=n.Component,h=n.Prefab},function(n){f=n.ResManager},function(n){d=n.BundleName}],execute:function(){r._RF.push({},"6bc32YzPr9OLo28rF9LP+jN","UIManager",void 0),n("UIManager",function(n){function r(){for(var t,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return(t=n.call.apply(n,[this].concat(a))||this).uiMap={},t.uiCanvas=null,t.uiCamera=null,t}t(r,n);var p=r.prototype;return p.onLoad=function(){null===r.Instance?r.Instance=this:this.destroy()},p.load=function(){var n=i("Canvas");n?(this.uiMap={},u.addPersistRootNode(n),this.uiCanvas=n.getComponent(s),this.uiCamera=n.getChildByName("Camera").getComponent(l)):o("[UIManager]:can not find UI main Canvas !")},p.ShowUIPrefab=function(n,t,e){if(void 0===t&&(t=null),void 0===e&&(e=!1),this.uiMap[n.data.name])return console.error("界面已存在，请勿重复创建!"),null;var a=c(n);(t=t||this.uiCanvas.node).addChild(a),console.log("ShowUIPrefab: ",n.data.name," parent: ",t.name," withOutCtrl: ",e);var r=null;if(!e){var i=n.data.name+"UICtrl";console.info("新增控制器:"+i),r=a.addComponent(i)}return this.uiMap[n.data.name]=a,r},p.GetUIComponent=function(n){return this.uiMap[n]?this.uiMap[n].getComponent(n+"UICtrl"):null},p.IE_ShowUIView=function(){var n=e(a().mark((function n(t,e,r,i){var o;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return void 0===e&&(e=null),void 0===r&&(r=null),void 0===i&&(i=!1),r||(r=d.GUI),n.next=6,f.getInstance().getAsset(r,t,h);case 6:if(o=n.sent){n.next=10;break}return console.log("cannot find ui Prefab: ",t),n.abrupt("return",null);case 10:return n.abrupt("return",this.ShowUIPrefab(o,e,i));case 11:case"end":return n.stop()}}),n,this)})));return function(t,e,a,r){return n.apply(this,arguments)}}(),p.DestroyUIView=function(n){this.uiMap[n]&&(this.uiMap[n].destroy(),this.uiMap[n]=null)},p.RemoveUIViewFromParent=function(n){if(!this.uiMap[n])return null;this.uiMap[n].removeFromParent();var t=this.uiMap[n];return this.uiMap[n]=null,t},r}(p)).Instance=null,r._RF.pop()}}}));

System.register("chunks:///_virtual/UIMapUICtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIManager.ts","./UIComponent.ts","./CoinFlyManager.ts","./DateDefine.ts","./DataManager.ts","./DiamondFlyManager.ts","./MathUtils.ts","./Constants.ts"],(function(t){var i,n,o,e,s,a,l,c,r,m,h,d,u,p,_,f,w,g,v;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,e=t.ScrollView,s=t.Label,a=t.instantiate,l=t.Vec3,c=t.tween,r=t.v3,m=t.UITransform},function(t){h=t.UIManager},function(t){d=t.UIComponent},function(t){u=t.CoinFlyManager},function(t){p=t.mGlobalData},function(t){_=t.DataManager},function(t){f=t.DiamondFlyManager},function(t){w=t.MathUtils},function(t){g=t.GUI,v=t.UIEventName}],execute:function(){var b;n._RF.push({},"cb7f48gJIpBUaD3iXLsfqez","UIMapUICtrl",void 0);var I=o.ccclass;o.property,t("UIMapUICtrl",I("UIMapUICtrl")(b=function(t){function n(){for(var i,n=arguments.length,o=new Array(n),e=0;e<n;e++)o[e]=arguments[e];return(i=t.call.apply(t,[this].concat(o))||this).m_scrollView=null,i.m_onNode=null,i.m_pointNode=null,i.m_point=null,i.m_curPoint=null,i.m_bossView=null,i.m_bg=null,i.m_labGold=null,i.m_labDiamond=null,i.m_pointData=[],i.m_curtPos={x:0,y:0},i}i(n,t);var o=n.prototype;return o.onLoad=function(){this.m_scrollView=this.ViewComponent("map",e),this.m_onNode=this.ViewNode("map/view/content"),this.m_pointNode=this.ViewNode("map/view/content/map_0"),this.m_point=this.ViewNode("map/view/ui_map_img_2"),this.m_curPoint=this.ViewNode("map/view/ui_map_location"),this.m_bossView=this.ViewNode("bossNode"),this.m_bg=this.ViewNode("bg"),this.m_labGold=this.ViewComponent("bossNode/gold/lab_gold",s),this.m_labDiamond=this.ViewComponent("bossNode/diamond/lab_diamond",s),this.AddButtonListener("bg",this,this.onClickBG),this.m_pointNode.setSiblingIndex(1e3)},o.updatePoint=function(){this.m_pointNode.removeAllChildren();for(var t=0;t<this.m_pointData.length;t++){var i=this.m_pointData[t],n=a(this.m_point);this.m_pointNode.addChild(n),n.active=!0,n.setPosition(new l(i.x,i.y,0))}var o=a(this.m_curPoint);this.m_pointNode.addChild(o),o.active=!0,o.setPosition(new l(this.m_curtPos.x,this.m_curtPos.y,0)),this.curPointRunAction(o)},o.curPointRunAction=function(t){c(t).sequence(c().to(.1,{scale:new l(1.2,.8,1)}),c().parallel(c().by(.2,{position:r(0,30,0)}),c().to(.2,{scale:new l(1,1,1)})),c().parallel(c().by(.2,{position:r(0,-30,0)}),c().to(.2,{scale:new l(1.2,.8,1)})),c().to(.1,{scale:new l(1,1,1)})).repeatForever().start()},o.start=function(){},o.onClickDel=function(){this.m_pointData.pop(),this.updatePoint()},o.onOut=function(){var t=this.m_pointData.map((function(t){return{x:Math.floor(t.x),y:Math.floor(t.y)}}));console.log(JSON.stringify(t))},o.show=function(){this.m_bg.active=!0,this.m_bossView.active=!1,this.node.active=!0,this.m_pointData=[];var t=_.getInstance().getCheckPoint();if(this.m_curtPos=p.checkPointNodePos[0],t.big>1)for(var i=0;i<t.big;i++){var n=p.checkPointNodePos[i];this.m_pointData.push(n)}this.m_curtPos=p.checkPointNodePos[t.big],this.updatePoint();var o=this.m_curtPos.x-320;o<0&&(o=0);var e=o/this.m_onNode.getComponent(m).width;this.m_scrollView.scrollToPercentHorizontal(e,1,!1)},o.hide=function(){h.Instance.DestroyUIView(g.UIMap),h.Instance.DestroyUIView(g.UISettlement)},o.onClickBG=function(){this.hide()},o.showBossView=function(){this.show(),this.m_bossView.active=!0,this.m_bg.active=!1},o.hideBossView=function(){this.hide(),this.m_bossView.active=!1},o.goldFlyEnd=function(t){_.getInstance().addGold(t),this.EmitEventListener(v.updateGameUI)},o.diamondFlyEnd=function(t){_.getInstance().addDiamond(t),this.EmitEventListener(v.updateGameUI)},o.showSucceed=function(t,i){var n=this;console.log("showSucceed"),this.m_labGold.string=""+w.formatNum(t),this.m_labDiamond.string=""+w.formatNum(i),this.showBossView();var o=0,e=setInterval((function(){o<50?(!function(){if(t>0){var o=Math.floor(t/50);u.instance.createCoinToTip(n.m_labGold.node,n.goldFlyEnd.bind(n),o)}if(i>0){var e=Math.floor(i/50);f.instance.createDiamondToTip(n.m_labDiamond.node,n.diamondFlyEnd.bind(n),e)}}(),o++):(clearInterval(e),_.getInstance().setGold(t),_.getInstance().setDiamond(i),n.EmitEventListener(v.updateGameUI))}),10)},n}(d))||b);n._RF.pop()}}}));

System.register("chunks:///_virtual/UIRetoreUpLeftUICtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./UIComponent.ts","./DataManager.ts","./DateDefine.ts","./UIManager.ts"],(function(t){var n,e,o,i,s,a,r,l,c,u,p,f,m;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){i=t.cclegacy,s=t._decorator,a=t.Animation,r=t.tween,l=t.Label},function(t){c=t.GUI},function(t){u=t.UIComponent},function(t){p=t.DataManager},function(t){f=t.mGlobalData},function(t){m=t.UIManager}],execute:function(){var h;i._RF.push({},"efc92CdOIVA3pQiv/kJQssJ","UIRetoreUpLeftUICtrl",void 0);var _=s.ccclass;s.property,t("UIRetoreUpLeftUICtrl",_("UIRetoreUpLeftUICtrl")(h=function(t){function i(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(n=t.call.apply(t,[this].concat(o))||this).m_labLevel=null,n.m_bossName=null,n.m_bossSprite=null,n.m_bossAtlas=null,n.m_anim=null,n.m_callBack=null,n}n(i,t);var s=i.prototype;return s.onLoad=function(){this.init(),this.m_anim=this.node.getComponent(a)},s.init=function(){var t=e(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.m_labLevel=this.ViewComponent("ui_boss_p2/tips",l),this.m_bossName=this.ViewComponent("ui_boss_p2/name",l);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.showView=function(t){this.play(t)},s.play=function(t){var n=this,e=p.getInstance().getCheckPoint();this.m_labLevel.string=e.big+1+"-"+(e.small+1);for(var o=f.getCurMonsterData(),i=0;i<o.length;i++)if(2===o[i].type){o[i].id;break}this.m_bossName.string=t,this.m_anim.play("joinLeft"),r(this.node).delay(2).call((function(){m.Instance.DestroyUIView(c.UIJoinLeft),n.node.destroy()})).start()},s.end=function(){this.destroy()},i}(u))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/UIRetoreUpRightUICtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./UIComponent.ts","./DataManager.ts","./DateDefine.ts","./UIManager.ts"],(function(t){var n,e,i,o,s,a,r,l,c,u,p,h,m;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){o=t.cclegacy,s=t._decorator,a=t.Animation,r=t.tween,l=t.Label},function(t){c=t.GUI},function(t){u=t.UIComponent},function(t){p=t.DataManager},function(t){h=t.mGlobalData},function(t){m=t.UIManager}],execute:function(){var f;o._RF.push({},"6d008sDiupAJYjr54ZChsz9","UIRetoreUpRightUICtrl",void 0);var g=s.ccclass;s.property,t("UIRetoreUpRightUICtrl",g("UIRetoreUpRightUICtrl")(f=function(t){function o(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this).m_labLevel=null,n.m_bossName=null,n.m_bossSprite=null,n.m_bossAtlas=null,n.m_anim=null,n.m_callBack=null,n}n(o,t);var s=o.prototype;return s.onLoad=function(){this.init(),this.m_anim=this.node.getComponent(a)},s.init=function(){var t=e(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.m_labLevel=this.ViewComponent("ui_boss_p2/tips",l),this.m_bossName=this.ViewComponent("ui_boss_p2/name",l);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.showView=function(t){this.play(t)},s.play=function(t){var n=this,e=p.getInstance().getCheckPoint();this.m_labLevel.string=e.big+1+"-"+(e.small+1);for(var i=h.getCurMonsterData(),o=0;o<i.length;o++)if(2===i[o].type){i[o].id;break}this.m_bossName.string=t,this.m_anim.play("joinRight"),r(this.node).delay(2).call((function(){m.Instance.DestroyUIView(c.UIJoinLeft),n.node.destroy()})).start()},s.end=function(){this.destroy()},o}(u))||f);o._RF.pop()}}}));

System.register("chunks:///_virtual/UIRunUpLeftUICtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./UIComponent.ts","./DataManager.ts","./DateDefine.ts","./UIManager.ts"],(function(t){var n,e,a,i,o,s,r,l,u,c,p,f,m;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){i=t.cclegacy,o=t._decorator,s=t.Animation,r=t.tween,l=t.Label},function(t){u=t.GUI},function(t){c=t.UIComponent},function(t){p=t.DataManager},function(t){f=t.mGlobalData},function(t){m=t.UIManager}],execute:function(){var h;i._RF.push({},"44b85aS0CdIT72a+RiTd7rV","UIRunUpLeftUICtrl",void 0);var U=o.ccclass;o.property,t("UIRunUpLeftUICtrl",U("UIRunUpLeftUICtrl")(h=function(t){function i(){for(var n,e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return(n=t.call.apply(t,[this].concat(a))||this).m_labLevel=null,n.m_bossName=null,n.m_bossSprite=null,n.m_bossAtlas=null,n.m_anim=null,n.m_callBack=null,n}n(i,t);var o=i.prototype;return o.onLoad=function(){this.init(),this.m_anim=this.node.getComponent(s)},o.init=function(){var t=e(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.m_labLevel=this.ViewComponent("ui_boss_p2/tips",l),this.m_bossName=this.ViewComponent("ui_boss_p2/name",l);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.showView=function(t){this.play(t)},o.play=function(t){var n=this,e=p.getInstance().getCheckPoint();this.m_labLevel.string=e.big+1+"-"+(e.small+1);for(var a=f.getCurMonsterData(),i=0;i<a.length;i++)if(2===a[i].type){a[i].id;break}this.m_bossName.string=t,this.m_anim.play("joinLeft"),r(this.node).delay(2).call((function(){m.Instance.DestroyUIView(u.UIRunUpLeft),n.node.destroy()})).start()},o.end=function(){this.destroy()},i}(c))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/UIRunUpRightUICtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./UIComponent.ts","./DataManager.ts","./DateDefine.ts","./UIManager.ts"],(function(t){var n,e,i,o,a,s,r,l,u,c,p,h,m;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){o=t.cclegacy,a=t._decorator,s=t.Animation,r=t.tween,l=t.Label},function(t){u=t.GUI},function(t){c=t.UIComponent},function(t){p=t.DataManager},function(t){h=t.mGlobalData},function(t){m=t.UIManager}],execute:function(){var f;o._RF.push({},"364961BNw9JwZqlLpXvVmpR","UIRunUpRightUICtrl",void 0);var g=a.ccclass;a.property,t("UIRunUpRightUICtrl",g("UIRunUpRightUICtrl")(f=function(t){function o(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this).m_labLevel=null,n.m_bossName=null,n.m_bossSprite=null,n.m_bossAtlas=null,n.m_anim=null,n.m_callBack=null,n}n(o,t);var a=o.prototype;return a.onLoad=function(){this.init(),this.m_anim=this.node.getComponent(s)},a.init=function(){var t=e(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.m_labLevel=this.ViewComponent("ui_boss_p2/tips",l),this.m_bossName=this.ViewComponent("ui_boss_p2/name",l);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.showView=function(t){this.play(t)},a.play=function(t){var n=this,e=p.getInstance().getCheckPoint();this.m_labLevel.string=e.big+1+"-"+(e.small+1);for(var i=h.getCurMonsterData(),o=0;o<i.length;o++)if(2===i[o].type){i[o].id;break}this.m_bossName.string=t,this.m_anim.play("joinRight"),r(this.node).delay(2).call((function(){m.Instance.DestroyUIView(u.UIRunUpRight),n.node.destroy()})).start()},a.end=function(){this.destroy()},o}(c))||f);o._RF.pop()}}}));

System.register("chunks:///_virtual/UISettlementUICtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIComponent.ts","./MathUtils.ts"],(function(t){var e,o,i,n,s,l,c,d;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator,n=t.Label,s=t.v3,l=t.tween},function(t){c=t.UIComponent},function(t){d=t.MathUtils}],execute:function(){var r;o._RF.push({},"b7edeqgK+tGMbHTbiPbk1Ap","UISettlementUICtrl",void 0);var a=i.ccclass;i.property,t("UISettlementUICtrl",a("UISettlementUICtrl")(r=function(t){function o(){for(var e,o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))||this).m_faildNode=null,e.m_succeedNode=null,e.m_labGold=null,e.node=void 0,e}e(o,t);var i=o.prototype;return i.onLoad=function(){this.m_faildNode=this.ViewNode("ui_lose"),this.m_succeedNode=this.ViewNode("ui_win"),this.m_labGold=this.ViewComponent("lab",n)},i.showSucceed=function(t){this.show(),this.m_labGold.string=d.formatNum(t),this.m_faildNode.active=!1,this.m_succeedNode.active=!0},i.showFaild=function(t){this.show(),this.m_labGold.string=d.formatNum(t),this.m_faildNode.active=!0,this.m_succeedNode.active=!1},i.show=function(){this.node.setPosition(s(0,980)),l(this.node).to(.3,{position:s(0,0)}).start()},i.hide=function(){this.node.setPosition(s(0,0)),l(this.node).to(.3,{position:s(0,980)}).destroySelf().start()},o}(c))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/UIStartUICtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIComponent.ts","./Constants.ts","./UIManager.ts","./GameModel.ts","./DataModelManager.ts","./BiliBiliManager.ts","./MonsterUtils.ts"],(function(t){var e,n,i,a,o,r,s,c,l,u,m;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator},function(t){a=t.UIComponent},function(t){o=t.GUI},function(t){r=t.UIManager},function(t){s=t.GameState},function(t){c=t.DataModelManager,l=t.ModelName},function(t){u=t.BiliBiliManager},function(t){m=t.MonsterUtils}],execute:function(){var I;n._RF.push({},"27827EZ6tVHZ5VYZZqTrkv+","UIStartUICtrl",void 0);var g=i.ccclass;i.property,t("UIStartUICtrl",g("UIStartUICtrl")(I=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))||this).m_item=[],e.m_selectId=0,e.m_content=null,e.mTime=null,e}e(n,t);var i=n.prototype;return i.onLoad=function(){this.m_item=[],this.m_selectId=0,this.m_content=this.ViewNode("ui_win_inRect/scrollView/view/content"),this.mTime=this.ViewNode("ui_win_inRect/scrollView/view/content"),this.AddButtonListener("game_start_btn",this,(function(){u.getInstance().gameStart(),r.Instance.DestroyUIView(o.UIStart),c.instance.getModel(l.Game).state=s.Playering}))},i.leaveTime=function(t){t<=0?(u.getInstance().gameStart(),r.Instance.DestroyUIView(o.UIStart),c.instance.getModel(l.Game).state=s.Playering):this.mTime.string="开始游戏("+m.formatSeconds(t)+"秒)"},n}(a))||I);n._RF.pop()}}}));

System.register("chunks:///_virtual/UITaskItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIComponent.ts","./DataManager.ts","./Constants.ts","./CoinFlyManager.ts","./DiamondFlyManager.ts","./TaskDataManager.ts"],(function(t){var a,n,e,i,s,o,r,m,u,c,d,l;return{setters:[function(t){a=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator,i=t.Label,s=t.ProgressBar,o=t.Button},function(t){r=t.UIComponent},function(t){m=t.DataManager},function(t){u=t.UIEventName},function(t){c=t.CoinFlyManager},function(t){d=t.DiamondFlyManager},function(t){l=t.mTaskDataManager}],execute:function(){var _;n._RF.push({},"ffe0fagssJDS4HKRQKaD081","UITaskItem",void 0);var g=e.ccclass;e.property,t("UITaskItem",g("UITaskItem")(_=function(t){function n(){for(var a,n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];return(a=t.call.apply(t,[this].concat(e))||this).m_title=null,a.m_curLabel=null,a.m_progressBar=null,a.m_awardLabel=null,a.m_getButton=null,a.m_awardCoin=null,a.m_awardDiamond=null,a.m_taskID=0,a}a(n,t);var e=n.prototype;return e.onLoad=function(){this.m_title=this.ViewComponent("title",i),this.m_curLabel=this.ViewComponent("curLabel",i),this.m_progressBar=this.ViewComponent("progressBar",s),this.m_awardLabel=this.ViewComponent("ui_win_numbg_rect/award",i),this.m_getButton=this.ViewComponent("get",o),this.m_awardCoin=this.ViewNode("ui_win_numbg_rect/ui_coin"),this.m_awardDiamond=this.ViewNode("ui_win_numbg_rect/ui_diamond")},e.setTaskID=function(t){this.m_taskID=t},e.updateItem=function(){this.m_getButton.interactable=!1;var t=l.getData(),a=l.getTaskDataByID(this.m_taskID);if(!(this.m_taskID>=t.length)){var n=m.getInstance().getTaskByID(this.m_taskID),e=l.getTitle(this.m_taskID,n.maxIndex);this.m_title.string=e;var i=l.getMaxCount(this.m_taskID,n.maxIndex);n.curCount>=i&&(n.curCount=i,this.m_getButton.interactable=!0);var s=n.curCount+"/"+i;this.m_curLabel.string=s;var o=n.curCount/i;this.m_progressBar.progress=o,0==a.taskType?(this.m_awardCoin.active=!0,this.m_awardDiamond.active=!1):(this.m_awardCoin.active=!1,this.m_awardDiamond.active=!0),this.m_awardLabel.string=""+l.getAward(this.m_taskID,n.maxIndex)}},e.goldFlyEnd=function(t){m.getInstance().addGold(t),this.EmitEventListener(u.updateGameUI)},e.diamondFlyEnd=function(t){m.getInstance().addDiamond(t),this.EmitEventListener(u.updateGameUI)},e.onClickGet=function(){var t=this,a=m.getInstance().getTaskByID(this.m_taskID),n=l.getAward(this.m_taskID,a.maxIndex),e=l.getTaskDataByID(this.m_taskID),i=0,s=setInterval((function(){i<50?(!function(){if(0==e.taskType){var a=Math.floor(n/50);c.instance.createCoinToTip(t.m_awardCoin,t.goldFlyEnd.bind(t),a)}if(1==e.taskType){var i=Math.floor(n/50);d.instance.createDiamondToTip(t.m_awardCoin,t.diamondFlyEnd.bind(t),i)}}(),i++):(clearInterval(s),0==e.taskType?m.getInstance().setGold(n):m.getInstance().setDiamond(n),t.EmitEventListener(u.updateGameUI))}),10);m.getInstance().nextTask(this.m_taskID),this.updateItem()},n}(r))||_);n._RF.pop()}}}));

System.register("chunks:///_virtual/UITaskUICtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIComponent.ts","./TaskDataManager.ts","./ResManager.ts","./Constants.ts","./UIManager.ts","./UITaskItem.ts"],(function(t){var e,n,a,r,s,i,c,o,u,m,I,h,l,f;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){r=t.cclegacy,s=t._decorator,i=t.instantiate,c=t.Prefab},function(t){o=t.UIComponent},function(t){u=t.mTaskDataManager},function(t){m=t.ResManager},function(t){I=t.GUI,h=t.BundleName},function(t){l=t.UIManager},function(t){f=t.UITaskItem}],execute:function(){var p;r._RF.push({},"deab4PhDhhF95xFrJm67cFi","UITaskUICtrl",void 0);var d=s.ccclass;s.property,t("UITaskUICtrl",d("UITaskUICtrl")(p=function(t){function r(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))||this).mItem=[],e.mSelectId=0,e.mContent=null,e}e(r,t);var s=r.prototype;return s.onLoad=function(){this.mItem=[],this.mSelectId=0,this.mContent=this.ViewNode("ui_win_inRect/scrollView/view/content"),this.AddButtonListener("ui_win_rect/btnClose",this,(function(){l.Instance.DestroyUIView(I.UITask)})),this.updateData()},s.updateData=function(){var t=n(a().mark((function t(){var e,n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=0;e<this.mItem.length;e++)this.mItem[e].node.active=!1;n=u.getData(),r=0;case 3:if(!(r<n.length)){t.next=15;break}if(n[r].taskType==this.mSelectId){t.next=6;break}return t.abrupt("continue",12);case 6:if(null!=this.mItem[r]){t.next=10;break}return t.next=9,this.createItem(r);case 9:this.mItem[r]=t.sent;case 10:this.mItem[r].node.active=!0,this.mItem[r].updateItem();case 12:r++,t.next=3;break;case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.createItem=function(){var t=n(a().mark((function t(e){var n,r,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.getInstance().getAsset(h.Prefabs,"taskItem",c);case 2:return n=t.sent,r=i(n),this.mContent.addChild(r),r.active=!0,(s=r.addComponent(f)).setTaskID(e),t.abrupt("return",s);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),s.onChangeClick=function(t,e){this.mSelectId=parseInt(e),this.updateData()},r}(o))||p);r._RF.pop()}}}));

System.register("chunks:///_virtual/UITntensifyItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIComponent.ts","./DataManager.ts","./Constants.ts","./ResManager.ts","./IntensifyDataManager.ts"],(function(t){var e,n,i,a,s,l,r,o,u,m,c,h,I,g,p;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){a=t.cclegacy,s=t._decorator,l=t.Label,r=t.Sprite,o=t.Button,u=t.SpriteAtlas},function(t){m=t.UIComponent},function(t){c=t.DataManager},function(t){h=t.UIEventName,I=t.BundleName},function(t){g=t.ResManager},function(t){p=t.mIntensifyManager}],execute:function(){var _;a._RF.push({},"cbed4VUnYNIML/2ESMBpWRa","UITntensifyItem",void 0);var v=s.ccclass;s.property,t("UITntensifyItem",v("UITntensifyItem")(_=function(t){function a(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))||this).m_title=null,e.m_icon=null,e.m_lvLabel=null,e.m_preLabel=null,e.m_upLevelButton=null,e.m_needDiamond=null,e.m_gameUIAtlas=null,e.m_ID=0,e}e(a,t);var s=a.prototype;return s.onLoad=function(){this.m_title=this.ViewComponent("title",l),this.m_icon=this.ViewComponent("ui_g_buildUpProb",r),this.m_lvLabel=this.ViewComponent("lv",l),this.m_preLabel=this.ViewComponent("value",l),this.m_upLevelButton=this.ViewComponent("upLevel",o),this.m_needDiamond=this.ViewComponent("upLevel/Background/Label",l)},s.init=function(){var t=n(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.getInstance().getAsset(I.Atlas,"gameUI",u);case 2:this.m_gameUIAtlas=t.sent;case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.updateItem=function(){this.m_upLevelButton.interactable=!0;var t=p.getIntensifyDataByID(this.m_ID);if(null!=t){var e=p.getTitle(this.m_ID);this.setTitle(e);var n=p.getIcon(this.m_ID),i=this.m_gameUIAtlas.getSpriteFrame(n);this.m_icon.spriteFrame=i;var a=c.getInstance().getInternsifLevel(this.m_ID);a>=t.value.length&&(a=t.value.length-1,this.m_upLevelButton.interactable=!1);var s=p.getDiamond(this.m_ID,a);c.getInstance().getDiamond()<s&&(this.m_upLevelButton.interactable=!1),this.m_needDiamond.string=""+s,this.m_lvLabel.string="Lv."+(a+1);var l=p.getValue(this.m_ID,a),r=p.getValue(this.m_ID,a+1),o="";t.showPer&&(o="%"),this.m_preLabel.string=null==r?""+l+o+" - MAX":""+l+o+" - "+r+o}},s.setID=function(t){this.m_ID=t},s.setTitle=function(t){this.m_title.string=t},s.onClickUp=function(){var t=p.getIntensifyDataByID(this.m_ID);if(null!=t){var e=c.getInstance().getInternsifLevel(this.m_ID);if(e>=t.value.length)return e=t.value.length-1,void(this.m_upLevelButton.interactable=!1);var n=p.getDiamond(this.m_ID,e);c.getInstance().getDiamond()<n?this.m_upLevelButton.interactable=!1:(c.getInstance().subDiamond(n),c.getInstance().addInternsifLevel(this.m_ID),this.EmitEventListener(h.updateGameUI),this.updateItem())}},a}(m))||_);a._RF.pop()}}}));

System.register("chunks:///_virtual/webapi.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"00f80q+ZvZCJr41P99xHH+Y","webapi",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/WsNetManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Event.ts","./EventManager.ts","./DevLog.ts"],(function(t){var n,e,s,o,i,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,s=t.Component},function(t){o=t.WsNetEvent},function(t){i=t.EventManager},function(t){c=t.DevLog}],execute:function(){e._RF.push({},"aeccc1clq9LY7+Wyer4n8OC","WsNetManager",void 0);var u=function(t){return t[t.None=0]="None",t[t.Connecting=1]="Connecting",t[t.Connected=2]="Connected",t[t.Disconnected=3]="Disconnected",t}(u||{});t("WsNetManager",function(t){function e(){for(var n,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return(n=t.call.apply(t,[this].concat(s))||this).status=u.None,n.url="ws://112.124.67.196:5000/",n.ws=null,n._onOpen=function(t){c.info("ws连接成功"),n.status=u.Connected,i.getInstance().emit(o.CONNECTED,n.url)},n._onMessage=function(t){c.info("接收到ws消息:"+t);var n=t.data;i.getInstance().emit(o.MESSAGE,n)},n._onClose=function(t){n._closeSocket()},n._onError=function(t){n._closeSocket()},n}n(e,t),e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance};var s=e.prototype;return s.load=function(){this.status=u.Disconnected,this.ws=null},s.initSocketIO=function(){},s.connect=function(t){this.status==u.None||this.status==u.Disconnected?(t&&(this.url=t),this.status=u.Connecting,i.getInstance().emit(o.CONNECTINT,this.url),this.ws=new WebSocket(this.url),c.info("连接ws中:"+this.url),this.ws.binaryType="arraybuffer",this.ws.onopen=this._onOpen,this.ws.onmessage=this._onMessage,this.ws.onclose=this._onClose,this.ws.onerror=this._onError):c.debug("WebSokcet 连接中,无须重新连接ws")},s._closeSocket=function(){this.status!=u.None?(this.ws&&(this.ws.close(),this.ws=null),this.status=u.Disconnected,i.getInstance().emit(o.DISCONNECT,this.url)):c.debug("WebSokcet 状态为空,无须关闭ws")},s.update=function(t){this.status!=u.None?this.status==u.Disconnected&&this.connect(this.url):c.debug("WebSokcet 状态为空,无须更新ws状态")},e}(s))._instance=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/wxSDK.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"e0067Tb9bVN3afiK7VhvyUn","wxSDK",void 0);t("wxSDK",function(){function t(){}var e=t.prototype;return e.login=function(){var t=this;wx.login({success:function(e){e.code?(console.log("登录成功！"+JSON.stringify(e)),t.getSetting()):console.log("登录失败！"+e.errMsg)}})},e.getSetting=function(){wx.getSetting({success:function(t){!0===t.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(t){console.log("已经授权，直接获取用户信息",t)}}):wx.createUserInfoButton({type:"image",style:{left:100,top:100,width:100,height:100,backgroundColor:"rgba(255, 255, 255, 0.5)"}}).onTap((function(t){t.errMsg.indexOf(":ok")>-1&&t.rawData&&console.log("获取用户信息",t)}))}})},e.openSetting=function(){},e.checkUpdate=function(){var t=wx.getUpdateManager(),e=this;t.onCheckForUpdate((function(t){if(console.log("请求完新版本信息的回调",t.hasUpdate),!t.hasUpdate){var n=wx.getAppBaseInfo().SDKVersion;console.log("SDKVersion",n),e.compareVersion(n,"3.3.0")>=0?(wx.startGyroscope(),e.login()):wx.showModal({title:"提示",content:"当前微信版本过低，无法使用该功能，请升级到最新微信版本后重试。"})}})),t.onUpdateReady((function(){wx.showModal({title:"更新提示",content:"新版本已经准备好，是否重启应用？",success:function(e){e.confirm&&t.applyUpdate()}})})),t.onUpdateFailed((function(){console.error("新版本下载失败")}))},e.authenticateRealName=function(){},e.onRealNameAuthenticationComplete=function(){},e.compareVersion=function(t,e){t=t.split("."),e=e.split(".");for(var n=Math.max(t.length,e.length);t.length<n;)t.push("0");for(;e.length<n;)e.push("0");for(var o=0;o<n;o++){var c=parseInt(t[o]),i=parseInt(e[o]);if(c>i)return 1;if(c<i)return-1}return 0},t}());e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});